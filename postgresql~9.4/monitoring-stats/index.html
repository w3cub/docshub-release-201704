
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Monitoring&#58; Statistics Collector - PostgreSQL 9.4 - W3cubDocs</title>
  
  <meta name="description" content="PostgreSQL&#39;s statistics collector is a subsystem that supports collection and reporting of information about server activity. Presently, the &hellip;">
  <meta name="keywords" content="statistics, collector, monitoring, -, postgresql, postgresql~9.4">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/postgresql~9.4/monitoring-stats/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/postgresql~9.4.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/postgresql~9.4/" class="_nav-link" title="" style="margin-left:0;">PostgreSQL 9.4</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _postgres">
				
<h1 class="SECT1" id="MONITORING-STATS">27.2. The Statistics Collector</h1> <p><span class="PRODUCTNAME">PostgreSQL</span>'s <i class="FIRSTTERM">statistics collector</i> is a subsystem that supports collection and reporting of information about server activity. Presently, the collector can count accesses to tables and indexes in both disk-block and individual-row terms. It also tracks the total number of rows in each table, and information about vacuum and analyze actions for each table. It can also count calls to user-defined functions and the total time spent in each one.</p> <p><span class="PRODUCTNAME">PostgreSQL</span> also supports reporting of the exact command currently being executed by other server processes. This facility is independent of the collector process.</p> <div class="SECT2"> <h2 class="SECT2" id="MONITORING-STATS-SETUP">27.2.1. Statistics Collection Configuration</h2> <p>Since collection of statistics adds some overhead to query execution, the system can be configured to collect or not collect information. This is controlled by configuration parameters that are normally set in <code class="FILENAME">postgresql.conf</code>. (See <a href="https://www.postgresql.org/docs/9.4/static/runtime-config.html" target="_blank">Chapter 18</a> for details about setting configuration parameters.)</p> <p>The parameter <a href="../runtime-config-statistics/#GUC-TRACK-ACTIVITIES">track_activities</a> enables monitoring of the current command being executed by any server process.</p> <p>The parameter <a href="../runtime-config-statistics/#GUC-TRACK-COUNTS">track_counts</a> controls whether statistics are collected about table and index accesses.</p> <p>The parameter <a href="../runtime-config-statistics/#GUC-TRACK-FUNCTIONS">track_functions</a> enables tracking of usage of user-defined functions.</p> <p>The parameter <a href="../runtime-config-statistics/#GUC-TRACK-IO-TIMING">track_io_timing</a> enables monitoring of block read and write times.</p> <p>Normally these parameters are set in <code class="FILENAME">postgresql.conf</code> so that they apply to all server processes, but it is possible to turn them on or off in individual sessions using the <a href="../sql-set/">SET</a> command. (To prevent ordinary users from hiding their activity from the administrator, only superusers are allowed to change these parameters with <code class="COMMAND">SET</code>.)</p> <p>The statistics collector transmits the collected information to other <span class="PRODUCTNAME">PostgreSQL</span> processes through temporary files. These files are stored in the directory named by the <a href="../runtime-config-statistics/#GUC-STATS-TEMP-DIRECTORY">stats_temp_directory</a> parameter, <code class="FILENAME">pg_stat_tmp</code> by default. For better performance, <code class="VARNAME">stats_temp_directory</code> can be pointed at a RAM-based file system, decreasing physical I/O requirements. When the server shuts down cleanly, a permanent copy of the statistics data is stored in the <code class="FILENAME">pg_stat</code> subdirectory, so that statistics can be retained across server restarts. When recovery is performed at server start (e.g. after immediate shutdown, server crash, and point-in-time recovery), all statistics counters are reset.</p> </div> <div class="SECT2"> <h2 class="SECT2" id="MONITORING-STATS-VIEWS">27.2.2. Viewing Collected Statistics</h2> <p>Several predefined views, listed in <a href="../monitoring-stats/#MONITORING-STATS-VIEWS-TABLE">Table 27-1</a>, are available to show the results of statistics collection. Alternatively, one can build custom views using the underlying statistics functions, as discussed in <a href="../monitoring-stats/#MONITORING-STATS-FUNCTIONS">Section 27.2.3</a>.</p> <p>When using the statistics to monitor current activity, it is important to realize that the information does not update instantaneously. Each individual server process transmits new statistical counts to the collector just before going idle; so a query or transaction still in progress does not affect the displayed totals. Also, the collector itself emits a new report at most once per <code class="VARNAME">PGSTAT_STAT_INTERVAL</code> milliseconds (500 ms unless altered while building the server). So the displayed information lags behind actual activity. However, current-query information collected by <code class="VARNAME">track_activities</code> is always up-to-date.</p> <p>Another important point is that when a server process is asked to display any of these statistics, it first fetches the most recent report emitted by the collector process and then continues to use this snapshot for all statistical views and functions until the end of its current transaction. So the statistics will show static information as long as you continue the current transaction. Similarly, information about the current queries of all sessions is collected when any such information is first requested within a transaction, and the same information will be displayed throughout the transaction. This is a feature, not a bug, because it allows you to perform several queries on the statistics and correlate the results without worrying that the numbers are changing underneath you. But if you want to see new results with each query, be sure to do the queries outside any transaction block. Alternatively, you can invoke <code class="FUNCTION">pg_stat_clear_snapshot</code>(), which will discard the current transaction's statistics snapshot (if any). The next use of statistical information will cause a new snapshot to be fetched.</p> <p>A transaction can also see its own statistics (as yet untransmitted to the collector) in the views <code class="STRUCTNAME">pg_stat_xact_all_tables</code>, <code class="STRUCTNAME">pg_stat_xact_sys_tables</code>, <code class="STRUCTNAME">pg_stat_xact_user_tables</code>, and <code class="STRUCTNAME">pg_stat_xact_user_functions</code>. These numbers do not act as stated above; instead they update continuously throughout the transaction.</p> <div class="TABLE" id="MONITORING-STATS-VIEWS-TABLE">  <p class="c2">Table 27-1. Standard Statistics Views</p> <table class="CALSTABLE"> <col> <col> <thead> <tr> <th>View Name</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="STRUCTNAME">pg_stat_activity</code></td> <td>One row per server process, showing information related to the current activity of that process, such as state and current query. See <a href="../monitoring-stats/#PG-STAT-ACTIVITY-VIEW">pg_stat_activity</a> for details.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_stat_archiver</code></td> <td>One row only, showing statistics about the WAL archiver process's activity. See <a href="../monitoring-stats/#PG-STAT-ARCHIVER-VIEW">pg_stat_archiver</a> for details.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_stat_bgwriter</code></td> <td>One row only, showing statistics about the background writer process's activity. See <a href="../monitoring-stats/#PG-STAT-BGWRITER-VIEW">pg_stat_bgwriter</a> for details.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_stat_database</code></td> <td>One row per database, showing database-wide statistics. See <a href="../monitoring-stats/#PG-STAT-DATABASE-VIEW">pg_stat_database</a> for details.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_stat_all_tables</code></td> <td>One row for each table in the current database, showing statistics about accesses to that specific table. See <a href="../monitoring-stats/#PG-STAT-ALL-TABLES-VIEW">pg_stat_all_tables</a> for details.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_stat_sys_tables</code></td> <td>Same as <code class="STRUCTNAME">pg_stat_all_tables</code>, except that only system tables are shown.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_stat_user_tables</code></td> <td>Same as <code class="STRUCTNAME">pg_stat_all_tables</code>, except that only user tables are shown.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_stat_xact_all_tables</code></td> <td>Similar to <code class="STRUCTNAME">pg_stat_all_tables</code>, but counts actions taken so far within the current transaction (which are <span class="emphasis EMPHASIS c3">not</span> yet included in <code class="STRUCTNAME">pg_stat_all_tables</code> and related views). The columns for numbers of live and dead rows and vacuum and analyze actions are not present in this view.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_stat_xact_sys_tables</code></td> <td>Same as <code class="STRUCTNAME">pg_stat_xact_all_tables</code>, except that only system tables are shown.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_stat_xact_user_tables</code></td> <td>Same as <code class="STRUCTNAME">pg_stat_xact_all_tables</code>, except that only user tables are shown.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_stat_all_indexes</code></td> <td>One row for each index in the current database, showing statistics about accesses to that specific index. See <a href="../monitoring-stats/#PG-STAT-ALL-INDEXES-VIEW">pg_stat_all_indexes</a> for details.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_stat_sys_indexes</code></td> <td>Same as <code class="STRUCTNAME">pg_stat_all_indexes</code>, except that only indexes on system tables are shown.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_stat_user_indexes</code></td> <td>Same as <code class="STRUCTNAME">pg_stat_all_indexes</code>, except that only indexes on user tables are shown.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_statio_all_tables</code></td> <td>One row for each table in the current database, showing statistics about I/O on that specific table. See <a href="../monitoring-stats/#PG-STATIO-ALL-TABLES-VIEW">pg_statio_all_tables</a> for details.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_statio_sys_tables</code></td> <td>Same as <code class="STRUCTNAME">pg_statio_all_tables</code>, except that only system tables are shown.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_statio_user_tables</code></td> <td>Same as <code class="STRUCTNAME">pg_statio_all_tables</code>, except that only user tables are shown.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_statio_all_indexes</code></td> <td>One row for each index in the current database, showing statistics about I/O on that specific index. See <a href="../monitoring-stats/#PG-STATIO-ALL-INDEXES-VIEW">pg_statio_all_indexes</a> for details.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_statio_sys_indexes</code></td> <td>Same as <code class="STRUCTNAME">pg_statio_all_indexes</code>, except that only indexes on system tables are shown.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_statio_user_indexes</code></td> <td>Same as <code class="STRUCTNAME">pg_statio_all_indexes</code>, except that only indexes on user tables are shown.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_statio_all_sequences</code></td> <td>One row for each sequence in the current database, showing statistics about I/O on that specific sequence. See <a href="../monitoring-stats/#PG-STATIO-ALL-SEQUENCES-VIEW">pg_statio_all_sequences</a> for details.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_statio_sys_sequences</code></td> <td>Same as <code class="STRUCTNAME">pg_statio_all_sequences</code>, except that only system sequences are shown. (Presently, no system sequences are defined, so this view is always empty.)</td> </tr> <tr> <td><code class="STRUCTNAME">pg_statio_user_sequences</code></td> <td>Same as <code class="STRUCTNAME">pg_statio_all_sequences</code>, except that only user sequences are shown.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_stat_user_functions</code></td> <td>One row for each tracked function, showing statistics about executions of that function. See <a href="../monitoring-stats/#PG-STAT-USER-FUNCTIONS-VIEW">pg_stat_user_functions</a> for details.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_stat_xact_user_functions</code></td> <td>Similar to <code class="STRUCTNAME">pg_stat_user_functions</code>, but counts only calls during the current transaction (which are <span class="emphasis EMPHASIS c3">not</span> yet included in <code class="STRUCTNAME">pg_stat_user_functions</code>).</td> </tr> <tr> <td><code class="STRUCTNAME">pg_stat_replication</code></td> <td>One row per WAL sender process, showing statistics about replication to that sender's connected standby server. See <a href="../monitoring-stats/#PG-STAT-REPLICATION-VIEW">pg_stat_replication</a> for details.</td> </tr> <tr> <td><code class="STRUCTNAME">pg_stat_database_conflicts</code></td> <td>One row per database, showing database-wide statistics about query cancels due to conflict with recovery on standby servers. See <a href="../monitoring-stats/#PG-STAT-DATABASE-CONFLICTS-VIEW"> pg_stat_database_conflicts</a> for details.</td> </tr> </tbody> </table> </div> <p>The per-index statistics are particularly useful to determine which indexes are being used and how effective they are.</p> <p>The <code class="STRUCTNAME">pg_statio_</code> views are primarily useful to determine the effectiveness of the buffer cache. When the number of actual disk reads is much smaller than the number of buffer hits, then the cache is satisfying most read requests without invoking a kernel call. However, these statistics do not give the entire story: due to the way in which <span class="PRODUCTNAME">PostgreSQL</span> handles disk I/O, data that is not in the <span class="PRODUCTNAME">PostgreSQL</span> buffer cache might still reside in the kernel's I/O cache, and might therefore still be fetched without requiring a physical read. Users interested in obtaining more detailed information on <span class="PRODUCTNAME">PostgreSQL</span> I/O behavior are advised to use the <span class="PRODUCTNAME">PostgreSQL</span> statistics collector in combination with operating system utilities that allow insight into the kernel's handling of I/O.</p> <div class="TABLE" id="PG-STAT-ACTIVITY-VIEW">  <p class="c2">Table 27-2. <code class="STRUCTNAME">pg_stat_activity</code> View</p> <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="STRUCTFIELD">datid</code></td> <td><code class="TYPE">oid</code></td> <td>OID of the database this backend is connected to</td> </tr> <tr> <td><code class="STRUCTFIELD">datname</code></td> <td><code class="TYPE">name</code></td> <td>Name of the database this backend is connected to</td> </tr> <tr> <td><code class="STRUCTFIELD">pid</code></td> <td><code class="TYPE">integer</code></td> <td>Process ID of this backend</td> </tr> <tr> <td><code class="STRUCTFIELD">usesysid</code></td> <td><code class="TYPE">oid</code></td> <td>OID of the user logged into this backend</td> </tr> <tr> <td><code class="STRUCTFIELD">usename</code></td> <td><code class="TYPE">name</code></td> <td>Name of the user logged into this backend</td> </tr> <tr> <td><code class="STRUCTFIELD">application_name</code></td> <td><code class="TYPE">text</code></td> <td>Name of the application that is connected to this backend</td> </tr> <tr> <td><code class="STRUCTFIELD">client_addr</code></td> <td><code class="TYPE">inet</code></td> <td>IP address of the client connected to this backend. If this field is null, it indicates either that the client is connected via a Unix socket on the server machine or that this is an internal process such as autovacuum.</td> </tr> <tr> <td><code class="STRUCTFIELD">client_hostname</code></td> <td><code class="TYPE">text</code></td> <td>Host name of the connected client, as reported by a reverse DNS lookup of <code class="STRUCTFIELD">client_addr</code>. This field will only be non-null for IP connections, and only when <a href="../runtime-config-logging/#GUC-LOG-HOSTNAME">log_hostname</a> is enabled.</td> </tr> <tr> <td><code class="STRUCTFIELD">client_port</code></td> <td><code class="TYPE">integer</code></td> <td>TCP port number that the client is using for communication with this backend, or <code class="LITERAL">-1</code> if a Unix socket is used</td> </tr> <tr> <td><code class="STRUCTFIELD">backend_start</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Time when this process was started, i.e., when the client connected to the server</td> </tr> <tr> <td><code class="STRUCTFIELD">xact_start</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Time when this process' current transaction was started, or null if no transaction is active. If the current query is the first of its transaction, this column is equal to the <code class="STRUCTFIELD">query_start</code> column.</td> </tr> <tr> <td><code class="STRUCTFIELD">query_start</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Time when the currently active query was started, or if <code class="STRUCTFIELD">state</code> is not <code class="LITERAL">active</code>, when the last query was started</td> </tr> <tr> <td><code class="STRUCTFIELD">state_change</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Time when the <code class="STRUCTFIELD">state</code> was last changed</td> </tr> <tr> <td><code class="STRUCTFIELD">waiting</code></td> <td><code class="TYPE">boolean</code></td> <td>True if this backend is currently waiting on a lock</td> </tr> <tr> <td><code class="STRUCTFIELD">state</code></td> <td><code class="TYPE">text</code></td> <td> Current overall state of this backend. Possible values are: <ul> <li> <p><code class="LITERAL">active</code>: The backend is executing a query.</p> </li> <li> <p><code class="LITERAL">idle</code>: The backend is waiting for a new client command.</p> </li> <li> <p><code class="LITERAL">idle in transaction</code>: The backend is in a transaction, but is not currently executing a query.</p> </li> <li> <p><code class="LITERAL">idle in transaction (aborted)</code>: This state is similar to <code class="LITERAL">idle in transaction</code>, except one of the statements in the transaction caused an error.</p> </li> <li> <p><code class="LITERAL">fastpath function call</code>: The backend is executing a fast-path function.</p> </li> <li> <p><code class="LITERAL">disabled</code>: This state is reported if <a href="../runtime-config-statistics/#GUC-TRACK-ACTIVITIES"> track_activities</a> is disabled in this backend.</p> </li> </ul> </td> </tr> <tr> <td><code class="STRUCTFIELD">backend_xid</code></td> <td><code class="TYPE">xid</code></td> <td>Top-level transaction identifier of this backend, if any.</td> </tr> <tr> <td><code class="STRUCTFIELD">backend_xmin</code></td> <td><code class="TYPE">xid</code></td> <td>The current backend's <code class="LITERAL">xmin</code> horizon.</td> </tr> <tr> <td><code class="STRUCTFIELD">query</code></td> <td><code class="TYPE">text</code></td> <td>Text of this backend's most recent query. If <code class="STRUCTFIELD">state</code> is <code class="LITERAL">active</code> this field shows the currently executing query. In all other states, it shows the last query that was executed.</td> </tr> </tbody> </table> </div> <p>The <code class="STRUCTNAME">pg_stat_activity</code> view will have one row per server process, showing information related to the current activity of that process.</p>  <blockquote class="NOTE"> <p><b>Note:</b> The <code class="STRUCTFIELD">waiting</code> and <code class="STRUCTFIELD">state</code> columns are independent. If a backend is in the <code class="LITERAL">active</code> state, it may or may not be <code class="LITERAL">waiting</code>. If the state is <code class="LITERAL">active</code> and <code class="STRUCTFIELD">waiting</code> is true, it means that a query is being executed, but is being blocked by a lock somewhere in the system.</p> </blockquote>  <div class="TABLE" id="PG-STAT-ARCHIVER-VIEW">  <p class="c2">Table 27-3. <code class="STRUCTNAME">pg_stat_archiver</code> View</p> <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="STRUCTFIELD">archived_count</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of WAL files that have been successfully archived</td> </tr> <tr> <td><code class="STRUCTFIELD">last_archived_wal</code></td> <td><code class="TYPE">text</code></td> <td>Name of the last WAL file successfully archived</td> </tr> <tr> <td><code class="STRUCTFIELD">last_archived_time</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Time of the last successful archive operation</td> </tr> <tr> <td><code class="STRUCTFIELD">failed_count</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of failed attempts for archiving WAL files</td> </tr> <tr> <td><code class="STRUCTFIELD">last_failed_wal</code></td> <td><code class="TYPE">text</code></td> <td>Name of the WAL file of the last failed archival operation</td> </tr> <tr> <td><code class="STRUCTFIELD">last_failed_time</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Time of the last failed archival operation</td> </tr> <tr> <td><code class="STRUCTFIELD">stats_reset</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Time at which these statistics were last reset</td> </tr> </tbody> </table> </div> <p>The <code class="STRUCTNAME">pg_stat_archiver</code> view will always have a single row, containing data about the archiver process of the cluster.</p> <div class="TABLE" id="PG-STAT-BGWRITER-VIEW">  <p class="c2">Table 27-4. <code class="STRUCTNAME">pg_stat_bgwriter</code> View</p> <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="STRUCTFIELD">checkpoints_timed</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of scheduled checkpoints that have been performed</td> </tr> <tr> <td><code class="STRUCTFIELD">checkpoints_req</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of requested checkpoints that have been performed</td> </tr> <tr> <td><code class="STRUCTFIELD">checkpoint_write_time</code></td> <td><code class="TYPE">double precision</code></td> <td>Total amount of time that has been spent in the portion of checkpoint processing where files are written to disk, in milliseconds</td> </tr> <tr> <td><code class="STRUCTFIELD">checkpoint_sync_time</code></td> <td><code class="TYPE">double precision</code></td> <td>Total amount of time that has been spent in the portion of checkpoint processing where files are synchronized to disk, in milliseconds</td> </tr> <tr> <td><code class="STRUCTFIELD">buffers_checkpoint</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of buffers written during checkpoints</td> </tr> <tr> <td><code class="STRUCTFIELD">buffers_clean</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of buffers written by the background writer</td> </tr> <tr> <td><code class="STRUCTFIELD">maxwritten_clean</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of times the background writer stopped a cleaning scan because it had written too many buffers</td> </tr> <tr> <td><code class="STRUCTFIELD">buffers_backend</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of buffers written directly by a backend</td> </tr> <tr> <td><code class="STRUCTFIELD">buffers_backend_fsync</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of times a backend had to execute its own <code class="FUNCTION">fsync</code> call (normally the background writer handles those even when the backend does its own write)</td> </tr> <tr> <td><code class="STRUCTFIELD">buffers_alloc</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of buffers allocated</td> </tr> <tr> <td><code class="STRUCTFIELD">stats_reset</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Time at which these statistics were last reset</td> </tr> </tbody> </table> </div> <p>The <code class="STRUCTNAME">pg_stat_bgwriter</code> view will always have a single row, containing global data for the cluster.</p> <div class="TABLE" id="PG-STAT-DATABASE-VIEW">  <p class="c2">Table 27-5. <code class="STRUCTNAME">pg_stat_database</code> View</p> <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="STRUCTFIELD">datid</code></td> <td><code class="TYPE">oid</code></td> <td>OID of a database</td> </tr> <tr> <td><code class="STRUCTFIELD">datname</code></td> <td><code class="TYPE">name</code></td> <td>Name of this database</td> </tr> <tr> <td><code class="STRUCTFIELD">numbackends</code></td> <td><code class="TYPE">integer</code></td> <td>Number of backends currently connected to this database. This is the only column in this view that returns a value reflecting current state; all other columns return the accumulated values since the last reset.</td> </tr> <tr> <td><code class="STRUCTFIELD">xact_commit</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of transactions in this database that have been committed</td> </tr> <tr> <td><code class="STRUCTFIELD">xact_rollback</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of transactions in this database that have been rolled back</td> </tr> <tr> <td><code class="STRUCTFIELD">blks_read</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of disk blocks read in this database</td> </tr> <tr> <td><code class="STRUCTFIELD">blks_hit</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of times disk blocks were found already in the buffer cache, so that a read was not necessary (this only includes hits in the PostgreSQL buffer cache, not the operating system's file system cache)</td> </tr> <tr> <td><code class="STRUCTFIELD">tup_returned</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of rows returned by queries in this database</td> </tr> <tr> <td><code class="STRUCTFIELD">tup_fetched</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of rows fetched by queries in this database</td> </tr> <tr> <td><code class="STRUCTFIELD">tup_inserted</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of rows inserted by queries in this database</td> </tr> <tr> <td><code class="STRUCTFIELD">tup_updated</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of rows updated by queries in this database</td> </tr> <tr> <td><code class="STRUCTFIELD">tup_deleted</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of rows deleted by queries in this database</td> </tr> <tr> <td><code class="STRUCTFIELD">conflicts</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of queries canceled due to conflicts with recovery in this database. (Conflicts occur only on standby servers; see <a href="../monitoring-stats/#PG-STAT-DATABASE-CONFLICTS-VIEW"> pg_stat_database_conflicts</a> for details.)</td> </tr> <tr> <td><code class="STRUCTFIELD">temp_files</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of temporary files created by queries in this database. All temporary files are counted, regardless of why the temporary file was created (e.g., sorting or hashing), and regardless of the <a href="../runtime-config-logging/#GUC-LOG-TEMP-FILES">log_temp_files</a> setting.</td> </tr> <tr> <td><code class="STRUCTFIELD">temp_bytes</code></td> <td><code class="TYPE">bigint</code></td> <td>Total amount of data written to temporary files by queries in this database. All temporary files are counted, regardless of why the temporary file was created, and regardless of the <a href="../runtime-config-logging/#GUC-LOG-TEMP-FILES">log_temp_files</a> setting.</td> </tr> <tr> <td><code class="STRUCTFIELD">deadlocks</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of deadlocks detected in this database</td> </tr> <tr> <td><code class="STRUCTFIELD">blk_read_time</code></td> <td><code class="TYPE">double precision</code></td> <td>Time spent reading data file blocks by backends in this database, in milliseconds</td> </tr> <tr> <td><code class="STRUCTFIELD">blk_write_time</code></td> <td><code class="TYPE">double precision</code></td> <td>Time spent writing data file blocks by backends in this database, in milliseconds</td> </tr> <tr> <td><code class="STRUCTFIELD">stats_reset</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Time at which these statistics were last reset</td> </tr> </tbody> </table> </div> <p>The <code class="STRUCTNAME">pg_stat_database</code> view will contain one row for each database in the cluster, showing database-wide statistics.</p> <div class="TABLE" id="PG-STAT-ALL-TABLES-VIEW">  <p class="c2">Table 27-6. <code class="STRUCTNAME">pg_stat_all_tables</code> View</p> <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="STRUCTFIELD">relid</code></td> <td><code class="TYPE">oid</code></td> <td>OID of a table</td> </tr> <tr> <td><code class="STRUCTFIELD">schemaname</code></td> <td><code class="TYPE">name</code></td> <td>Name of the schema that this table is in</td> </tr> <tr> <td><code class="STRUCTFIELD">relname</code></td> <td><code class="TYPE">name</code></td> <td>Name of this table</td> </tr> <tr> <td><code class="STRUCTFIELD">seq_scan</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of sequential scans initiated on this table</td> </tr> <tr> <td><code class="STRUCTFIELD">seq_tup_read</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of live rows fetched by sequential scans</td> </tr> <tr> <td><code class="STRUCTFIELD">idx_scan</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of index scans initiated on this table</td> </tr> <tr> <td><code class="STRUCTFIELD">idx_tup_fetch</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of live rows fetched by index scans</td> </tr> <tr> <td><code class="STRUCTFIELD">n_tup_ins</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of rows inserted</td> </tr> <tr> <td><code class="STRUCTFIELD">n_tup_upd</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of rows updated</td> </tr> <tr> <td><code class="STRUCTFIELD">n_tup_del</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of rows deleted</td> </tr> <tr> <td><code class="STRUCTFIELD">n_tup_hot_upd</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of rows HOT updated (i.e., with no separate index update required)</td> </tr> <tr> <td><code class="STRUCTFIELD">n_live_tup</code></td> <td><code class="TYPE">bigint</code></td> <td>Estimated number of live rows</td> </tr> <tr> <td><code class="STRUCTFIELD">n_dead_tup</code></td> <td><code class="TYPE">bigint</code></td> <td>Estimated number of dead rows</td> </tr> <tr> <td><code class="STRUCTFIELD">n_mod_since_analyze</code></td> <td><code class="TYPE">bigint</code></td> <td>Estimated number of rows modified since this table was last analyzed</td> </tr> <tr> <td><code class="STRUCTFIELD">last_vacuum</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Last time at which this table was manually vacuumed (not counting <code class="COMMAND">VACUUM FULL</code>)</td> </tr> <tr> <td><code class="STRUCTFIELD">last_autovacuum</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Last time at which this table was vacuumed by the autovacuum daemon</td> </tr> <tr> <td><code class="STRUCTFIELD">last_analyze</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Last time at which this table was manually analyzed</td> </tr> <tr> <td><code class="STRUCTFIELD">last_autoanalyze</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Last time at which this table was analyzed by the autovacuum daemon</td> </tr> <tr> <td><code class="STRUCTFIELD">vacuum_count</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of times this table has been manually vacuumed (not counting <code class="COMMAND">VACUUM FULL</code>)</td> </tr> <tr> <td><code class="STRUCTFIELD">autovacuum_count</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of times this table has been vacuumed by the autovacuum daemon</td> </tr> <tr> <td><code class="STRUCTFIELD">analyze_count</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of times this table has been manually analyzed</td> </tr> <tr> <td><code class="STRUCTFIELD">autoanalyze_count</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of times this table has been analyzed by the autovacuum daemon</td> </tr> </tbody> </table> </div> <p>The <code class="STRUCTNAME">pg_stat_all_tables</code> view will contain one row for each table in the current database (including TOAST tables), showing statistics about accesses to that specific table. The <code class="STRUCTNAME">pg_stat_user_tables</code> and <code class="STRUCTNAME">pg_stat_sys_tables</code> views contain the same information, but filtered to only show user and system tables respectively.</p> <div class="TABLE" id="PG-STAT-ALL-INDEXES-VIEW">  <p class="c2">Table 27-7. <code class="STRUCTNAME">pg_stat_all_indexes</code> View</p> <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="STRUCTFIELD">relid</code></td> <td><code class="TYPE">oid</code></td> <td>OID of the table for this index</td> </tr> <tr> <td><code class="STRUCTFIELD">indexrelid</code></td> <td><code class="TYPE">oid</code></td> <td>OID of this index</td> </tr> <tr> <td><code class="STRUCTFIELD">schemaname</code></td> <td><code class="TYPE">name</code></td> <td>Name of the schema this index is in</td> </tr> <tr> <td><code class="STRUCTFIELD">relname</code></td> <td><code class="TYPE">name</code></td> <td>Name of the table for this index</td> </tr> <tr> <td><code class="STRUCTFIELD">indexrelname</code></td> <td><code class="TYPE">name</code></td> <td>Name of this index</td> </tr> <tr> <td><code class="STRUCTFIELD">idx_scan</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of index scans initiated on this index</td> </tr> <tr> <td><code class="STRUCTFIELD">idx_tup_read</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of index entries returned by scans on this index</td> </tr> <tr> <td><code class="STRUCTFIELD">idx_tup_fetch</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of live table rows fetched by simple index scans using this index</td> </tr> </tbody> </table> </div> <p>The <code class="STRUCTNAME">pg_stat_all_indexes</code> view will contain one row for each index in the current database, showing statistics about accesses to that specific index. The <code class="STRUCTNAME">pg_stat_user_indexes</code> and <code class="STRUCTNAME">pg_stat_sys_indexes</code> views contain the same information, but filtered to only show user and system indexes respectively.</p> <p>Indexes can be used via either simple index scans or <span class="QUOTE">"bitmap"</span> index scans. In a bitmap scan the output of several indexes can be combined via AND or OR rules, so it is difficult to associate individual heap row fetches with specific indexes when a bitmap scan is used. Therefore, a bitmap scan increments the <code class="STRUCTNAME">pg_stat_all_indexes</code>.<code class="STRUCTFIELD">idx_tup_read</code> count(s) for the index(es) it uses, and it increments the <code class="STRUCTNAME">pg_stat_all_tables</code>.<code class="STRUCTFIELD">idx_tup_fetch</code> count for the table, but it does not affect <code class="STRUCTNAME">pg_stat_all_indexes</code>.<code class="STRUCTFIELD">idx_tup_fetch</code>.</p>  <blockquote class="NOTE"> <p><b>Note:</b> The <code class="STRUCTFIELD">idx_tup_read</code> and <code class="STRUCTFIELD">idx_tup_fetch</code> counts can be different even without any use of bitmap scans, because <code class="STRUCTFIELD">idx_tup_read</code> counts index entries retrieved from the index while <code class="STRUCTFIELD">idx_tup_fetch</code> counts live rows fetched from the table. The latter will be less if any dead or not-yet-committed rows are fetched using the index, or if any heap fetches are avoided by means of an index-only scan.</p> </blockquote>  <div class="TABLE" id="PG-STATIO-ALL-TABLES-VIEW">  <p class="c2">Table 27-8. <code class="STRUCTNAME">pg_statio_all_tables</code> View</p> <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="STRUCTFIELD">relid</code></td> <td><code class="TYPE">oid</code></td> <td>OID of a table</td> </tr> <tr> <td><code class="STRUCTFIELD">schemaname</code></td> <td><code class="TYPE">name</code></td> <td>Name of the schema that this table is in</td> </tr> <tr> <td><code class="STRUCTFIELD">relname</code></td> <td><code class="TYPE">name</code></td> <td>Name of this table</td> </tr> <tr> <td><code class="STRUCTFIELD">heap_blks_read</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of disk blocks read from this table</td> </tr> <tr> <td><code class="STRUCTFIELD">heap_blks_hit</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of buffer hits in this table</td> </tr> <tr> <td><code class="STRUCTFIELD">idx_blks_read</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of disk blocks read from all indexes on this table</td> </tr> <tr> <td><code class="STRUCTFIELD">idx_blks_hit</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of buffer hits in all indexes on this table</td> </tr> <tr> <td><code class="STRUCTFIELD">toast_blks_read</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of disk blocks read from this table's TOAST table (if any)</td> </tr> <tr> <td><code class="STRUCTFIELD">toast_blks_hit</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of buffer hits in this table's TOAST table (if any)</td> </tr> <tr> <td><code class="STRUCTFIELD">tidx_blks_read</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of disk blocks read from this table's TOAST table indexes (if any)</td> </tr> <tr> <td><code class="STRUCTFIELD">tidx_blks_hit</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of buffer hits in this table's TOAST table indexes (if any)</td> </tr> </tbody> </table> </div> <p>The <code class="STRUCTNAME">pg_statio_all_tables</code> view will contain one row for each table in the current database (including TOAST tables), showing statistics about I/O on that specific table. The <code class="STRUCTNAME">pg_statio_user_tables</code> and <code class="STRUCTNAME">pg_statio_sys_tables</code> views contain the same information, but filtered to only show user and system tables respectively.</p> <div class="TABLE" id="PG-STATIO-ALL-INDEXES-VIEW">  <p class="c2">Table 27-9. <code class="STRUCTNAME">pg_statio_all_indexes</code> View</p> <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="STRUCTFIELD">relid</code></td> <td><code class="TYPE">oid</code></td> <td>OID of the table for this index</td> </tr> <tr> <td><code class="STRUCTFIELD">indexrelid</code></td> <td><code class="TYPE">oid</code></td> <td>OID of this index</td> </tr> <tr> <td><code class="STRUCTFIELD">schemaname</code></td> <td><code class="TYPE">name</code></td> <td>Name of the schema this index is in</td> </tr> <tr> <td><code class="STRUCTFIELD">relname</code></td> <td><code class="TYPE">name</code></td> <td>Name of the table for this index</td> </tr> <tr> <td><code class="STRUCTFIELD">indexrelname</code></td> <td><code class="TYPE">name</code></td> <td>Name of this index</td> </tr> <tr> <td><code class="STRUCTFIELD">idx_blks_read</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of disk blocks read from this index</td> </tr> <tr> <td><code class="STRUCTFIELD">idx_blks_hit</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of buffer hits in this index</td> </tr> </tbody> </table> </div> <p>The <code class="STRUCTNAME">pg_statio_all_indexes</code> view will contain one row for each index in the current database, showing statistics about I/O on that specific index. The <code class="STRUCTNAME">pg_statio_user_indexes</code> and <code class="STRUCTNAME">pg_statio_sys_indexes</code> views contain the same information, but filtered to only show user and system indexes respectively.</p> <div class="TABLE" id="PG-STATIO-ALL-SEQUENCES-VIEW">  <p class="c2">Table 27-10. <code class="STRUCTNAME">pg_statio_all_sequences</code> View</p> <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="STRUCTFIELD">relid</code></td> <td><code class="TYPE">oid</code></td> <td>OID of a sequence</td> </tr> <tr> <td><code class="STRUCTFIELD">schemaname</code></td> <td><code class="TYPE">name</code></td> <td>Name of the schema this sequence is in</td> </tr> <tr> <td><code class="STRUCTFIELD">relname</code></td> <td><code class="TYPE">name</code></td> <td>Name of this sequence</td> </tr> <tr> <td><code class="STRUCTFIELD">blks_read</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of disk blocks read from this sequence</td> </tr> <tr> <td><code class="STRUCTFIELD">blks_hit</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of buffer hits in this sequence</td> </tr> </tbody> </table> </div> <p>The <code class="STRUCTNAME">pg_statio_all_sequences</code> view will contain one row for each sequence in the current database, showing statistics about I/O on that specific sequence.</p> <div class="TABLE" id="PG-STAT-USER-FUNCTIONS-VIEW">  <p class="c2">Table 27-11. <code class="STRUCTNAME">pg_stat_user_functions</code> View</p> <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="STRUCTFIELD">funcid</code></td> <td><code class="TYPE">oid</code></td> <td>OID of a function</td> </tr> <tr> <td><code class="STRUCTFIELD">schemaname</code></td> <td><code class="TYPE">name</code></td> <td>Name of the schema this function is in</td> </tr> <tr> <td><code class="STRUCTFIELD">funcname</code></td> <td><code class="TYPE">name</code></td> <td>Name of this function</td> </tr> <tr> <td><code class="STRUCTFIELD">calls</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of times this function has been called</td> </tr> <tr> <td><code class="STRUCTFIELD">total_time</code></td> <td><code class="TYPE">double precision</code></td> <td>Total time spent in this function and all other functions called by it, in milliseconds</td> </tr> <tr> <td><code class="STRUCTFIELD">self_time</code></td> <td><code class="TYPE">double precision</code></td> <td>Total time spent in this function itself, not including other functions called by it, in milliseconds</td> </tr> </tbody> </table> </div> <p>The <code class="STRUCTNAME">pg_stat_user_functions</code> view will contain one row for each tracked function, showing statistics about executions of that function. The <a href="../runtime-config-statistics/#GUC-TRACK-FUNCTIONS">track_functions</a> parameter controls exactly which functions are tracked.</p> <div class="TABLE" id="PG-STAT-REPLICATION-VIEW">  <p class="c2">Table 27-12. <code class="STRUCTNAME">pg_stat_replication</code> View</p> <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="STRUCTFIELD">pid</code></td> <td><code class="TYPE">integer</code></td> <td>Process ID of a WAL sender process</td> </tr> <tr> <td><code class="STRUCTFIELD">usesysid</code></td> <td><code class="TYPE">oid</code></td> <td>OID of the user logged into this WAL sender process</td> </tr> <tr> <td><code class="STRUCTFIELD">usename</code></td> <td><code class="TYPE">name</code></td> <td>Name of the user logged into this WAL sender process</td> </tr> <tr> <td><code class="STRUCTFIELD">application_name</code></td> <td><code class="TYPE">text</code></td> <td>Name of the application that is connected to this WAL sender</td> </tr> <tr> <td><code class="STRUCTFIELD">client_addr</code></td> <td><code class="TYPE">inet</code></td> <td>IP address of the client connected to this WAL sender. If this field is null, it indicates that the client is connected via a Unix socket on the server machine.</td> </tr> <tr> <td><code class="STRUCTFIELD">client_hostname</code></td> <td><code class="TYPE">text</code></td> <td>Host name of the connected client, as reported by a reverse DNS lookup of <code class="STRUCTFIELD">client_addr</code>. This field will only be non-null for IP connections, and only when <a href="../runtime-config-logging/#GUC-LOG-HOSTNAME">log_hostname</a> is enabled.</td> </tr> <tr> <td><code class="STRUCTFIELD">client_port</code></td> <td><code class="TYPE">integer</code></td> <td>TCP port number that the client is using for communication with this WAL sender, or <code class="LITERAL">-1</code> if a Unix socket is used</td> </tr> <tr> <td><code class="STRUCTFIELD">backend_start</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Time when this process was started, i.e., when the client connected to this WAL sender</td> </tr> <tr> <td><code class="STRUCTFIELD">backend_xmin</code></td> <td><code class="TYPE">xid</code></td> <td>This standby's <code class="LITERAL">xmin</code> horizon reported by <a href="../runtime-config-replication/#GUC-HOT-STANDBY-FEEDBACK"> hot_standby_feedback</a>.</td> </tr> <tr> <td><code class="STRUCTFIELD">state</code></td> <td><code class="TYPE">text</code></td> <td>Current WAL sender state</td> </tr> <tr> <td><code class="STRUCTFIELD">sent_location</code></td> <td><code class="TYPE">pg_lsn</code></td> <td>Last transaction log position sent on this connection</td> </tr> <tr> <td><code class="STRUCTFIELD">write_location</code></td> <td><code class="TYPE">pg_lsn</code></td> <td>Last transaction log position written to disk by this standby server</td> </tr> <tr> <td><code class="STRUCTFIELD">flush_location</code></td> <td><code class="TYPE">pg_lsn</code></td> <td>Last transaction log position flushed to disk by this standby server</td> </tr> <tr> <td><code class="STRUCTFIELD">replay_location</code></td> <td><code class="TYPE">pg_lsn</code></td> <td>Last transaction log position replayed into the database on this standby server</td> </tr> <tr> <td><code class="STRUCTFIELD">sync_priority</code></td> <td><code class="TYPE">integer</code></td> <td>Priority of this standby server for being chosen as the synchronous standby</td> </tr> <tr> <td><code class="STRUCTFIELD">sync_state</code></td> <td><code class="TYPE">text</code></td> <td>Synchronous state of this standby server</td> </tr> </tbody> </table> </div> <p>The <code class="STRUCTNAME">pg_stat_replication</code> view will contain one row per WAL sender process, showing statistics about replication to that sender's connected standby server. Only directly connected standbys are listed; no information is available about downstream standby servers.</p> <div class="TABLE" id="PG-STAT-DATABASE-CONFLICTS-VIEW">  <p class="c2">Table 27-13. <code class="STRUCTNAME">pg_stat_database_conflicts</code> View</p> <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="STRUCTFIELD">datid</code></td> <td><code class="TYPE">oid</code></td> <td>OID of a database</td> </tr> <tr> <td><code class="STRUCTFIELD">datname</code></td> <td><code class="TYPE">name</code></td> <td>Name of this database</td> </tr> <tr> <td><code class="STRUCTFIELD">confl_tablespace</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of queries in this database that have been canceled due to dropped tablespaces</td> </tr> <tr> <td><code class="STRUCTFIELD">confl_lock</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of queries in this database that have been canceled due to lock timeouts</td> </tr> <tr> <td><code class="STRUCTFIELD">confl_snapshot</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of queries in this database that have been canceled due to old snapshots</td> </tr> <tr> <td><code class="STRUCTFIELD">confl_bufferpin</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of queries in this database that have been canceled due to pinned buffers</td> </tr> <tr> <td><code class="STRUCTFIELD">confl_deadlock</code></td> <td><code class="TYPE">bigint</code></td> <td>Number of queries in this database that have been canceled due to deadlocks</td> </tr> </tbody> </table> </div> <p>The <code class="STRUCTNAME">pg_stat_database_conflicts</code> view will contain one row per database, showing database-wide statistics about query cancels occurring due to conflicts with recovery on standby servers. This view will only contain information on standby servers, since conflicts do not occur on master servers.</p> </div> <div class="SECT2"> <h2 class="SECT2" id="MONITORING-STATS-FUNCTIONS">27.2.3. Statistics Functions</h2> <p>Other ways of looking at the statistics can be set up by writing queries that use the same underlying statistics access functions used by the standard views shown above. For details such as the functions' names, consult the definitions of the standard views. (For example, in <span class="APPLICATION">psql</span> you could issue <code class="LITERAL">\d+ pg_stat_activity</code>.) The access functions for per-database statistics take a database OID as an argument to identify which database to report on. The per-table and per-index functions take a table or index OID. The functions for per-function statistics take a function OID. Note that only tables, indexes, and functions in the current database can be seen with these functions.</p> <p>Additional functions related to statistics collection are listed in <a href="../monitoring-stats/#MONITORING-STATS-FUNCS-TABLE">Table 27-14</a>.</p> <div class="TABLE" id="MONITORING-STATS-FUNCS-TABLE">  <p class="c2">Table 27-14. Additional Statistics Functions</p> <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Function</th> <th>Return Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="LITERAL">pg_backend_pid()</code></td> <td><code class="TYPE">integer</code></td> <td>Process ID of the server process handling the current session</td> </tr> <tr> <td><code class="LITERAL">pg_stat_get_activity(<code class="TYPE">integer</code>)</code></td> <td><code class="TYPE">setof record</code></td> <td>Returns a record of information about the backend with the specified PID, or one record for each active backend in the system if <code class="SYMBOL">NULL</code> is specified. The fields returned are a subset of those in the <code class="STRUCTNAME">pg_stat_activity</code> view.</td> </tr> <tr> <td><code class="LITERAL">pg_stat_clear_snapshot()</code></td> <td><code class="TYPE">void</code></td> <td>Discard the current statistics snapshot</td> </tr> <tr> <td><code class="LITERAL">pg_stat_reset()</code></td> <td><code class="TYPE">void</code></td> <td>Reset all statistics counters for the current database to zero (requires superuser privileges)</td> </tr> <tr> <td><code class="LITERAL">pg_stat_reset_shared(text)</code></td> <td><code class="TYPE">void</code></td> <td>Reset some cluster-wide statistics counters to zero, depending on the argument (requires superuser privileges). Calling <code class="LITERAL">pg_stat_reset_shared('bgwriter')</code> will zero all the counters shown in the <code class="STRUCTNAME">pg_stat_bgwriter</code> view. Calling <code class="LITERAL">pg_stat_reset_shared('archiver')</code> will zero all the counters shown in the <code class="STRUCTNAME">pg_stat_archiver</code> view.</td> </tr> <tr> <td><code class="LITERAL">pg_stat_reset_single_table_counters(oid)</code></td> <td><code class="TYPE">void</code></td> <td>Reset statistics for a single table or index in the current database to zero (requires superuser privileges)</td> </tr> <tr> <td><code class="LITERAL">pg_stat_reset_single_function_counters(oid)</code></td> <td><code class="TYPE">void</code></td> <td>Reset statistics for a single function in the current database to zero (requires superuser privileges)</td> </tr> </tbody> </table> </div> <p><code class="FUNCTION">pg_stat_get_activity</code>, the underlying function of the <code class="STRUCTNAME">pg_stat_activity</code> view, returns a set of records containing all the available information about each backend process. Sometimes it may be more convenient to obtain just a subset of this information. In such cases, an older set of per-backend statistics access functions can be used; these are shown in <a href="../monitoring-stats/#MONITORING-STATS-BACKEND-FUNCS-TABLE">Table 27-15</a>. These access functions use a backend ID number, which ranges from one to the number of currently active backends. The function <code class="FUNCTION">pg_stat_get_backend_idset</code> provides a convenient way to generate one row for each active backend for invoking these functions. For example, to show the <acronym class="ACRONYM">PID</acronym>s and current queries of all backends:</p> <pre class="PROGRAMLISTING" data-language="sql">
SELECT pg_stat_get_backend_pid(s.backendid) AS pid,
       pg_stat_get_backend_activity(s.backendid) AS query
    FROM (SELECT pg_stat_get_backend_idset() AS backendid) AS s;
</pre> <div class="TABLE" id="MONITORING-STATS-BACKEND-FUNCS-TABLE">  <p class="c2">Table 27-15. Per-Backend Statistics Functions</p> <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Function</th> <th>Return Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="LITERAL">pg_stat_get_backend_idset()</code></td> <td><code class="TYPE">setof integer</code></td> <td>Set of currently active backend ID numbers (from 1 to the number of active backends)</td> </tr> <tr> <td><code class="LITERAL">pg_stat_get_backend_activity(integer)</code></td> <td><code class="TYPE">text</code></td> <td>Text of this backend's most recent query</td> </tr> <tr> <td><code class="LITERAL">pg_stat_get_backend_activity_start(integer)</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Time when the most recent query was started</td> </tr> <tr> <td><code class="LITERAL">pg_stat_get_backend_client_addr(integer)</code></td> <td><code class="TYPE">inet</code></td> <td>IP address of the client connected to this backend</td> </tr> <tr> <td><code class="LITERAL">pg_stat_get_backend_client_port(integer)</code></td> <td><code class="TYPE">integer</code></td> <td>TCP port number that the client is using for communication</td> </tr> <tr> <td><code class="LITERAL">pg_stat_get_backend_dbid(integer)</code></td> <td><code class="TYPE">oid</code></td> <td>OID of the database this backend is connected to</td> </tr> <tr> <td><code class="LITERAL">pg_stat_get_backend_pid(integer)</code></td> <td><code class="TYPE">integer</code></td> <td>Process ID of this backend</td> </tr> <tr> <td><code class="LITERAL">pg_stat_get_backend_start(integer)</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Time when this process was started</td> </tr> <tr> <td><code class="LITERAL">pg_stat_get_backend_userid(integer)</code></td> <td><code class="TYPE">oid</code></td> <td>OID of the user logged into this backend</td> </tr> <tr> <td><code class="LITERAL">pg_stat_get_backend_waiting(integer)</code></td> <td><code class="TYPE">boolean</code></td> <td>True if this backend is currently waiting on a lock</td> </tr> <tr> <td><code class="LITERAL">pg_stat_get_backend_xact_start(integer)</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Time when the current transaction was started</td> </tr> </tbody> </table> </div> </div>  <div class="NAVFOOTER">  <table summary="Footer navigation table"> <tr> <td width="33%" align="left"><a href="../monitoring-ps/" accesskey="P">Prev</a></td> <td width="34%" align="center"></td> <td width="33%" align="right"><a href="../monitoring-locks/" accesskey="N">Next</a></td> </tr> <tr> <td width="33%" align="left">Standard Unix Tools</td> <td width="34%" align="center"><a href="https://www.postgresql.org/docs/9.4/static/monitoring.html" accesskey="U" target="_blank">Up</a></td> <td width="33%" align="right">Viewing Locks</td> </tr> </table> </div>
<div class="_attribution">
  <p class="_attribution-p">
     19962017 The PostgreSQL Global Development Group<br>Licensed under the PostgreSQL License.<br>
    <a href="https://www.postgresql.org/docs/9.4/static/monitoring-stats.html" class="_attribution-link" target="_blank">https://www.postgresql.org/docs/9.4/static/monitoring-stats.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
