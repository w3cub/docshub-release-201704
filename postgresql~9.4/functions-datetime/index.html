
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Date&#47;Time Functions and Operators - PostgreSQL 9.4 - W3cubDocs</title>
  
  <meta name="description" content="Table 9-28 shows the available functions for date&#47;time value processing, with details appearing in the following subsections. Table 9-27 &hellip;">
  <meta name="keywords" content="date, time, functions, and, operators, -, postgresql, postgresql~9.4">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/postgresql~9.4/functions-datetime/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/postgresql~9.4.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/postgresql~9.4/" class="_nav-link" title="" style="margin-left:0;">PostgreSQL 9.4</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _postgres">
				
<h1 class="SECT1" id="FUNCTIONS-DATETIME">9.9. Date/Time Functions and Operators</h1> <p><a href="../functions-datetime/#FUNCTIONS-DATETIME-TABLE">Table 9-28</a> shows the available functions for date/time value processing, with details appearing in the following subsections. <a href="../functions-datetime/#OPERATORS-DATETIME-TABLE">Table 9-27</a> illustrates the behaviors of the basic arithmetic operators (<code class="LITERAL">+</code>, <code class="LITERAL">*</code>, etc.). For formatting functions, refer to <a href="../functions-formatting/">Section 9.8</a>. You should be familiar with the background information on date/time data types from <a href="../datatype-datetime/">Section 8.5</a>.</p> <p>All the functions and operators described below that take <code class="TYPE">time</code> or <code class="TYPE">timestamp</code> inputs actually come in two variants: one that takes <code class="TYPE">time with time zone</code> or <code class="TYPE">timestamp with time zone</code>, and one that takes <code class="TYPE">time without time zone</code> or <code class="TYPE">timestamp without time zone</code>. For brevity, these variants are not shown separately. Also, the <code class="LITERAL">+</code> and <code class="LITERAL">*</code> operators come in commutative pairs (for example both date + integer and integer + date); we show only one of each such pair.</p> <div class="TABLE" id="OPERATORS-DATETIME-TABLE">  <p class="c2">Table 9-27. Date/Time Operators</p> <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Operator</th> <th>Example</th> <th>Result</th> </tr> </thead> <tbody> <tr> <td><code class="LITERAL" id="43">+</code></td> <td><code class="LITERAL">date '2001-09-28' + integer '7'</code></td> <td><code class="LITERAL">date '2001-10-05'</code></td> </tr> <tr> <td><code class="LITERAL">+</code></td> <td><code class="LITERAL">date '2001-09-28' + interval '1 hour'</code></td> <td><code class="LITERAL">timestamp '2001-09-28 01:00:00'</code></td> </tr> <tr> <td><code class="LITERAL">+</code></td> <td><code class="LITERAL">date '2001-09-28' + time '03:00'</code></td> <td><code class="LITERAL">timestamp '2001-09-28 03:00:00'</code></td> </tr> <tr> <td><code class="LITERAL">+</code></td> <td><code class="LITERAL">interval '1 day' + interval '1 hour'</code></td> <td><code class="LITERAL">interval '1 day 01:00:00'</code></td> </tr> <tr> <td><code class="LITERAL">+</code></td> <td><code class="LITERAL">timestamp '2001-09-28 01:00' + interval '23 hours'</code></td> <td><code class="LITERAL">timestamp '2001-09-29 00:00:00'</code></td> </tr> <tr> <td><code class="LITERAL">+</code></td> <td><code class="LITERAL">time '01:00' + interval '3 hours'</code></td> <td><code class="LITERAL">time '04:00:00'</code></td> </tr> <tr> <td><code class="LITERAL" id="">-</code></td> <td><code class="LITERAL">- interval '23 hours'</code></td> <td><code class="LITERAL">interval '-23:00:00'</code></td> </tr> <tr> <td><code class="LITERAL">-</code></td> <td><code class="LITERAL">date '2001-10-01' - date '2001-09-28'</code></td> <td>
<code class="LITERAL">integer '3'</code> (days)</td> </tr> <tr> <td><code class="LITERAL">-</code></td> <td><code class="LITERAL">date '2001-10-01' - integer '7'</code></td> <td><code class="LITERAL">date '2001-09-24'</code></td> </tr> <tr> <td><code class="LITERAL">-</code></td> <td><code class="LITERAL">date '2001-09-28' - interval '1 hour'</code></td> <td><code class="LITERAL">timestamp '2001-09-27 23:00:00'</code></td> </tr> <tr> <td><code class="LITERAL">-</code></td> <td><code class="LITERAL">time '05:00' - time '03:00'</code></td> <td><code class="LITERAL">interval '02:00:00'</code></td> </tr> <tr> <td><code class="LITERAL">-</code></td> <td><code class="LITERAL">time '05:00' - interval '2 hours'</code></td> <td><code class="LITERAL">time '03:00:00'</code></td> </tr> <tr> <td><code class="LITERAL">-</code></td> <td><code class="LITERAL">timestamp '2001-09-28 23:00' - interval '23 hours'</code></td> <td><code class="LITERAL">timestamp '2001-09-28 00:00:00'</code></td> </tr> <tr> <td><code class="LITERAL">-</code></td> <td><code class="LITERAL">interval '1 day' - interval '1 hour'</code></td> <td><code class="LITERAL">interval '1 day -01:00:00'</code></td> </tr> <tr> <td><code class="LITERAL">-</code></td> <td><code class="LITERAL">timestamp '2001-09-29 03:00' - timestamp '2001-09-27 12:00'</code></td> <td><code class="LITERAL">interval '1 day 15:00:00'</code></td> </tr> <tr> <td><code class="LITERAL" id="42">*</code></td> <td><code class="LITERAL">900 * interval '1 second'</code></td> <td><code class="LITERAL">interval '00:15:00'</code></td> </tr> <tr> <td><code class="LITERAL">*</code></td> <td><code class="LITERAL">21 * interval '1 day'</code></td> <td><code class="LITERAL">interval '21 days'</code></td> </tr> <tr> <td><code class="LITERAL">*</code></td> <td><code class="LITERAL">double precision '3.5' * interval '1 hour'</code></td> <td><code class="LITERAL">interval '03:30:00'</code></td> </tr> <tr> <td><code class="LITERAL" id="47">/</code></td> <td><code class="LITERAL">interval '1 hour' / double precision '1.5'</code></td> <td><code class="LITERAL">interval '00:40:00'</code></td> </tr> </tbody> </table> </div> <div class="TABLE" id="FUNCTIONS-DATETIME-TABLE">  <p class="c2">Table 9-28. Date/Time Functions</p> <table class="CALSTABLE"> <col> <col> <col> <col> <col> <thead> <tr> <th>Function</th> <th>Return Type</th> <th>Description</th> <th>Example</th> <th>Result</th> </tr> </thead> <tbody> <tr> <td><code class="LITERAL" id="age">age(<code class="TYPE">timestamp</code>,
          <code class="TYPE">timestamp</code>)</code></td> <td><code class="TYPE">interval</code></td> <td>Subtract arguments, producing a <span class="QUOTE">"symbolic"</span> result that uses years and months, rather than just days</td> <td><code class="LITERAL">age(timestamp '2001-04-10', timestamp '1957-06-13')</code></td> <td><code class="LITERAL">43 years 9 mons 27 days</code></td> </tr> <tr> <td><code class="LITERAL">age(<code class="TYPE">timestamp</code>)</code></td> <td><code class="TYPE">interval</code></td> <td>Subtract from <code class="FUNCTION">current_date</code> (at midnight)</td> <td><code class="LITERAL">age(timestamp '1957-06-13')</code></td> <td><code class="LITERAL">43 years 8 mons 3 days</code></td> </tr> <tr> <td><code class="LITERAL" id="clock_timestamp">clock_timestamp()</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Current date and time (changes during statement execution); see <a href="../functions-datetime/#FUNCTIONS-DATETIME-CURRENT">Section 9.9.4</a>
</td> <td> </td> <td> </td> </tr> <tr> <td><code class="LITERAL" id="current_date">current_date</code></td> <td><code class="TYPE">date</code></td> <td>Current date; see <a href="../functions-datetime/#FUNCTIONS-DATETIME-CURRENT">Section 9.9.4</a>
</td> <td> </td> <td> </td> </tr> <tr> <td><code class="LITERAL" id="current_time">current_time</code></td> <td><code class="TYPE">time with time zone</code></td> <td>Current time of day; see <a href="../functions-datetime/#FUNCTIONS-DATETIME-CURRENT">Section 9.9.4</a>
</td> <td> </td> <td> </td> </tr> <tr> <td><code class="LITERAL" id="current_timestamp">current_timestamp</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Current date and time (start of current transaction); see <a href="../functions-datetime/#FUNCTIONS-DATETIME-CURRENT">Section 9.9.4</a>
</td> <td> </td> <td> </td> </tr> <tr> <td><code class="LITERAL" id="date_part">date_part(<code class="TYPE">text</code>,
          <code class="TYPE">timestamp</code>)</code></td> <td><code class="TYPE">double precision</code></td> <td>Get subfield (equivalent to <code class="FUNCTION">extract</code>); see <a href="../functions-datetime/#FUNCTIONS-DATETIME-EXTRACT">Section 9.9.1</a>
</td> <td><code class="LITERAL">date_part('hour', timestamp '2001-02-16 20:38:40')</code></td> <td><code class="LITERAL">20</code></td> </tr> <tr> <td><code class="LITERAL">date_part(<code class="TYPE">text</code>,
          <code class="TYPE">interval</code>)</code></td> <td><code class="TYPE">double precision</code></td> <td>Get subfield (equivalent to <code class="FUNCTION">extract</code>); see <a href="../functions-datetime/#FUNCTIONS-DATETIME-EXTRACT">Section 9.9.1</a>
</td> <td><code class="LITERAL">date_part('month', interval '2 years 3 months')</code></td> <td><code class="LITERAL">3</code></td> </tr> <tr> <td><code class="LITERAL" id="date_trunc">date_trunc(<code class="TYPE">text</code>,
          <code class="TYPE">timestamp</code>)</code></td> <td><code class="TYPE">timestamp</code></td> <td>Truncate to specified precision; see also <a href="../functions-datetime/#FUNCTIONS-DATETIME-TRUNC">Section 9.9.2</a>
</td> <td><code class="LITERAL">date_trunc('hour', timestamp '2001-02-16 20:38:40')</code></td> <td><code class="LITERAL">2001-02-16 20:00:00</code></td> </tr> <tr> <td><code class="LITERAL">date_trunc(<code class="TYPE">text</code>,
          <code class="TYPE">interval</code>)</code></td> <td><code class="TYPE">interval</code></td> <td>Truncate to specified precision; see also <a href="../functions-datetime/#FUNCTIONS-DATETIME-TRUNC">Section 9.9.2</a>
</td> <td><code class="LITERAL">date_trunc('hour', interval '2 days 3 hours 40 minutes')</code></td> <td><code class="LITERAL">2 days 03:00:00</code></td> </tr> <tr> <td><code class="LITERAL" id="extract">extract(<code class="PARAMETER">field</code> from <code class="TYPE">timestamp</code>)</code></td> <td><code class="TYPE">double precision</code></td> <td>Get subfield; see <a href="../functions-datetime/#FUNCTIONS-DATETIME-EXTRACT">Section 9.9.1</a>
</td> <td><code class="LITERAL">extract(hour from timestamp '2001-02-16 20:38:40')</code></td> <td><code class="LITERAL">20</code></td> </tr> <tr> <td><code class="LITERAL">extract(<code class="PARAMETER">field</code> from <code class="TYPE">interval</code>)</code></td> <td><code class="TYPE">double precision</code></td> <td>Get subfield; see <a href="../functions-datetime/#FUNCTIONS-DATETIME-EXTRACT">Section 9.9.1</a>
</td> <td><code class="LITERAL">extract(month from interval '2 years 3 months')</code></td> <td><code class="LITERAL">3</code></td> </tr> <tr> <td><code class="LITERAL" id="isfinite">isfinite(<code class="TYPE">date</code>)</code></td> <td><code class="TYPE">boolean</code></td> <td>Test for finite date (not +/-infinity)</td> <td><code class="LITERAL">isfinite(date '2001-02-16')</code></td> <td><code class="LITERAL">true</code></td> </tr> <tr> <td><code class="LITERAL">isfinite(<code class="TYPE">timestamp</code>)</code></td> <td><code class="TYPE">boolean</code></td> <td>Test for finite time stamp (not +/-infinity)</td> <td><code class="LITERAL">isfinite(timestamp '2001-02-16 21:28:30')</code></td> <td><code class="LITERAL">true</code></td> </tr> <tr> <td><code class="LITERAL">isfinite(<code class="TYPE">interval</code>)</code></td> <td><code class="TYPE">boolean</code></td> <td>Test for finite interval</td> <td><code class="LITERAL">isfinite(interval '4 hours')</code></td> <td><code class="LITERAL">true</code></td> </tr> <tr> <td><code class="LITERAL" id="justify_days">justify_days(<code class="TYPE">interval</code>)</code></td> <td><code class="TYPE">interval</code></td> <td>Adjust interval so 30-day time periods are represented as months</td> <td><code class="LITERAL">justify_days(interval '35 days')</code></td> <td><code class="LITERAL">1 mon 5 days</code></td> </tr> <tr> <td><code class="LITERAL" id="justify_hours">justify_hours(<code class="TYPE">interval</code>)</code></td> <td><code class="TYPE">interval</code></td> <td>Adjust interval so 24-hour time periods are represented as days</td> <td><code class="LITERAL">justify_hours(interval '27 hours')</code></td> <td><code class="LITERAL">1 day 03:00:00</code></td> </tr> <tr> <td><code class="LITERAL" id="justify_interval">justify_interval(<code class="TYPE">interval</code>)</code></td> <td><code class="TYPE">interval</code></td> <td>Adjust interval using <code class="FUNCTION">justify_days</code> and <code class="FUNCTION">justify_hours</code>, with additional sign adjustments</td> <td><code class="LITERAL">justify_interval(interval '1 mon -1 hour')</code></td> <td><code class="LITERAL">29 days 23:00:00</code></td> </tr> <tr> <td><code class="LITERAL" id="localtime">localtime</code></td> <td><code class="TYPE">time</code></td> <td>Current time of day; see <a href="../functions-datetime/#FUNCTIONS-DATETIME-CURRENT">Section 9.9.4</a>
</td> <td> </td> <td> </td> </tr> <tr> <td><code class="LITERAL" id="localtimestamp">localtimestamp</code></td> <td><code class="TYPE">timestamp</code></td> <td>Current date and time (start of current transaction); see <a href="../functions-datetime/#FUNCTIONS-DATETIME-CURRENT">Section 9.9.4</a>
</td> <td> </td> <td> </td> </tr> <tr> <td><code class="LITERAL" id="make_date">make_date(<code class="PARAMETER">year</code>
          <code class="TYPE">int</code>, <code class="PARAMETER">month</code> <code class="TYPE">int</code>,
          <code class="PARAMETER">day</code> <code class="TYPE">int</code>)</code></td> <td><code class="TYPE">date</code></td> <td>Create date from year, month and day fields</td> <td><code class="LITERAL">make_date(2013, 7, 15)</code></td> <td><code class="LITERAL">2013-07-15</code></td> </tr> <tr> <td><code class="LITERAL" id="make_interval">make_interval(<code class="PARAMETER">years</code>
          <code class="TYPE">int</code> DEFAULT 0, <code class="PARAMETER">months</code> <code class="TYPE">int</code> DEFAULT
          0, <code class="PARAMETER">weeks</code> <code class="TYPE">int</code> DEFAULT 0, <code class="PARAMETER">days</code> <code class="TYPE">int</code> DEFAULT
          0, <code class="PARAMETER">hours</code> <code class="TYPE">int</code> DEFAULT 0, <code class="PARAMETER">mins</code> <code class="TYPE">int</code> DEFAULT
          0, <code class="PARAMETER">secs</code> <code class="TYPE">double precision</code> DEFAULT
          0.0)</code></td> <td><code class="TYPE">interval</code></td> <td>Create interval from years, months, weeks, days, hours, minutes and seconds fields</td> <td><code class="LITERAL">make_interval(days := 10)</code></td> <td><code class="LITERAL">10 days</code></td> </tr> <tr> <td><code class="LITERAL" id="make_time">make_time(<code class="PARAMETER">hour</code>
          <code class="TYPE">int</code>, <code class="PARAMETER">min</code>
          <code class="TYPE">int</code>, <code class="PARAMETER">sec</code>
          <code class="TYPE">double precision</code>)</code></td> <td><code class="TYPE">time</code></td> <td>Create time from hour, minute and seconds fields</td> <td><code class="LITERAL">make_time(8, 15, 23.5)</code></td> <td><code class="LITERAL">08:15:23.5</code></td> </tr> <tr> <td><code class="LITERAL" id="make_timestamp">make_timestamp(<code class="PARAMETER">year</code>
          <code class="TYPE">int</code>, <code class="PARAMETER">month</code> <code class="TYPE">int</code>,
          <code class="PARAMETER">day</code> <code class="TYPE">int</code>,
          <code class="PARAMETER">hour</code> <code class="TYPE">int</code>, <code class="PARAMETER">min</code>
          <code class="TYPE">int</code>, <code class="PARAMETER">sec</code>
          <code class="TYPE">double precision</code>)</code></td> <td><code class="TYPE">timestamp</code></td> <td>Create timestamp from year, month, day, hour, minute and seconds fields</td> <td><code class="LITERAL">make_timestamp(2013, 7, 15, 8, 15, 23.5)</code></td> <td><code class="LITERAL">2013-07-15 08:15:23.5</code></td> </tr> <tr> <td><code class="LITERAL" id="make_timestamptz">make_timestamptz(<code class="PARAMETER">year</code> <code class="TYPE">int</code>,
          <code class="PARAMETER">month</code> <code class="TYPE">int</code>, <code class="PARAMETER">day</code>
          <code class="TYPE">int</code>, <code class="PARAMETER">hour</code> <code class="TYPE">int</code>,
          <code class="PARAMETER">min</code> <code class="TYPE">int</code>,
          <code class="PARAMETER">sec</code> <code class="TYPE">double
          precision</code>, [ <span class="OPTIONAL"><code class="PARAMETER">timezone</code> <code class="TYPE">text</code></span> ])</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Create timestamp with time zone from year, month, day, hour, minute and seconds fields. When <code class="PARAMETER">timezone</code> is not specified, then current time zone is used.</td> <td><code class="LITERAL">make_timestamptz(2013, 7, 15, 8, 15, 23.5)</code></td> <td><code class="LITERAL">2013-07-15 08:15:23.5+01</code></td> </tr> <tr> <td><code class="LITERAL" id="now">now()</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Current date and time (start of current transaction); see <a href="../functions-datetime/#FUNCTIONS-DATETIME-CURRENT">Section 9.9.4</a>
</td> <td> </td> <td> </td> </tr> <tr> <td><code class="LITERAL" id="statement_timestamp">statement_timestamp()</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Current date and time (start of current statement); see <a href="../functions-datetime/#FUNCTIONS-DATETIME-CURRENT">Section 9.9.4</a>
</td> <td> </td> <td> </td> </tr> <tr> <td><code class="LITERAL" id="timeofday">timeofday()</code></td> <td><code class="TYPE">text</code></td> <td>Current date and time (like <code class="FUNCTION">clock_timestamp</code>, but as a <code class="TYPE">text</code> string); see <a href="../functions-datetime/#FUNCTIONS-DATETIME-CURRENT">Section 9.9.4</a>
</td> <td> </td> <td> </td> </tr> <tr> <td><code class="LITERAL" id="transaction_timestamp">transaction_timestamp()</code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Current date and time (start of current transaction); see <a href="../functions-datetime/#FUNCTIONS-DATETIME-CURRENT">Section 9.9.4</a>
</td> <td> </td> <td> </td> </tr> </tbody> </table> </div> <p>In addition to these functions, the SQL <code class="LITERAL">OVERLAPS</code> operator is supported:</p> <pre class="SYNOPSIS" data-language="sql">
(start1, end1) OVERLAPS (start2, end2)
(start1, length1) OVERLAPS (start2, length2)
</pre> <p>This expression yields true when two time periods (defined by their endpoints) overlap, false when they do not overlap. The endpoints can be specified as pairs of dates, times, or time stamps; or as a date, time, or time stamp followed by an interval. When a pair of values is provided, either the start or the end can be written first; <code class="LITERAL">OVERLAPS</code> automatically takes the earlier value of the pair as the start. Each time period is considered to represent the half-open interval <code class="REPLACEABLE c3">start</code> <code class="LITERAL">&lt;=</code> <code class="REPLACEABLE c3">time</code> <code class="LITERAL">&lt;</code> <code class="REPLACEABLE c3">end</code>, unless <code class="REPLACEABLE c3">start</code> and <code class="REPLACEABLE c3">end</code> are equal in which case it represents that single time instant. This means for instance that two time periods with only an endpoint in common do not overlap.</p> <pre class="SCREEN">
SELECT (DATE '2001-02-16', DATE '2001-12-21') OVERLAPS
       (DATE '2001-10-30', DATE '2002-10-30');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">true</samp>
SELECT (DATE '2001-02-16', INTERVAL '100 days') OVERLAPS
       (DATE '2001-10-30', DATE '2002-10-30');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">false</samp>
SELECT (DATE '2001-10-29', DATE '2001-10-30') OVERLAPS
       (DATE '2001-10-30', DATE '2001-10-31');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">false</samp>
SELECT (DATE '2001-10-30', DATE '2001-10-30') OVERLAPS
       (DATE '2001-10-30', DATE '2001-10-31');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">true</samp>
</pre> <p>When adding an <code class="TYPE">interval</code> value to (or subtracting an <code class="TYPE">interval</code> value from) a <code class="TYPE">timestamp with time zone</code> value, the days component advances or decrements the date of the <code class="TYPE">timestamp with time zone</code> by the indicated number of days. Across daylight saving time changes (when the session time zone is set to a time zone that recognizes DST), this means <code class="LITERAL">interval '1 day'</code> does not necessarily equal <code class="LITERAL">interval '24 hours'</code>. For example, with the session time zone set to <code class="LITERAL">CST7CDT</code>, <code class="LITERAL">timestamp with time zone '2005-04-02 12:00-07' + interval '1 day'</code> will produce <code class="LITERAL">timestamp with time zone '2005-04-03 12:00-06'</code>, while adding <code class="LITERAL">interval '24 hours'</code> to the same initial <code class="TYPE">timestamp with time zone</code> produces <code class="LITERAL">timestamp with time zone '2005-04-03 13:00-06'</code>, as there is a change in daylight saving time at <code class="LITERAL">2005-04-03 02:00</code> in time zone <code class="LITERAL">CST7CDT</code>.</p> <p>Note there can be ambiguity in the <code class="LITERAL">months</code> field returned by <code class="FUNCTION">age</code> because different months have different numbers of days. <span class="PRODUCTNAME">PostgreSQL</span>'s approach uses the month from the earlier of the two dates when calculating partial months. For example, <code class="LITERAL">age('2004-06-01', '2004-04-30')</code> uses April to yield <code class="LITERAL">1 mon 1 day</code>, while using May would yield <code class="LITERAL">1 mon 2 days</code> because May has 31 days, while April has only 30.</p> <p>Subtraction of dates and timestamps can also be complex. One conceptually simple way to perform subtraction is to convert each value to a number of seconds using <code class="LITERAL">EXTRACT(EPOCH FROM ...)</code>, then subtract the results; this produces the number of <span class="emphasis EMPHASIS c4">seconds</span> between the two values. This will adjust for the number of days in each month, timezone changes, and daylight saving time adjustments. Subtraction of date or timestamp values with the <span class="QUOTE">"<code class="LITERAL">-</code>"</span> operator returns the number of days (24-hours) and hours/minutes/seconds between the values, making the same adjustments. The <code class="FUNCTION">age</code> function returns years, months, days, and hours/minutes/seconds, performing field-by-field subtraction and then adjusting for negative field values. The following queries illustrate the differences in these approaches. The sample results were produced with <code class="LITERAL">timezone = 'US/Eastern'</code>; there is a daylight saving time change between the two dates used:</p> <pre class="SCREEN">
SELECT EXTRACT(EPOCH FROM timestamptz '2013-07-01 12:00:00') -
       EXTRACT(EPOCH FROM timestamptz '2013-03-01 12:00:00');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">10537200</samp>
SELECT (EXTRACT(EPOCH FROM timestamptz '2013-07-01 12:00:00') -
        EXTRACT(EPOCH FROM timestamptz '2013-03-01 12:00:00'))
        / 60 / 60 / 24;
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">121.958333333333</samp>
SELECT timestamptz '2013-07-01 12:00:00' - timestamptz '2013-03-01 12:00:00';
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">121 days 23:00:00</samp>
SELECT age(timestamptz '2013-07-01 12:00:00', timestamptz '2013-03-01 12:00:00');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">4 mons</samp>
</pre> <div class="SECT2"> <h2 class="SECT2" id="FUNCTIONS-DATETIME-EXTRACT">9.9.1. <code class="FUNCTION">EXTRACT</code>, <code class="FUNCTION">date_part</code>
</h2> <pre class="SYNOPSIS" data-language="sql">
EXTRACT(field FROM source)
</pre> <p>The <code class="FUNCTION">extract</code> function retrieves subfields such as year or hour from date/time values. <code class="REPLACEABLE c3">source</code> must be a value expression of type <code class="TYPE">timestamp</code>, <code class="TYPE">time</code>, or <code class="TYPE">interval</code>. (Expressions of type <code class="TYPE">date</code> are cast to <code class="TYPE">timestamp</code> and can therefore be used as well.) <code class="REPLACEABLE c3">field</code> is an identifier or string that selects what field to extract from the source value. The <code class="FUNCTION">extract</code> function returns values of type <code class="TYPE">double precision</code>. The following are valid field names:</p> <div class="VARIABLELIST"> <dl> <dt><code class="LITERAL">century</code></dt> <dd> <p>The century</p> <pre class="SCREEN">
SELECT EXTRACT(CENTURY FROM TIMESTAMP '2000-12-16 12:21:13');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">20</samp>
SELECT EXTRACT(CENTURY FROM TIMESTAMP '2001-02-16 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">21</samp>
</pre> <p>The first century starts at 0001-01-01 00:00:00 AD, although they did not know it at the time. This definition applies to all Gregorian calendar countries. There is no century number 0, you go from -1 century to 1 century. If you disagree with this, please write your complaint to: Pope, Cathedral Saint-Peter of Roma, Vatican.</p> </dd> <dt><code class="LITERAL">day</code></dt> <dd> <p>For <code class="TYPE">timestamp</code> values, the day (of the month) field (1 - 31) ; for <code class="TYPE">interval</code> values, the number of days</p> <pre class="SCREEN">
SELECT EXTRACT(DAY FROM TIMESTAMP '2001-02-16 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">16</samp>

SELECT EXTRACT(DAY FROM INTERVAL '40 days 1 minute');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">40</samp>
</pre> </dd> <dt><code class="LITERAL">decade</code></dt> <dd> <p>The year field divided by 10</p> <pre class="SCREEN">
SELECT EXTRACT(DECADE FROM TIMESTAMP '2001-02-16 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">200</samp>
</pre> </dd> <dt><code class="LITERAL">dow</code></dt> <dd> <p>The day of the week as Sunday (<code class="LITERAL">0</code>) to Saturday (<code class="LITERAL">6</code>)</p> <pre class="SCREEN">
SELECT EXTRACT(DOW FROM TIMESTAMP '2001-02-16 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">5</samp>
</pre> <p>Note that <code class="FUNCTION">extract</code>'s day of the week numbering differs from that of the <code class="FUNCTION">to_char(..., 'D')</code> function.</p> </dd> <dt><code class="LITERAL">doy</code></dt> <dd> <p>The day of the year (1 - 365/366)</p> <pre class="SCREEN">
SELECT EXTRACT(DOY FROM TIMESTAMP '2001-02-16 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">47</samp>
</pre> </dd> <dt><code class="LITERAL">epoch</code></dt> <dd> <p>For <code class="TYPE">timestamp with time zone</code> values, the number of seconds since 1970-01-01 00:00:00 UTC (can be negative); for <code class="TYPE">date</code> and <code class="TYPE">timestamp</code> values, the number of seconds since 1970-01-01 00:00:00 local time; for <code class="TYPE">interval</code> values, the total number of seconds in the interval</p> <pre class="SCREEN">
SELECT EXTRACT(EPOCH FROM TIMESTAMP WITH TIME ZONE '2001-02-16 20:38:40.12-08');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">982384720.12</samp>

SELECT EXTRACT(EPOCH FROM INTERVAL '5 days 3 hours');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">442800</samp>
</pre> <p>Here is how you can convert an epoch value back to a time stamp:</p> <pre class="SCREEN">
SELECT TIMESTAMP WITH TIME ZONE 'epoch' + 982384720.12 * INTERVAL '1 second';
</pre> <p>(The <code class="FUNCTION">to_timestamp</code> function encapsulates the above conversion.)</p> </dd> <dt><code class="LITERAL">hour</code></dt> <dd> <p>The hour field (0 - 23)</p> <pre class="SCREEN">
SELECT EXTRACT(HOUR FROM TIMESTAMP '2001-02-16 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">20</samp>
</pre> </dd> <dt><code class="LITERAL">isodow</code></dt> <dd> <p>The day of the week as Monday (<code class="LITERAL">1</code>) to Sunday (<code class="LITERAL">7</code>)</p> <pre class="SCREEN">
SELECT EXTRACT(ISODOW FROM TIMESTAMP '2001-02-18 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">7</samp>
</pre> <p>This is identical to <code class="LITERAL">dow</code> except for Sunday. This matches the <acronym class="ACRONYM">ISO</acronym> 8601 day of the week numbering.</p> </dd> <dt><code class="LITERAL">isoyear</code></dt> <dd> <p>The <acronym class="ACRONYM">ISO</acronym> 8601 week-numbering year that the date falls in (not applicable to intervals)</p> <pre class="SCREEN">
SELECT EXTRACT(ISOYEAR FROM DATE '2006-01-01');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">2005</samp>
SELECT EXTRACT(ISOYEAR FROM DATE '2006-01-02');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">2006</samp>
</pre> <p>Each <acronym class="ACRONYM">ISO</acronym> 8601 week-numbering year begins with the Monday of the week containing the 4th of January, so in early January or late December the <acronym class="ACRONYM">ISO</acronym> year may be different from the Gregorian year. See the <code class="LITERAL">week</code> field for more information.</p> <p>This field is not available in PostgreSQL releases prior to 8.3.</p> </dd> <dt><code class="LITERAL">microseconds</code></dt> <dd> <p>The seconds field, including fractional parts, multiplied by 1 000 000; note that this includes full seconds</p> <pre class="SCREEN">
SELECT EXTRACT(MICROSECONDS FROM TIME '17:12:28.5');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">28500000</samp>
</pre> </dd> <dt><code class="LITERAL">millennium</code></dt> <dd> <p>The millennium</p> <pre class="SCREEN">
SELECT EXTRACT(MILLENNIUM FROM TIMESTAMP '2001-02-16 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">3</samp>
</pre> <p>Years in the 1900s are in the second millennium. The third millennium started January 1, 2001.</p> </dd> <dt><code class="LITERAL">milliseconds</code></dt> <dd> <p>The seconds field, including fractional parts, multiplied by 1000. Note that this includes full seconds.</p> <pre class="SCREEN">
SELECT EXTRACT(MILLISECONDS FROM TIME '17:12:28.5');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">28500</samp>
</pre> </dd> <dt><code class="LITERAL">minute</code></dt> <dd> <p>The minutes field (0 - 59)</p> <pre class="SCREEN">
SELECT EXTRACT(MINUTE FROM TIMESTAMP '2001-02-16 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">38</samp>
</pre> </dd> <dt><code class="LITERAL">month</code></dt> <dd> <p>For <code class="TYPE">timestamp</code> values, the number of the month within the year (1 - 12) ; for <code class="TYPE">interval</code> values, the number of months, modulo 12 (0 - 11)</p> <pre class="SCREEN">
SELECT EXTRACT(MONTH FROM TIMESTAMP '2001-02-16 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">2</samp>

SELECT EXTRACT(MONTH FROM INTERVAL '2 years 3 months');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">3</samp>

SELECT EXTRACT(MONTH FROM INTERVAL '2 years 13 months');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">1</samp>
</pre> </dd> <dt><code class="LITERAL">quarter</code></dt> <dd> <p>The quarter of the year (1 - 4) that the date is in</p> <pre class="SCREEN">
SELECT EXTRACT(QUARTER FROM TIMESTAMP '2001-02-16 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">1</samp>
</pre> </dd> <dt><code class="LITERAL">second</code></dt> <dd> <p id="AEN14965">The seconds field, including fractional parts (0 - 59<span class="footnote">[1]</span>)</p> <pre class="SCREEN">
SELECT EXTRACT(SECOND FROM TIMESTAMP '2001-02-16 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">40</samp>

SELECT EXTRACT(SECOND FROM TIME '17:12:28.5');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">28.5</samp>
</pre> </dd> <dt><code class="LITERAL">timezone</code></dt> <dd> <p>The time zone offset from UTC, measured in seconds. Positive values correspond to time zones east of UTC, negative values to zones west of UTC. (Technically, <span class="PRODUCTNAME">PostgreSQL</span> uses <acronym class="ACRONYM">UT1</acronym> because leap seconds are not handled.)</p> </dd> <dt><code class="LITERAL">timezone_hour</code></dt> <dd> <p>The hour component of the time zone offset</p> </dd> <dt><code class="LITERAL">timezone_minute</code></dt> <dd> <p>The minute component of the time zone offset</p> </dd> <dt><code class="LITERAL">week</code></dt> <dd> <p>The number of the <acronym class="ACRONYM">ISO</acronym> 8601 week-numbering week of the year. By definition, ISO weeks start on Mondays and the first week of a year contains January 4 of that year. In other words, the first Thursday of a year is in week 1 of that year.</p> <p>In the ISO week-numbering system, it is possible for early-January dates to be part of the 52nd or 53rd week of the previous year, and for late-December dates to be part of the first week of the next year. For example, <code class="LITERAL">2005-01-01</code> is part of the 53rd week of year 2004, and <code class="LITERAL">2006-01-01</code> is part of the 52nd week of year 2005, while <code class="LITERAL">2012-12-31</code> is part of the first week of 2013. It's recommended to use the <code class="LITERAL">isoyear</code> field together with <code class="LITERAL">week</code> to get consistent results.</p> <pre class="SCREEN">
SELECT EXTRACT(WEEK FROM TIMESTAMP '2001-02-16 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">7</samp>
</pre> </dd> <dt><code class="LITERAL">year</code></dt> <dd> <p>The year field. Keep in mind there is no <code class="LITERAL">0 AD</code>, so subtracting <code class="LITERAL">BC</code> years from <code class="LITERAL">AD</code> years should be done with care.</p> <pre class="SCREEN">
SELECT EXTRACT(YEAR FROM TIMESTAMP '2001-02-16 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">2001</samp>
</pre> </dd> </dl> </div> <p>The <code class="FUNCTION">extract</code> function is primarily intended for computational processing. For formatting date/time values for display, see <a href="../functions-formatting/">Section 9.8</a>.</p> <p>The <code class="FUNCTION">date_part</code> function is modeled on the traditional <span class="PRODUCTNAME">Ingres</span> equivalent to the <acronym class="ACRONYM">SQL</acronym>-standard function <code class="FUNCTION">extract</code>:</p> <pre class="SYNOPSIS" data-language="sql">
date_part('field', source)
</pre> <p>Note that here the <code class="REPLACEABLE c3">field</code> parameter needs to be a string value, not a name. The valid field names for <code class="FUNCTION">date_part</code> are the same as for <code class="FUNCTION">extract</code>.</p> <pre class="SCREEN">
SELECT date_part('day', TIMESTAMP '2001-02-16 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">16</samp>

SELECT date_part('hour', INTERVAL '4 hours 3 minutes');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">4</samp>
</pre> </div> <div class="SECT2"> <h2 class="SECT2" id="FUNCTIONS-DATETIME-TRUNC">9.9.2. <code class="FUNCTION">date_trunc</code>
</h2> <p>The function <code class="FUNCTION">date_trunc</code> is conceptually similar to the <code class="FUNCTION">trunc</code> function for numbers.</p> <pre class="SYNOPSIS" data-language="sql">
date_trunc('field', source)
</pre> <p><code class="REPLACEABLE c3">source</code> is a value expression of type <code class="TYPE">timestamp</code> or <code class="TYPE">interval</code>. (Values of type <code class="TYPE">date</code> and <code class="TYPE">time</code> are cast automatically to <code class="TYPE">timestamp</code> or <code class="TYPE">interval</code>, respectively.) <code class="REPLACEABLE c3">field</code> selects to which precision to truncate the input value. The return value is of type <code class="TYPE">timestamp</code> or <code class="TYPE">interval</code> with all fields that are less significant than the selected one set to zero (or one, for day and month).</p> <p>Valid values for <code class="REPLACEABLE c3">field</code> are:</p> <table> <tbody> <tr> <td><code class="LITERAL">microseconds</code></td> </tr> <tr> <td><code class="LITERAL">milliseconds</code></td> </tr> <tr> <td><code class="LITERAL">second</code></td> </tr> <tr> <td><code class="LITERAL">minute</code></td> </tr> <tr> <td><code class="LITERAL">hour</code></td> </tr> <tr> <td><code class="LITERAL">day</code></td> </tr> <tr> <td><code class="LITERAL">week</code></td> </tr> <tr> <td><code class="LITERAL">month</code></td> </tr> <tr> <td><code class="LITERAL">quarter</code></td> </tr> <tr> <td><code class="LITERAL">year</code></td> </tr> <tr> <td><code class="LITERAL">decade</code></td> </tr> <tr> <td><code class="LITERAL">century</code></td> </tr> <tr> <td><code class="LITERAL">millennium</code></td> </tr> </tbody> </table> <p>Examples:</p> <pre class="SCREEN">
SELECT date_trunc('hour', TIMESTAMP '2001-02-16 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">2001-02-16 20:00:00</samp>

SELECT date_trunc('year', TIMESTAMP '2001-02-16 20:38:40');
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">2001-01-01 00:00:00</samp>
</pre> </div> <div class="SECT2"> <h2 class="SECT2" id="FUNCTIONS-DATETIME-ZONECONVERT">9.9.3. <code class="LITERAL">AT TIME ZONE</code>
</h2> <p>The <code class="LITERAL">AT TIME ZONE</code> construct allows conversions of time stamps to different time zones. <a href="../functions-datetime/#FUNCTIONS-DATETIME-ZONECONVERT-TABLE">Table 9-29</a> shows its variants.</p> <div class="TABLE" id="FUNCTIONS-DATETIME-ZONECONVERT-TABLE">  <p class="c2">Table 9-29. <code class="LITERAL">AT TIME ZONE</code> Variants</p> <table class="CALSTABLE"> <col> <col> <col> <thead> <tr> <th>Expression</th> <th>Return Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="LITERAL"><code class="TYPE">timestamp without time zone</code> AT TIME ZONE <code class="REPLACEABLE c3">zone</code></code></td> <td><code class="TYPE">timestamp with time zone</code></td> <td>Treat given time stamp <span class="emphasis EMPHASIS c4">without time zone</span> as located in the specified time zone</td> </tr> <tr> <td><code class="LITERAL"><code class="TYPE">timestamp with time zone</code> AT TIME ZONE <code class="REPLACEABLE c3">zone</code></code></td> <td><code class="TYPE">timestamp without time zone</code></td> <td>Convert given time stamp <span class="emphasis EMPHASIS c4">with time zone</span> to the new time zone, with no time zone designation</td> </tr> <tr> <td><code class="LITERAL"><code class="TYPE">time with time zone</code> AT TIME ZONE <code class="REPLACEABLE c3">zone</code></code></td> <td><code class="TYPE">time with time zone</code></td> <td>Convert given time <span class="emphasis EMPHASIS c4">with time zone</span> to the new time zone</td> </tr> </tbody> </table> </div> <p>In these expressions, the desired time zone <code class="REPLACEABLE c3">zone</code> can be specified either as a text string (e.g., <code class="LITERAL">'PST'</code>) or as an interval (e.g., <code class="LITERAL">INTERVAL '-08:00'</code>). In the text case, a time zone name can be specified in any of the ways described in <a href="../datatype-datetime/#DATATYPE-TIMEZONES">Section 8.5.3</a>.</p> <p>Examples (assuming the local time zone is <code class="LITERAL">PST8PDT</code>):</p> <pre class="SCREEN">
SELECT TIMESTAMP '2001-02-16 20:38:40' AT TIME ZONE 'MST';
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">2001-02-16 19:38:40-08</samp>

SELECT TIMESTAMP WITH TIME ZONE '2001-02-16 20:38:40-05' AT TIME ZONE 'MST';
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">2001-02-16 18:38:40</samp>
</pre> <p>The first example takes a time stamp without time zone and interprets it as MST time (UTC-7), which is then converted to PST (UTC-8) for display. The second example takes a time stamp specified in EST (UTC-5) and converts it to local time in MST (UTC-7).</p> <p>The function <code class="LITERAL">timezone(<code class="REPLACEABLE c3">zone</code>, <code class="REPLACEABLE c3">timestamp</code>)</code> is equivalent to the SQL-conforming construct <code class="LITERAL"><code class="REPLACEABLE c3">timestamp</code> AT TIME ZONE <code class="REPLACEABLE c3">zone</code></code>.</p> </div> <div class="SECT2"> <h2 class="SECT2" id="FUNCTIONS-DATETIME-CURRENT">9.9.4. Current Date/Time</h2> <p><span class="PRODUCTNAME">PostgreSQL</span> provides a number of functions that return values related to the current date and time. These SQL-standard functions all return values based on the start time of the current transaction:</p> <pre class="SYNOPSIS" data-language="sql">
CURRENT_DATE
CURRENT_TIME
CURRENT_TIMESTAMP
CURRENT_TIME(precision)
CURRENT_TIMESTAMP(precision)
LOCALTIME
LOCALTIMESTAMP
LOCALTIME(precision)
LOCALTIMESTAMP(precision)
</pre> <p><code class="FUNCTION">CURRENT_TIME</code> and <code class="FUNCTION">CURRENT_TIMESTAMP</code> deliver values with time zone; <code class="FUNCTION">LOCALTIME</code> and <code class="FUNCTION">LOCALTIMESTAMP</code> deliver values without time zone.</p> <p><code class="FUNCTION">CURRENT_TIME</code>, <code class="FUNCTION">CURRENT_TIMESTAMP</code>, <code class="FUNCTION">LOCALTIME</code>, and <code class="FUNCTION">LOCALTIMESTAMP</code> can optionally take a precision parameter, which causes the result to be rounded to that many fractional digits in the seconds field. Without a precision parameter, the result is given to the full available precision.</p> <p>Some examples:</p> <pre class="SCREEN">
SELECT CURRENT_TIME;
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">14:39:53.662522-05</samp>

SELECT CURRENT_DATE;
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">2001-12-23</samp>

SELECT CURRENT_TIMESTAMP;
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">2001-12-23 14:39:53.662522-05</samp>

SELECT CURRENT_TIMESTAMP(2);
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">2001-12-23 14:39:53.66-05</samp>

SELECT LOCALTIMESTAMP;
<i class="LINEANNOTATION">Result: </i><samp class="COMPUTEROUTPUT">2001-12-23 14:39:53.662522</samp>
</pre> <p>Since these functions return the start time of the current transaction, their values do not change during the transaction. This is considered a feature: the intent is to allow a single transaction to have a consistent notion of the <span class="QUOTE">"current"</span> time, so that multiple modifications within the same transaction bear the same time stamp.</p>  <blockquote class="NOTE"> <p><b>Note:</b> Other database systems might advance these values more frequently.</p> </blockquote>  <p><span class="PRODUCTNAME">PostgreSQL</span> also provides functions that return the start time of the current statement, as well as the actual current time at the instant the function is called. The complete list of non-SQL-standard time functions is:</p> <pre class="SYNOPSIS" data-language="sql">
transaction_timestamp()
statement_timestamp()
clock_timestamp()
timeofday()
now()
</pre> <p><code class="FUNCTION">transaction_timestamp()</code> is equivalent to <code class="FUNCTION">CURRENT_TIMESTAMP</code>, but is named to clearly reflect what it returns. <code class="FUNCTION">statement_timestamp()</code> returns the start time of the current statement (more specifically, the time of receipt of the latest command message from the client). <code class="FUNCTION">statement_timestamp()</code> and <code class="FUNCTION">transaction_timestamp()</code> return the same value during the first command of a transaction, but might differ during subsequent commands. <code class="FUNCTION">clock_timestamp()</code> returns the actual current time, and therefore its value changes even within a single SQL command. <code class="FUNCTION">timeofday()</code> is a historical <span class="PRODUCTNAME">PostgreSQL</span> function. Like <code class="FUNCTION">clock_timestamp()</code>, it returns the actual current time, but as a formatted <code class="TYPE">text</code> string rather than a <code class="TYPE">timestamp with time zone</code> value. <code class="FUNCTION">now()</code> is a traditional <span class="PRODUCTNAME">PostgreSQL</span> equivalent to <code class="FUNCTION">transaction_timestamp()</code>.</p> <p>All the date/time data types also accept the special literal value <code class="LITERAL">now</code> to specify the current date and time (again, interpreted as the transaction start time). Thus, the following three all return the same result:</p> <pre class="PROGRAMLISTING" data-language="sql">
SELECT CURRENT_TIMESTAMP;
SELECT now();
SELECT TIMESTAMP 'now';  -- incorrect for use with DEFAULT
</pre> <div class="TIP"> <blockquote class="TIP"> <p><b>Tip:</b> You do not want to use the third form when specifying a <code class="LITERAL">DEFAULT</code> clause while creating a table. The system will convert <code class="LITERAL">now</code> to a <code class="TYPE">timestamp</code> as soon as the constant is parsed, so that when the default value is needed, the time of the table creation would be used! The first two forms will not be evaluated until the default value is used, because they are function calls. Thus they will give the desired behavior of defaulting to the time of row insertion.</p> </blockquote> </div> </div> <div class="SECT2"> <h2 class="SECT2" id="FUNCTIONS-DATETIME-DELAY">9.9.5. Delaying Execution</h2> <p>The following functions are available to delay execution of the server process:</p> <pre class="SYNOPSIS" data-language="sql">
pg_sleep(seconds)
pg_sleep_for(interval)
pg_sleep_until(timestamp with time zone)
</pre> <p><code class="FUNCTION">pg_sleep</code> makes the current session's process sleep until <code class="REPLACEABLE c3">seconds</code> seconds have elapsed. <code class="REPLACEABLE c3">seconds</code> is a value of type <code class="TYPE">double precision</code>, so fractional-second delays can be specified. <code class="FUNCTION">pg_sleep_for</code> is a convenience function for larger sleep times specified as an <code class="TYPE">interval</code>. <code class="FUNCTION">pg_sleep_until</code> is a convenience function for when a specific wake-up time is desired. For example:</p> <pre class="PROGRAMLISTING" data-language="sql">
SELECT pg_sleep(1.5);
SELECT pg_sleep_for('5 minutes');
SELECT pg_sleep_until('tomorrow 03:00');
</pre>  <blockquote class="NOTE"> <p><b>Note:</b> The effective resolution of the sleep interval is platform-specific; 0.01 seconds is a common value. The sleep delay will be at least as long as specified. It might be longer depending on factors such as server load. In particular, <code class="FUNCTION">pg_sleep_until</code> is not guaranteed to wake up exactly at the specified time, but it will not wake up any earlier.</p> </blockquote>  <div class="WARNING"> <table class="WARNING"> <tr> <td class="c5" align="center">Warning</td> </tr> <tr> <td align="left"> <p>Make sure that your session does not hold more locks than necessary when calling <code class="FUNCTION">pg_sleep</code> or its variants. Otherwise other sessions might have to wait for your sleeping process, slowing down the entire system.</p> </td> </tr> </table> </div> </div>  <h3 class="FOOTNOTES">Notes</h3> <table class="FOOTNOTES"> <tr> <td align="left" width="5%" id="FTN.AEN14965"><span class="footnote">[1]</span></td> <td align="left" width="95%"> <p>60 if leap seconds are implemented by the operating system</p> </td> </tr> </table> <div class="NAVFOOTER">  <table summary="Footer navigation table"> <tr> <td width="33%" align="left"><a href="../functions-formatting/" accesskey="P">Prev</a></td> <td width="34%" align="center"></td> <td width="33%" align="right"><a href="../functions-enum/" accesskey="N">Next</a></td> </tr> <tr> <td width="33%" align="left">Data Type Formatting Functions</td> <td width="34%" align="center"><a href="https://www.postgresql.org/docs/9.4/static/functions.html" accesskey="U" target="_blank">Up</a></td> <td width="33%" align="right">Enum Support Functions</td> </tr> </table> </div>
<div class="_attribution">
  <p class="_attribution-p">
     19962017 The PostgreSQL Global Development Group<br>Licensed under the PostgreSQL License.<br>
    <a href="https://www.postgresql.org/docs/9.4/static/functions-datetime.html" class="_attribution-link" target="_blank">https://www.postgresql.org/docs/9.4/static/functions-datetime.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
