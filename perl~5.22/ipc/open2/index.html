
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>IPC&#58;&#58;Open2 - Perl 5.22 - W3cubDocs</title>
  
  <meta name="description" content=" IPC&#58;&#58;Open2 - open a process for both reading and writing using open2() ">
  <meta name="keywords" content="ipc, open, -, perl, perl~5.22">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/perl~5.22/ipc/open2/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/perl~5.22.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/perl~5.22/" class="_nav-link" title="" style="margin-left:0;">Perl 5.22</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _perl">
				
<h1>IPC::Open2</h1>  <ul>
<li><a href="#NAME">NAME</a></li>
<li><a href="#SYNOPSIS">SYNOPSIS</a></li>
<li><a href="#DESCRIPTION">DESCRIPTION</a></li>
<li><a href="#WARNING">WARNING</a></li>
<li><a href="#SEE-ALSO">SEE ALSO</a></li>
</ul>
<h2 id="NAME">NAME</h2> <p>IPC::Open2 - open a process for both reading and writing using open2()</p> <h2 id="SYNOPSIS">SYNOPSIS</h2> <pre class="verbatim" data-language="perl">use IPC::Open2;

$pid = open2(\*CHLD_OUT, \*CHLD_IN, 'some cmd and args');
  # or without using the shell
$pid = open2(\*CHLD_OUT, \*CHLD_IN, 'some', 'cmd', 'and', 'args');

# or with handle autovivification
my($chld_out, $chld_in);
$pid = open2($chld_out, $chld_in, 'some cmd and args');
  # or without using the shell
$pid = open2($chld_out, $chld_in, 'some', 'cmd', 'and', 'args');

waitpid( $pid, 0 );
my $child_exit_status = $? &gt;&gt; 8;
</pre>
<h2 id="DESCRIPTION">DESCRIPTION</h2> <p>The open2() function runs the given $cmd and connects $chld_out for reading and $chld_in for writing. It's what you think should work when you try</p> <pre class="verbatim" data-language="perl">$pid = open(HANDLE, "|cmd args|");
</pre>
<p>The write filehandle will have autoflush turned on.</p> <p>If $chld_out is a string (that is, a bareword filehandle rather than a glob or a reference) and it begins with <code class="inline">&gt;&amp;</code>, then the child will send output directly to that file handle. If $chld_in is a string that begins with <code class="inline">&lt;<span class="i">&amp;</span></code> , then $chld_in will be closed in the parent, and the child will read from it directly. In both cases, there will be a dup(2) instead of a pipe(2) made.</p> <p>If either reader or writer is the null string, this will be replaced by an autogenerated filehandle. If so, you must pass a valid lvalue in the parameter slot so it can be overwritten in the caller, or an exception will be raised.</p> <p>open2() returns the process ID of the child process. It doesn't return on failure: it just raises an exception matching <code class="inline"><span class="q">/^open2:/</span></code> . However, <code class="inline"><a class="l_k" href="../../functions/exec/">exec</a></code> failures in the child are not detected. You'll have to trap SIGPIPE yourself.</p> <p>open2() does not wait for and reap the child process after it exits. Except for short programs where it's acceptable to let the operating system take care of this, you need to do this yourself. This is normally as simple as calling <code class="inline"><a class="l_k" href="../../functions/waitpid/">waitpid</a> <span class="i">$pid</span><span class="cm">,</span> <span class="n">0</span></code> when you're done with the process. Failing to do this can result in an accumulation of defunct or "zombie" processes. See <a href="../../functions/waitpid/">waitpid</a> for more information.</p> <p>This whole affair is quite dangerous, as you may block forever. It assumes it's going to talk to something like <b>bc</b>, both writing to it and reading from it. This is presumably safe because you "know" that commands like <b>bc</b> will read a line at a time and output a line at a time. Programs like <b>sort</b> that read their entire input stream first, however, are quite apt to cause deadlock.</p> <p>The big problem with this approach is that if you don't have control over source code being run in the child process, you can't control what it does with pipe buffering. Thus you can't just open a pipe to <code class="inline"><span class="w">cat</span> -<span class="w">v</span></code> and continually read and write a line from it.</p> <p>The IO::Pty and Expect modules from CPAN can help with this, as they provide a real tty (well, a pseudo-tty, actually), which gets you back to line buffering in the invoked command again.</p> <h2 id="WARNING">WARNING</h2> <p>The order of arguments differs from that of open3().</p> <h2 id="SEE-ALSO">SEE ALSO</h2> <p>See <a href="../open3/">IPC::Open3</a> for an alternative that handles STDERR as well. This function is really just a wrapper around open3().</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 1993–2016 Larry Wall and others<br>Licensed under the GNU General Public License version 1 or later, or the Artistic License.<br>The Perl logo is a trademark of the Perl Foundation.<br>
    <a href="http://perldoc.perl.org/5.22.0/IPC/Open2.html" class="_attribution-link" target="_blank">http://perldoc.perl.org/5.22.0/IPC/Open2.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
