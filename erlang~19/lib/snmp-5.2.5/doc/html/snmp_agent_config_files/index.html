
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>6. Definition of Agent Configuration Files - Erlang 19 - W3cubDocs</title>
  
  <meta name="description" content="All configuration data must be included in configuration files that are located in the configuration directory. The name of this directory is given &hellip;">
  <meta name="keywords" content="definition, agent, configuration, files, -, erlang, erlang~19">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/erlang~19/lib/snmp-5.2.5/doc/html/snmp_agent_config_files/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/erlang~19.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/erlang~19/" class="_nav-link" title="" style="margin-left:0;">Erlang 19</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _erlang">
				
<h1>6 Definition of Agent Configuration Files</h1> <p>All configuration data must be included in configuration files that are located in the configuration directory. The name of this directory is given in the <code class="code">config_dir</code> configuration parameter. These files are read at start-up, and are used to initialize the SNMPv2-MIB or STANDARD-MIB, SNMP-FRAMEWORK-MIB, SNMP-MPD-MIB, SNMP-VIEW-BASED-ACM-MIB, SNMP-COMMUNITY-MIB, SNMP-USER-BASED-SM-MIB, SNMP-TARGET-MIB and SNMP-NOTIFICATION-MIB (refer to the <code class="bold_code"><a href="../snmp_agent_funct_descr/#management">Management of the Agent</a></code> for a description of the MIBs). </p> <p>The files are: </p> <ul> <li> <p><code class="code">agent.conf</code>: see <code class="bold_code"><a href="#agent_information">Agent Information</a></code></p> </li> <li> <p><code class="code">standard.conf</code>: see <code class="bold_code"><a href="#system_information">System Information</a></code></p> </li> <li> <p><code class="code">context.conf</code>: see <code class="bold_code"><a href="#context">Contexts</a></code></p> </li> <li> <p><code class="code">community.conf</code>: see <code class="bold_code"><a href="#community">Communities</a></code></p> </li> <li> <p><code class="code">target_addr.conf</code>: see <code class="bold_code"><a href="#target_addr">Target Address Definitions</a></code></p> </li> <li> <p><code class="code">target_params.conf</code>: see <code class="bold_code"><a href="#target_params">Target Parameters Definitions</a></code></p> </li> <li> <p><code class="code">vacm.conf</code>: see <code class="bold_code"><a href="#vacm">MIB Views for VACM</a></code></p> </li> <li> <p><code class="code">usm.conf</code>: see <code class="bold_code"><a href="#usm">Security data for USM</a></code></p> </li> <li> <p><code class="code">notify.conf</code>: see <code class="bold_code"><a href="#notify">Notify Definitions</a></code></p> </li> </ul> <p>The directory where the configuration files are found is given as a parameter to the agent. </p> <p>The entry format in all files are Erlang terms, separated by a '<strong>.</strong>' and a <strong>newline</strong>. In the following sections, the formats of these terms are described. Comments may be specified as ordinary Erlang comments. </p> <p>Syntax errors in these files are discovered and reported with the function <code class="code">config_err/2</code> of the error report module at start-up. </p>  <h2 id="id81792">6.1 Agent Information</h2> <p>The agent information should be stored in a file called <code class="code">agent.conf</code>. </p> <p>Each entry is a tuple of size two:</p> <p><code class="code">{AgentVariable, Value}.</code></p> <ul> <li> <p><code class="code">AgentVariable</code> is one of the variables is SNMP-FRAMEWORK-MIB or one of the internal variables <code class="code">intAgentUDPPort</code>, which defines which UDP port the agent listens to, or <code class="code">intAgentTransports</code>, which defines the transport domains and addresses of the agent. </p> </li> <li> <p><code class="code">Value</code> is the value for the variable.</p> </li> </ul> <p>The following example shows an <code class="code">agent.conf</code> file: </p> <div class="example"><pre>
{intAgentUDPPort, 4000}.
{intAgentTransports,
 [{transportDomainUdpIpv4, {141,213,11,24}},
  {transportDomainUdpIpv6, {0,0,0,0,0,0,0,1}}]}.
{snmpEngineID, "mbj's engine"}.
{snmpEngineMaxPacketSize, 484}.
    </pre></div> <p>The value of <code class="code">intAgentTransports</code> is a list of <code class="code">{Domain, Addr}</code> tuples, where <code class="code">Domain</code> is either <code class="code">transportDomainUdpIpv4</code> or <code class="code">transportDomainUdpIpv6</code>, and <code class="code">Addr</code> is the address in the domain. <code class="code">Addr</code> can be specified either as an <code class="code">IpAddr</code> or as an <code class="code">{IpAddr, IpPort}</code> tuple. <code class="code">IpAddr</code> is either a regular Erlang/OTP <code class="bold_code"><span class="code">ip_address()</span></code> or a traditional SNMP integer list and <code class="code">IpPort</code> is an integer. </p> <p>When the <code class="code">Addr</code> value does not contain a port number, the value of <code class="code">intAgentUDPPort</code> is used.</p> <p>The legacy and intermediate variables <code class="code">intAgentIpAddress</code> and <code class="code">intAgentTransportDomain</code> are still supported so old <code class="code">agent.conf</code> files will work. </p> <p>The value of <code class="code">snmpEngineID</code> is a string, which for a deployed agent should have a very specific structure. See RFC 2271/2571 for details.</p>  <h2 id="id81956">6.2 Contexts</h2> <p>The context information should be stored in a file called <code class="code">context.conf</code>. The default context <code class="code">""</code> need not be present.</p> <p>Each row defines a context in the agent. This information is used in the table <code class="code">vacmContextTable</code> in the SNMP-VIEW-BASED-ACM-MIB.</p> <p>Each entry is a term:</p> <p><code class="code">ContextName.</code></p> <ul> <li> <p><code class="code">ContextName</code> is a string.</p> </li> </ul>  <h2 id="id82012">6.3 System Information</h2> <p>The system information should be stored in a file called <code class="code">standard.conf</code>.</p> <p>Each entry is a tuple of size two:</p> <p><code class="code">{SystemVariable, Value}.</code></p> <ul> <li> <p><code class="code">SystemVariable</code> is one of the variables in the system group, or <code class="code">snmpEnableAuthenTraps</code>. </p> </li> <li> <p><code class="code">Value</code> is the value for the variable. </p> </li> </ul> <p>The following example shows a valid <code class="code">standard.conf</code> file: </p> <div class="example"><pre>
{sysDescr, "Erlang SNMP agent"}.
{sysObjectID, [1,2,3]}.
{sysContact, "(mbj,eklas)@erlang.ericsson.se"}.
{sysName, "test"}.
{sysServices, 72}.
{snmpEnableAuthenTraps, enabled}.
    </pre></div> <p>A value must be provided for all variables, which lack default values in the MIB. </p>  <h2 id="id82088">6.4 Communities</h2> <p>The community information should be stored in a file called <code class="code">community.conf</code>. It must be present if the agent is configured for SNMPv1 or SNMPv2c. </p> <p>An SNMP <strong>community</strong> is a relationship between an SNMP agent and a set of SNMP managers that defines authentication, access control and proxy characteristics. </p> <p>The corresponding table is <code class="code">snmpCommunityTable</code> in the SNMP-COMMUNITY-MIB. </p> <p>Each entry is a term: </p> <p><code class="code">{CommunityIndex, CommunityName, SecurityName, ContextName, TransportTag}.</code> </p> <ul> <li> <p><code class="code">CommunityIndex</code> is a non-empty string.</p> </li> <li> <p><code class="code">CommunityName</code> is a string.</p> </li> <li> <p><code class="code">SecurityName</code> is a string.</p> </li> <li> <p><code class="code">ContextName</code> is a string.</p> </li> <li> <p><code class="code">TransportTag</code> is a string.</p> </li> </ul>  <h2 id="id82190">6.5 MIB Views for VACM</h2> <p>The information about MIB Views for VACM should be stored in a file called <code class="code">vacm.conf</code>.</p> <p>The corresponding tables are <code class="code">vacmSecurityToGroupTable</code>, <code class="code">vacmAccessTable</code> and <code class="code">vacmViewTreeFamilyTable</code> in the SNMP-VIEW-BASED-ACM-MIB.</p> <p>Each entry is one of the terms, one entry corresponds to one row in one of the tables.</p> <p><code class="code">{vacmSecurityToGroup, SecModel, SecName, GroupName}.</code></p> <p><code class="code">{vacmAccess, GroupName, Prefix, SecModel, SecLevel, Match, ReadView, WriteView, NotifyView}.</code></p> <p><code class="code">{vacmViewTreeFamily, ViewIndex, ViewSubtree, ViewStatus, ViewMask}.</code></p> <ul> <li> <p><code class="code">SecModel</code> is <code class="code">any</code>, <code class="code">v1</code>, <code class="code">v2c</code>, or <code class="code">usm</code>.</p> </li> <li> <p><code class="code">SecName</code> is a string.</p> </li> <li> <p><code class="code">GroupName</code> is a string.</p> </li> <li> <p><code class="code">Prefix</code> is a string.</p> </li> <li> <p><code class="code">SecLevel</code> is <code class="code">noAuthNoPriv</code>, <code class="code">authNoPriv</code>, or <code class="code">authPriv</code></p> </li> <li> <p><code class="code">Match</code> is <code class="code">prefix</code> or <code class="code">exact</code>.</p> </li> <li> <p><code class="code">ReadView</code> is a string.</p> </li> <li> <p><code class="code">WriteView</code> is a string.</p> </li> <li> <p><code class="code">NotifyView</code> is a string.</p> </li> <li> <p><code class="code">ViewIndex</code> is an integer.</p> </li> <li> <p><code class="code">ViewSubtree</code> is a list of integer.</p> </li> <li> <p><code class="code">ViewStatus</code> is either <code class="code">included</code> or <code class="code">excluded</code></p> </li> <li> <p><code class="code">ViewMask</code> is either <code class="code">null</code> or a list of ones and zeros. Ones nominate that an exact match is used for this sub-identifier. Zeros are wild-cards which match any sub-identifier. If the mask is shorter than the sub-tree, the tail is regarded as all ones. <code class="code">null</code> is shorthand for a mask with all ones. </p> </li> </ul>  <h2 id="id82428">6.6 Security data for USM</h2> <p>The information about Security data for USM should be stored in a file called <code class="code">usm.conf</code>, which must be present if the agent is configured for SNMPv3. </p> <p>The corresponding table is <code class="code">usmUserTable</code> in the SNMP-USER-BASED-SM-MIB.</p> <p>Each entry is a term:</p> <p><code class="code">{EngineID, UserName, SecName, Clone, AuthP, AuthKeyC, OwnAuthKeyC, PrivP, PrivKeyC, OwnPrivKeyC, Public, AuthKey, PrivKey}.</code></p> <ul> <li> <p><code class="code">EngineID</code> is a string.</p> </li> <li> <p><code class="code">UserName</code> is a string.</p> </li> <li> <p><code class="code">SecName</code> is a string.</p> </li> <li> <p><code class="code">Clone</code> is <code class="code">zeroDotZero</code> or a list of integers.</p> </li> <li> <p><code class="code">AuthP</code> is a <code class="code">usmNoAuthProtocol</code>, <code class="code">usmHMACMD5AuthProtocol</code>, or <code class="code">usmHMACSHAAuthProtocol</code>.</p> </li> <li> <p><code class="code">AuthKeyC</code> is a string.</p> </li> <li> <p><code class="code">OwnAuthKeyC</code> is a string.</p> </li> <li> <p><code class="code">PrivP</code> is a <code class="code">usmNoPrivProtocol</code>, <code class="code">usmDESPrivProtocol</code> or <code class="code">usmAesCfb128Protocol</code>.</p> </li> <li> <p><code class="code">PrivKeyC</code> is a string.</p> </li> <li> <p><code class="code">OwnPrivKeyC</code> is a string.</p> </li> <li> <p><code class="code">Public</code> is a string.</p> </li> <li> <p><code class="code">AuthKey</code> is a list (of integer). This is the User's secret localized authentication key. It is not visible in the MIB. The length of this key needs to be 16 if <code class="code">usmHMACMD5AuthProtocol</code> is used, and 20 if <code class="code">usmHMACSHAAuthProtocol</code> is used.</p> </li> <li> <p><code class="code">PrivKey</code> is a list (of integer). This is the User's secret localized encryption key. It is not visible in the MIB. The length of this key needs to be 16 if <code class="code">usmDESPrivProtocol</code> or <code class="code">usmAesCfb128Protocol</code> is used. </p> </li> </ul>  <h2 id="id82643">6.7 Notify Definitions</h2> <p>The information about Notify Definitions should be stored in a file called <code class="code">notify.conf</code>. </p> <p>The corresponding table is <code class="code">snmpNotifyTable</code> in the SNMP-NOTIFICATION-MIB.</p> <p>Each entry is a term:</p> <p><code class="code">{NotifyName, Tag, Type}.</code></p> <ul> <li> <p><code class="code">NotifyName</code> is a unique non-empty string.</p> </li> <li> <p><code class="code">Tag</code> is a string.</p> </li> <li> <p><code class="code">Type</code> is <code class="code">trap</code> or <code class="code">inform</code>.</p> </li> </ul>  <h2 id="id82723">6.8 Target Address Definitions</h2> <p>The information about Target Address Definitions should be stored in a file called <code class="code">target_addr.conf</code>. </p> <p>The corresponding tables are <code class="code">snmpTargetAddrTable</code> in the SNMP-TARGET-MIB and <code class="code">snmpTargetAddrExtTable</code> in the SNMP-COMMUNITY-MIB. </p> <p>Each entry is a term: </p> <p><code class="code">{TargetName, Domain, Addr, Timeout, RetryCount, TagList, ParamsName, EngineId}.</code> <br> or <br> <code class="code">{TargetName, Domain, Addr, Timeout, RetryCount, TagList, ParamsName, EngineId, TMask, MaxMessageSize}.</code> </p> <ul> <li> <p><code class="code">TargetName</code> is a unique non-empty string. </p> </li> <li> <p><code class="code">Domain</code> is one of the atoms: <code class="code">transportDomainUdpIpv4</code> | <code class="code">transportDomainUdpIpv6</code>. </p> </li> <li> <p><code class="code">Addr</code> is either an <code class="code">IpAddr</code> or an <code class="code">{IpAddr, IpPort}</code> tuple. <code class="code">IpAddr</code> is either a regular Erlang/OTP <code class="bold_code"><span class="code">ip_address()</span></code> or a traditional SNMP integer list, and <code class="code">IpPort</code> is an integer.</p> <p>If <code class="code">IpPort</code> is omitted <code class="code">162</code> is used.</p> </li> <li> <p><code class="code">Timeout</code> is an integer. </p> </li> <li> <p><code class="code">RetryCount</code> is an integer. </p> </li> <li> <p><code class="code">TagList</code> is a string. </p> </li> <li> <p><code class="code">ParamsName</code> is a string. </p> </li> <li> <p><code class="code">EngineId</code> is a string or the atom <code class="code">discovery</code>. </p> </li> <li> <p><code class="code">TMask</code> is specified just as <code class="code">Addr</code> or as <code class="code">[]</code>. Note in particular that using a list of 6 bytes for IPv4 or 8 words plus 2 bytes for IPv6 are still valid address formats so old configurations will work.</p> </li> <li> <p><code class="code">MaxMessageSize</code> is an integer (default: 2048). </p> </li> </ul> <p>The old tuple formats with <code class="code">Ip</code> address and <code class="code">Udp</code> port number found in old configurations still work.</p> <p>Note that if <code class="code">EngineId</code> has the value <code class="code">discovery</code>, the agent cannot send <code class="code">inform</code> messages to that manager until it has performed the <strong>discovery</strong> process with that manager. </p>  <h2 id="id82965">6.9 Target Parameters Definitions</h2> <p>The information about Target Parameters Definitions should be stored in a file called <code class="code">target_params.conf</code>. </p> <p>The corresponding table is <code class="code">snmpTargetParamsTable</code> in the SNMP-TARGET-MIB. </p> <p>Each entry is a term: </p> <p><code class="code">{ParamsName, MPModel, SecurityModel, SecurityName, SecurityLevel}.</code></p> <ul> <li> <p><code class="code">ParamsName</code> is a unique non-empty string. </p> </li> <li> <p><code class="code">MPModel</code> is <code class="code">v1</code>, <code class="code">v2c</code> or <code class="code">v3</code></p> </li> <li> <p><code class="code">SecurityModel</code> is <code class="code">v1</code>, <code class="code">v2c</code>, or <code class="code">usm</code>.</p> </li> <li> <p><code class="code">SecurityName</code> is a string.</p> </li> <li> <p><code class="code">SecurityLevel</code> is <code class="code">noAuthNoPriv</code>, <code class="code">authNoPriv</code> or <code class="code">authPriv</code>. </p> </li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © 1999–2016 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
