
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Codeception&#92;Util&#92;Stub - Codeception - W3cubDocs</title>
  
  <meta name="description" content=" public static &#36;magicMethods #### atLeastOnce() ">
  <meta name="keywords" content="codeception, util, stub, -">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/codeception/reference/stub/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/codeception.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/codeception/" class="_nav-link" title="" style="margin-left:0;">Codeception</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _codeception">
				
<h1 id="codeceptionutilstub">Codeception\Util\Stub</h1> <h3 id="magicmethods">$magicMethods</h3> <p><em>public static</em> <strong>$magicMethods</strong> #### atLeastOnce()</p> <p><em>public static</em> atLeastOnce($params = null)</p> <p>Checks if a method has been invoked at least one time.</p> <p>If the number of invocations is 0 it will throw an exception in verify.</p> <pre data-language="php">&lt;?php
$user = Stub::make(
    'User',
    array(
        'getName' =&gt; Stub::atLeastOnce(function() { return 'Davert';}),
        'someMethod' =&gt; function() {}
    )
);
$user-&gt;getName();
$user-&gt;getName();
?&gt;</pre> <ul> <li>
<code class="highlighter-rouge">param mixed</code> $params</li> <li>
<code class="highlighter-rouge">return</code> StubMarshaler</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L696" target="_blank">See source</a></p> <h3 id="bindparameters">bindParameters()</h3> <p><em>protected static</em> bindParameters($mock, $params)</p> <ul> <li>
<code class="highlighter-rouge">param \PHPUnit_Framework_MockObject_MockObject</code> $mock</li> <li>
<code class="highlighter-rouge">param array</code> $params</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L516" target="_blank">See source</a></p> <h3 id="closureifnull">closureIfNull()</h3> <p><em>private static</em> closureIfNull($params)</p> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L740" target="_blank">See source</a></p> <h3 id="consecutive">consecutive()</h3> <p><em>public static</em> consecutive()</p> <p>Stubbing a method call to return a list of values in the specified order.</p> <pre data-language="php">&lt;?php
$user = Stub::make('User', array('getName' =&gt; Stub::consecutive('david', 'emma', 'sam', 'amy')));
$user-&gt;getName(); //david
$user-&gt;getName(); //emma
$user-&gt;getName(); //sam
$user-&gt;getName(); //amy
?&gt;</pre> <ul> <li>
<code class="highlighter-rouge">return</code> ConsecutiveMap</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L765" target="_blank">See source</a></p> <h3 id="construct">construct()</h3> <p><em>public static</em> construct($class, $constructorParams = null, $params = null, $testCase = null)</p> <p>Instantiates a class instance by running constructor. Parameters for constructor passed as second argument Properties and methods can be set in third argument. Even protected and private properties can be set.</p> <pre data-language="php">&lt;?php
Stub::construct('User', array('autosave' =&gt; false));
Stub::construct('User', array('autosave' =&gt; false), array('name' =&gt; 'davert'));
?&gt;</pre> <p>Accepts either name of class or object of that class</p> <pre data-language="php">&lt;?php
Stub::construct(new User, array('autosave' =&gt; false), array('name' =&gt; 'davert'));
?&gt;</pre> <p>To replace method provide it’s name as a key in third parameter and it’s return value or callback function as parameter</p> <pre data-language="php">&lt;?php
Stub::construct('User', array(), array('save' =&gt; function () { return true; }));
Stub::construct('User', array(), array('save' =&gt; true }));
?&gt;</pre> <ul> <li>
<code class="highlighter-rouge">param mixed</code> $class</li> <li>
<code class="highlighter-rouge">param array</code> $constructorParams</li> <li>
<code class="highlighter-rouge">param array</code> $params</li> <li>
<code class="highlighter-rouge">param bool|\PHPUnit_Framework_TestCase</code> $testCase</li> <li>
<code class="highlighter-rouge">return</code> object</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L287" target="_blank">See source</a></p> <h3 id="constructempty">constructEmpty()</h3> <p><em>public static</em> constructEmpty($class, $constructorParams = null, $params = null, $testCase = null)</p> <p>Instantiates a class instance by running constructor with all methods replaced with dummies. Parameters for constructor passed as second argument Properties and methods can be set in third argument. Even protected and private properties can be set.</p> <pre data-language="php">&lt;?php
Stub::constructEmpty('User', array('autosave' =&gt; false));
Stub::constructEmpty('User', array('autosave' =&gt; false), array('name' =&gt; 'davert'));
?&gt;</pre> <p>Accepts either name of class or object of that class</p> <pre data-language="php">&lt;?php
Stub::constructEmpty(new User, array('autosave' =&gt; false), array('name' =&gt; 'davert'));
?&gt;</pre> <p>To replace method provide it’s name as a key in third parameter and it’s return value or callback function as parameter</p> <pre data-language="php">&lt;?php
Stub::constructEmpty('User', array(), array('save' =&gt; function () { return true; }));
Stub::constructEmpty('User', array(), array('save' =&gt; true }));
?&gt;</pre> <ul> <li>
<code class="highlighter-rouge">param mixed</code> $class</li> <li>
<code class="highlighter-rouge">param array</code> $constructorParams</li> <li>
<code class="highlighter-rouge">param array</code> $params</li> <li>
<code class="highlighter-rouge">param bool|\PHPUnit_Framework_TestCase</code> $testCase</li> <li>
<code class="highlighter-rouge">return</code> object</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L339" target="_blank">See source</a></p> <h3 id="constructemptyexcept">constructEmptyExcept()</h3> <p><em>public static</em> constructEmptyExcept($class, $method, $constructorParams = null, $params = null, $testCase = null)</p> <p>Instantiates a class instance by running constructor with all methods replaced with dummies, except one. Parameters for constructor passed as second argument Properties and methods can be set in third argument. Even protected and private properties can be set.</p> <pre data-language="php">&lt;?php
Stub::constructEmptyExcept('User', 'save');
Stub::constructEmptyExcept('User', 'save', array('autosave' =&gt; false), array('name' =&gt; 'davert'));
?&gt;</pre> <p>Accepts either name of class or object of that class</p> <pre data-language="php">&lt;?php
Stub::constructEmptyExcept(new User, 'save', array('autosave' =&gt; false), array('name' =&gt; 'davert'));
?&gt;</pre> <p>To replace method provide it’s name as a key in third parameter and it’s return value or callback function as parameter</p> <pre data-language="php">&lt;?php
Stub::constructEmptyExcept('User', 'save', array(), array('save' =&gt; function () { return true; }));
Stub::constructEmptyExcept('User', 'save', array(), array('save' =&gt; true }));
?&gt;</pre> <ul> <li>
<code class="highlighter-rouge">param mixed</code> $class</li> <li>
<code class="highlighter-rouge">param string</code> $method</li> <li>
<code class="highlighter-rouge">param array</code> $constructorParams</li> <li>
<code class="highlighter-rouge">param array</code> $params</li> <li>
<code class="highlighter-rouge">param bool|\PHPUnit_Framework_TestCase</code> $testCase</li> <li>
<code class="highlighter-rouge">return</code> object</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L396" target="_blank">See source</a></p> <h3 id="copy">copy()</h3> <p><em>public static</em> copy($obj, $params = null)</p> <p>Clones an object and redefines it’s properties (even protected and private)</p> <ul> <li>
<code class="highlighter-rouge">param</code> $obj</li> <li>
<code class="highlighter-rouge">param array</code> $params</li> <li>
<code class="highlighter-rouge">return</code> mixed</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L241" target="_blank">See source</a></p> <h3 id="dogeneratemock">doGenerateMock()</h3> <p><em>private static</em> doGenerateMock($args, $isAbstract = null)</p> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L459" target="_blank">See source</a></p> <h3 id="exactly">exactly()</h3> <p><em>public static</em> exactly($count, $params = null)</p> <p>Checks if a method has been invoked a certain amount of times. If the number of invocations exceeds the value it will immediately throw an exception, If the number is less it will later be checked in verify() and also throw an exception.</p> <pre data-language="php">&lt;?php
$user = Stub::make(
    'User',
    array(
        'getName' =&gt; Stub::exactly(3, function() { return 'Davert';}),
        'someMethod' =&gt; function() {}
    )
);
$user-&gt;getName();
$user-&gt;getName();
$user-&gt;getName();
?&gt;</pre> <ul> <li>
<code class="highlighter-rouge">param int</code> $count</li> <li>
<code class="highlighter-rouge">param mixed</code> $params</li> <li>
<code class="highlighter-rouge">return</code> StubMarshaler</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L732" target="_blank">See source</a></p> <h3 id="extracttestcasefromargs">extractTestCaseFromArgs()</h3> <p><em>private static</em> extractTestCaseFromArgs($args)</p> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L481" target="_blank">See source</a></p> <h3 id="factory">factory()</h3> <p><em>public static</em> factory($class, $num = null, $params = null)</p> <p>Creates $num instances of class through <code class="highlighter-rouge">Stub::make</code>.</p> <ul> <li>
<code class="highlighter-rouge">param mixed</code> $class</li> <li>
<code class="highlighter-rouge">param int</code> $num</li> <li>
<code class="highlighter-rouge">param array</code> $params</li> <li>
<code class="highlighter-rouge">return</code> array</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L95" target="_blank">See source</a></p> <h3 id="generatemock">generateMock()</h3> <p><em>private static</em> generateMock()</p> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L431" target="_blank">See source</a></p> <h3 id="generatemockforabstractclass">generateMockForAbstractClass()</h3> <p><em>private static</em> generateMockForAbstractClass()</p> <p>Returns a mock object for the specified abstract class with all abstract methods of the class mocked. Concrete methods to mock can be specified with the last parameter</p> <ul> <li>
<code class="highlighter-rouge">param</code> string $originalClassName</li> <li>
<code class="highlighter-rouge">param</code> array $arguments</li> <li>
<code class="highlighter-rouge">param</code> string $mockClassName</li> <li>
<code class="highlighter-rouge">param</code> boolean $callOriginalConstructor</li> <li>
<code class="highlighter-rouge">param</code> boolean $callOriginalClone</li> <li>
<code class="highlighter-rouge">param</code> boolean $callAutoload</li> <li>
<code class="highlighter-rouge">param</code> array $mockedMethods</li> <li>
<code class="highlighter-rouge">param</code> boolean $cloneArguments</li> <li>
<code class="highlighter-rouge">return</code> object</li> <li>
<code class="highlighter-rouge">since</code> Method available since Release 1.0.0</li> <li>
<code class="highlighter-rouge">throws</code> \InvalidArgumentException</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L454" target="_blank">See source</a></p> <h3 id="getclassname">getClassname()</h3> <p><em>protected static</em> getClassname($object) * <code class="highlighter-rouge">todo</code> should be simplified</p> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L584" target="_blank">See source</a></p> <h3 id="getmethodstoreplace">getMethodsToReplace()</h3> <p><em>protected static</em> getMethodsToReplace($reflection, $params)</p> <ul> <li>
<code class="highlighter-rouge">param \ReflectionClass</code> $reflection</li> <li>
<code class="highlighter-rouge">param</code> $params</li> <li>
<code class="highlighter-rouge">return</code> array</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L602" target="_blank">See source</a></p> <h3 id="make">make()</h3> <p><em>public static</em> make($class, $params = null, $testCase = null)</p> <p>Instantiates a class without executing a constructor. Properties and methods can be set as a second parameter. Even protected and private properties can be set.</p> <pre data-language="php">&lt;?php
Stub::make('User');
Stub::make('User', array('name' =&gt; 'davert'));
?&gt;</pre> <p>Accepts either name of class or object of that class</p> <pre data-language="php">&lt;?php
Stub::make(new User, array('name' =&gt; 'davert'));
?&gt;</pre> <p>To replace method provide it’s name as a key in second parameter and it’s return value or callback function as parameter</p> <pre data-language="php">&lt;?php
Stub::make('User', array('save' =&gt; function () { return true; }));
Stub::make('User', array('save' =&gt; true }));
?&gt;</pre> <ul> <li>
<code class="highlighter-rouge">param mixed</code> $class - A class to be mocked</li> <li>
<code class="highlighter-rouge">param array</code> $params - properties and methods to set</li> <li>
<code class="highlighter-rouge">param bool|\PHPUnit_Framework_TestCase</code> $testCase</li> <li>
<code class="highlighter-rouge">return</code> object - mock</li> <li>
<code class="highlighter-rouge">throws</code> \RuntimeException when class does not exist</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L46" target="_blank">See source</a></p> <h3 id="makeempty">makeEmpty()</h3> <p><em>public static</em> makeEmpty($class, $params = null, $testCase = null)</p> <p>Instantiates class having all methods replaced with dummies. Constructor is not triggered. Properties and methods can be set as a second parameter. Even protected and private properties can be set.</p> <pre data-language="php">&lt;?php
Stub::makeEmpty('User');
Stub::makeEmpty('User', array('name' =&gt; 'davert'));
?&gt;</pre> <p>Accepts either name of class or object of that class</p> <pre data-language="php">&lt;?php
Stub::makeEmpty(new User, array('name' =&gt; 'davert'));
?&gt;</pre> <p>To replace method provide it’s name as a key in second parameter and it’s return value or callback function as parameter</p> <pre data-language="php">&lt;?php
Stub::makeEmpty('User', array('save' =&gt; function () { return true; }));
Stub::makeEmpty('User', array('save' =&gt; true }));
?&gt;</pre> <ul> <li>
<code class="highlighter-rouge">param mixed</code> $class</li> <li>
<code class="highlighter-rouge">param array</code> $params</li> <li>
<code class="highlighter-rouge">param bool|\PHPUnit_Framework_TestCase</code> $testCase</li> <li>
<code class="highlighter-rouge">return</code> object</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L215" target="_blank">See source</a></p> <h3 id="makeemptyexcept">makeEmptyExcept()</h3> <p><em>public static</em> makeEmptyExcept($class, $method, $params = null, $testCase = null)</p> <p>Instantiates class having all methods replaced with dummies except one. Constructor is not triggered. Properties and methods can be replaced. Even protected and private properties can be set.</p> <pre data-language="php">&lt;?php
Stub::makeEmptyExcept('User', 'save');
Stub::makeEmptyExcept('User', 'save', array('name' =&gt; 'davert'));
?&gt;</pre> <p>Accepts either name of class or object of that class</p> <pre data-language="php">&lt;?php
* Stub::makeEmptyExcept(new User, 'save');
?&gt;</pre> <p>To replace method provide it’s name as a key in second parameter and it’s return value or callback function as parameter</p> <pre data-language="php">&lt;?php
Stub::makeEmptyExcept('User', 'save', array('isValid' =&gt; function () { return true; }));
Stub::makeEmptyExcept('User', 'save', array('isValid' =&gt; true }));
?&gt;</pre> <ul> <li>
<code class="highlighter-rouge">param mixed</code> $class</li> <li>
<code class="highlighter-rouge">param string</code> $method</li> <li>
<code class="highlighter-rouge">param array</code> $params</li> <li>
<code class="highlighter-rouge">param bool|\PHPUnit_Framework_TestCase</code> $testCase</li> <li>
<code class="highlighter-rouge">return</code> object</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L143" target="_blank">See source</a></p> <h3 id="markasmock">markAsMock()</h3> <p><em>private static</em> markAsMock($mock, $reflection)</p> <p>Set __mock flag, if at all possible</p> <ul> <li>
<code class="highlighter-rouge">param object</code> $mock</li> <li>
<code class="highlighter-rouge">param \ReflectionClass</code> $reflection</li> <li>
<code class="highlighter-rouge">return</code> object</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L78" target="_blank">See source</a></p> <h3 id="never">never()</h3> <p><em>public static</em> never($params = null)</p> <p>Checks if a method never has been invoked</p> <p>If method invoked, it will immediately throw an exception.</p> <pre data-language="php">&lt;?php
$user = Stub::make('User', array('getName' =&gt; Stub::never(), 'someMethod' =&gt; function() {}));
$user-&gt;someMethod();
?&gt;</pre> <ul> <li>
<code class="highlighter-rouge">param mixed</code> $params</li> <li>
<code class="highlighter-rouge">return</code> StubMarshaler</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L631" target="_blank">See source</a></p> <h3 id="once">once()</h3> <p><em>public static</em> once($params = null)</p> <p>Checks if a method has been invoked exactly one time.</p> <p>If the number is less or greater it will later be checked in verify() and also throw an exception.</p> <pre data-language="php">&lt;?php
$user = Stub::make(
    'User',
    array(
        'getName' =&gt; Stub::once(function() { return 'Davert';}),
        'someMethod' =&gt; function() {}
    )
);
$userName = $user-&gt;getName();
$this-&gt;assertEquals('Davert', $userName);
?&gt;</pre> <ul> <li>
<code class="highlighter-rouge">param mixed</code> $params</li> <li>
<code class="highlighter-rouge">return</code> StubMarshaler</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L664" target="_blank">See source</a></p> <h3 id="update">update()</h3> <p><em>public static</em> update($mock, array $params)</p> <p>Replaces properties of current stub</p> <ul> <li>
<code class="highlighter-rouge">param \PHPUnit_Framework_MockObject_MockObject</code> $mock</li> <li>
<code class="highlighter-rouge">param array</code> $params</li> <li>
<code class="highlighter-rouge">return</code> mixed</li> <li>
<code class="highlighter-rouge">throws</code> \LogicException</li> </ul> <p><a href="https://github.com/Codeception/Codeception/blob/2.2/src/Codeception/Util/Stub.php#L500" target="_blank">See source</a></p> <div class="_attribution">
  <p class="_attribution-p">
    © 2011–2017 Michael Bodnarchuk and contributors<br>Licensed under the MIT License.<br>
    <a href="http://codeception.com/docs/reference/Stub" class="_attribution-link" target="_blank">http://codeception.com/docs/reference/Stub</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
