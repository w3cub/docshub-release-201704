
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>RTCPeerConnection.setLocalDescription - DOM - W3cubDocs</title>
  
  <meta name="description" content="This is an experimental technologyBecause this technology&#39;s specification has not stabilized, check the compatibility table for usage in various &hellip;">
  <meta name="keywords" content="rtcpeerconnection, setlocaldescription, -, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/dom/rtcpeerconnection/setlocaldescription/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/dom.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">DOM</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _mdn">
				
<h1>RTCPeerConnection.setLocalDescription</h1>
<div class="notice experimental"> <p> <strong>This is an experimental technology</strong><br>Because this technology's specification has not stabilized, check the <a href="#Browser_compatibility">compatibility table</a> for usage in various browsers. Also note that the syntax and behavior of an experimental technology is subject to change in future versions of browsers as the specification changes.</p> </div> <p><span class="seoSummary">The <code><strong>RTCPeerConnection.setLocalDescription()</strong></code> method changes the local description associated with the connection. This description specifies the properties of the local end of the connection, including the media format.</span> The actual connection is affected by this change, so it must be able to support both the old and new descriptions in order for the change to actually take place. The method takes a single parameter—the session description—and it returns a <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank"><code>Promise</code></a> which is fulfilled once the description has been changed, asynchronously.</p> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox">aPromise = pc.setLocalDescription(sessionDescription);

<em>pc</em>.setLocalDescription(<em>sessionDescription</em>, <em>successCallback</em>, <em>errorCallback</em>); 
</pre> <h3 id="Parameters">Parameters</h3> <dl> <dt><code>sessionDescription</code></dt> <dd>An <a title="The documentation about this has not yet been written; please consider contributing!" href="https://developer.mozilla.org/en-US/docs/Web/API/RTCSessionDescriptionInit" target="_blank"><code>RTCSessionDescriptionInit</code></a> or <a title="The RTCSessionDescription interface represents the parameters of a session. Each RTCSessionDescription consists of a description type indicating which part of the offer/answer negotiation process it describes and of the SDP descriptor of the session." href="../../rtcsessiondescription/"><code>RTCSessionDescription</code></a> which specifies the configuration to be applied to the local end of the connection.</dd> </dl> <h3 id="Return_value">Return value</h3> <p>A <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank"><code>Promise</code></a> which is fulfilled once the value of <a title="The read-only property RTCPeerConnection.localDescription returns an RTCSessionDescription describing the session for the local end of the connection. If it has not yet been set, this is null." href="../localdescription/"><code>RTCPeerConnection.localDescription</code></a> is successfully changed or rejected if the change cannot be applied (for example, if the specified description is incompatible with one or both of the peers on the connection).</p> <div class="note"> <p>The process of changing descriptions actually involves intermediary steps handled by the WebRTC layer to ensure that an active connection can be changed without losing the connection if the change does not succeed. See "<a href="../../webrtc_api/connectivity/#Pending_and_current_descriptions">Pending and current descriptions</a>" in <a href="../../webrtc_api/connectivity/">WebRTC connectivity</a> for more details on this process.</p> </div> <h3 id="Deprecated_parameters">Deprecated parameters</h3> <p>In older code and documentation, you may see a callback-based version of this function used. This has been deprecated and its use is <strong>strongly</strong> discouraged. You should update any existing code to use the <a title="The Promise object is used for asynchronous computations. A Promise represents a value which may be available now, or in the future, or never." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank"><code>Promise</code></a>-based version of <code>setLocalDescription()</code> instead. The parameters for the older form of <code>setLocalDescription()</code> are described below, to aid in updating existing code.</p> <dl> <dt>
<code>successCallback</code> 
</dt> <dd>A JavaScript <a title="The Function constructor creates a new Function object. In JavaScript every function is actually a Function object." href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank"><code>Function</code></a> which accepts no input parameters to be be called once the description has been successfully set. At that time, the offer can be sent to a remote peer via the signaling server.</dd> <dt>
<code>errorCallback</code> 
</dt> <dd>A function matching the signautre <code>RTCPeerConnectionErrorCallback</code> which gets called if the description can't be set. It takes one input parameter: <ul> <li>
<code>errorInformation</code>: A <a title="DOMString is a UTF-16 String. As JavaScript already uses such strings, DOMString is mapped directly to a String." href="../../domstring/"><code>DOMString</code></a> describing the reason why the description couldn't be set.</li> </ul> </dd> </dl> <p>This deprecated form of the method returns instantaneously without waiting for the actual setting to be done: in case of success, the <code>successCallback</code> will be called; in case of failure, the <code>errorCallback</code> will be called.</p> <h3 id="Deprecated_exceptions">Deprecated exceptions</h3> <p>When using the deprecated callback-based version of <code>setLocalDescription()</code>, the following exceptions may occur:</p> <dl> <dt>
<code>InvalidStateError</code> 
</dt> <dd>The connection's <a title='The read-only signalingState property on the RTCPeerConnection interface returns one of the string values specified by the RTCSignalingState enum; these values describe the state of the signaling process on the local end of the connection while connecting or reconnecting to another peer. See "Signaling" in Lifetime of a WebRTC session for more details about the signaling process.' href="../signalingstate/"><code>signalingState</code></a> is <code>"closed"</code>, indicating that the connection is not currently open, so negotiation cannot take place.</dd> <dt>
<code>InvalidSessionDescriptionError</code> 
</dt> <dd>The <a title="The RTCSessionDescription interface represents the parameters of a session. Each RTCSessionDescription consists of a description type indicating which part of the offer/answer negotiation process it describes and of the SDP descriptor of the session." href="../../rtcsessiondescription/"><code>RTCSessionDescription</code></a> specified by the <code>sessionDescription</code> parameter is invalid.</dd> </dl> <h2 id="Example">Example</h2> <p>In the example below, we see the implementation of a handler for the <code><a title="/en-US/docs/Web/Events/negotiationneeded" href="https://developer.mozilla.org/en-US/docs/Web/Events/negotiationneeded" target="_blank">negotiationneeded</a></code> event.</p> <pre data-language="js">function handleNegotiationNeededEvent() {
  pc.createOffer().then(function(offer) {
    return pc.setLocalDescription(offer);
  })
  .then(function() {
    // Send the offer to the remote peer using the signaling server
  })
  .catch(reportError);
}</pre> <p>This begins by creating an offer by calling <a title="The createOffer() method of the RTCPeerConnection interface initiates the creation of an SDP offer which includes information about any MediaStreamTracks already attached to the WebRTC session, codec and options supported by the browser, and any candidates already gathered by the ICE agent, for the purpose of being sent over the signaling channel to a potential peer to request a connection or to update the configuration of an existing connection." href="../createoffer/"><code>createOffer()</code></a>; when that succeeds, we call <code>setLocalDescription()</code>. The fulfillment handler for that promise can then send the newly-created offer along to the other peer using the signaling server.</p> <h2 id="Specifications">Specifications</h2> <table class="standard-table"> <thead> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> </thead> <tbody> <tr> <td><a hreflang="en" class="external" lang="en" href="https://w3c.github.io/webrtc-pc/#widl-RTCPeerConnection-setLocalDescription-void-RTCSessionDescription-description-VoidFunction-successCallback-RTCPeerConnectionErrorCallback-failureCallback" target="_blank">WebRTC 1.0: Real-time Communication Between Browser<br><small lang="en-US">The definition of 'RTCPeerConnection.setLocalDescription()' in that specification.</small></a></td> <td><span class="spec-WD">Working Draft</span></td> <td>Initial specification.</td> </tr> <tr> <td><a hreflang="en" class="external" lang="en" href="https://w3c.github.io/webrtc-pc/#widl-RTCPeerConnection-setLocalDescription-Promise-void--RTCSessionDescriptionInit-description" target="_blank">WebRTC 1.0: Real-time Communication Between Browser<br><small lang="en-US">The definition of 'RTCPeerConnection.setLocalDescription()' in that specification.</small></a></td> <td><span class="spec-WD">Working Draft</span></td> <td>Initial specification.</td> </tr> </tbody> </table> <h2 id="Browser_compatibility">Browser compatibility</h2>  <div id="compat-desktop"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Edge</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari</th> </tr> <tr> <td>Basic support</td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>
<a title="Released on 2013-06-25." href="https://developer.mozilla.org/en-US/Firefox/Releases/22" target="_blank">22</a> (22) [1]</td> <td><span style="color: #f00;">No support</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> <tr> <td>Promise-based version</td> <td>50.0</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table> </div> <div id="compat-mobile"> <table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Android Webview</th> <th>Edge</th> <th>Firefox Mobile (Gecko)</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> <th>Chrome for Android</th> </tr> <tr> <td>Basic support</td> <td><span style="color: #f00;">No support</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> <td>22.0 (22)</td> <td><span style="color: #f00;">No support</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Please update this with the earliest version of support." style="color: #888;">(Yes)</span></td> </tr> <tr> <td>Promie-based version</td> <td><span style="color: #f00;">No support</span></td> <td>50.0</td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td><span title="Compatibility unknown; please update this." style="color: rgb(255, 153, 0);">?</span></td> <td>50.0</td> </tr> </tbody> </table> </div> <p>[1] Though this property is not prefixed, the interface it belongs to is, until Firefox 44.</p> <h2 id="See_also">See also</h2> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/API/WebRTC" target="_blank">WebRTC</a></li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/setLocalDescription%24edit" class="_attribution-link" target="_blank">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2017 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/setLocalDescription" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/setLocalDescription</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
