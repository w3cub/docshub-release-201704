
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Exception - Ruby 2.3 - W3cubDocs</title>
  
  <meta name="description" content="Descendants of class Exception are used to communicate between Kernel#raise and rescue statements in begin ... end blocks. Exception objects carry &hellip;">
  <meta name="keywords" content="class, exception, -, ruby, ruby~2.3">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ruby~2.3/exception/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/ruby~2.3.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ruby~2.3/" class="_nav-link" title="" style="margin-left:0;">Ruby 2.3</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _rdoc">
				
<h1 id="class-Exception" class="class"> class Exception </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="../object/">Object</a></dd>
</dl> <section class="description"> <p>Descendants of class <a href="../exception/">Exception</a> are used to communicate between <a href="../kernel/#method-i-raise">Kernel#raise</a> and <code>rescue</code> statements in <code>begin ... end</code> blocks. <a href="../exception/">Exception</a> objects carry information about the exception – its type (the exception's class name), an optional descriptive string, and optional traceback information. <a href="../exception/">Exception</a> subclasses may add additional information like <a href="../nameerror/#method-i-name">NameError#name</a>.</p> <p>Programs may make subclasses of <a href="../exception/">Exception</a>, typically of <a href="../standarderror/">StandardError</a> or <a href="../runtimeerror/">RuntimeError</a>, to provide custom classes and add additional information. See the subclass list below for defaults for <code>raise</code> and <code>rescue</code>.</p> <p>When an exception has been raised but not yet handled (in <code>rescue</code>, <code>ensure</code>, <code>at_exit</code> and <code>END</code> blocks) the global variable <code>$!</code> will contain the current exception and <code>$@</code> contains the current exception's backtrace.</p> <p>It is recommended that a library should have one subclass of <a href="../standarderror/">StandardError</a> or <a href="../runtimeerror/">RuntimeError</a> and have specific exception types inherit from it. This allows the user to rescue a generic exception type to catch all exceptions the library may raise even if future versions of the library add new exception subclasses.</p> <p>For example:</p> <pre class="ruby" data-language="ruby">class MyLibrary
  class Error &lt; RuntimeError
  end

  class WidgetError &lt; Error
  end

  class FrobError &lt; Error
  end

end
</pre> <p>To handle both WidgetError and FrobError the library user can rescue MyLibrary::Error.</p> <p>The built-in subclasses of <a href="../exception/">Exception</a> are:</p> <ul>
<li> <p><a href="../nomemoryerror/">NoMemoryError</a></p> </li>
<li> <p><a href="../scripterror/">ScriptError</a></p> <ul>
<li> <p><a href="../loaderror/">LoadError</a></p> </li>
<li> <p><a href="../notimplementederror/">NotImplementedError</a></p> </li>
<li> <p><a href="../syntaxerror/">SyntaxError</a></p> </li>
</ul> </li>
<li> <p><a href="../securityerror/">SecurityError</a></p> </li>
<li> <p><a href="../signalexception/">SignalException</a></p> <ul><li> <p><a href="../interrupt/">Interrupt</a></p> </li></ul> </li>
<li> <p><a href="../standarderror/">StandardError</a> – default for <code>rescue</code></p> <ul>
<li> <p><a href="../argumenterror/">ArgumentError</a></p> <ul><li> <p><a href="../uncaughtthrowerror/">UncaughtThrowError</a></p> </li></ul> </li>
<li> <p><a href="../encodingerror/">EncodingError</a></p> </li>
<li> <p><a href="../fibererror/">FiberError</a></p> </li>
<li> <p><a href="../ioerror/">IOError</a></p> <ul><li> <p><a href="../eoferror/">EOFError</a></p> </li></ul> </li>
<li> <p><a href="../indexerror/">IndexError</a></p> <ul>
<li> <p><a href="../keyerror/">KeyError</a></p> </li>
<li> <p><a href="../stopiteration/">StopIteration</a></p> </li>
</ul> </li>
<li> <p><a href="../localjumperror/">LocalJumpError</a></p> </li>
<li> <p><a href="../nameerror/">NameError</a></p> <ul><li> <p><a href="../nomethoderror/">NoMethodError</a></p> </li></ul> </li>
<li> <p><a href="../rangeerror/">RangeError</a></p> <ul><li> <p><a href="../floatdomainerror/">FloatDomainError</a></p> </li></ul> </li>
<li> <p><a href="../regexperror/">RegexpError</a></p> </li>
<li> <p><a href="../runtimeerror/">RuntimeError</a> – default for <code>raise</code></p> </li>
<li> <p><a href="../systemcallerror/">SystemCallError</a></p> <ul><li> <p>Errno::*</p> </li></ul> </li>
<li> <p><a href="../threaderror/">ThreadError</a></p> </li>
<li> <p><a href="../typeerror/">TypeError</a></p> </li>
<li> <p><a href="../zerodivisionerror/">ZeroDivisionError</a></p> </li>
</ul> </li>
<li> <p><a href="../systemexit/">SystemExit</a></p> </li>
<li> <p><a href="../systemstackerror/">SystemStackError</a></p> </li>
<li> <p>fatal – impossible to rescue</p> </li>
</ul> </section> <section id="5Buntitled-5D" class="documentation-section"> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-c-exception"> <span class="method-callseq"> exception(string) → an_exception or exc </span> </div> <div class="method-description"> <p>With no argument, or if the argument is the same as the receiver, return the receiver. Otherwise, create a new exception object of the same class as the receiver, but with a message equal to <code>string.to_str</code>.</p> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-json_create"> <span class="method-name">json_create</span><span class="method-args">(object)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Deserializes <a href="../json/">JSON</a> string by constructing new <a href="../exception/">Exception</a> object with message <code>m</code> and backtrace <code>b</code> serialized with <code>to_json</code></p> <div class="method-source-code" id="json_create-source"> <pre class="ruby" data-language="ruby"># File ext/json/lib/json/add/exception.rb, line 10
def self.json_create(object)
  result = new(object['m'])
  result.set_backtrace object['b']
  result
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-c-new"> <span class="method-callseq"> new(msg = nil) → exception </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Construct a new <a href="../exception/">Exception</a> object, optionally passing in a message.</p> <div class="method-source-code" id="new-source"> <pre class="c" data-language="c">static VALUE
exc_initialize(int argc, VALUE *argv, VALUE exc)
{
    VALUE arg;

    rb_scan_args(argc, argv, "01", &amp;arg);
    rb_ivar_set(exc, id_mesg, arg);
    rb_ivar_set(exc, id_bt, Qnil);

    return exc;
}</pre> </div> </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-i-3D-3D"> <span class="method-callseq"> exc == obj → true or false </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Equality—If <em>obj</em> is not an <code>Exception</code>, returns <code>false</code>. Otherwise, returns <code>true</code> if <em>exc</em> and <em>obj</em> share same class, messages, and backtrace.</p> <div class="method-source-code" id="3D-3D-source"> <pre class="c" data-language="c">static VALUE
exc_equal(VALUE exc, VALUE obj)
{
    VALUE mesg, backtrace;

    if (exc == obj) return Qtrue;

    if (rb_obj_class(exc) != rb_obj_class(obj)) {
        int status = 0;

        obj = rb_protect(try_convert_to_exception, obj, &amp;status);
        if (status || obj == Qundef) {
            rb_set_errinfo(Qnil);
            return Qfalse;
        }
        if (rb_obj_class(exc) != rb_obj_class(obj)) return Qfalse;
        mesg = rb_check_funcall(obj, id_message, 0, 0);
        if (mesg == Qundef) return Qfalse;
        backtrace = rb_check_funcall(obj, id_backtrace, 0, 0);
        if (backtrace == Qundef) return Qfalse;
    }
    else {
        mesg = rb_attr_get(obj, id_mesg);
        backtrace = exc_backtrace(obj);
    }

    if (!rb_equal(rb_attr_get(exc, id_mesg), mesg))
        return Qfalse;
    if (!rb_equal(exc_backtrace(exc), backtrace))
        return Qfalse;
    return Qtrue;
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-as_json"> <span class="method-name">as_json</span><span class="method-args">(*)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns a hash, that will be turned into a <a href="../json/">JSON</a> object and represent this object.</p> <div class="method-source-code" id="as_json-source"> <pre class="ruby" data-language="ruby"># File ext/json/lib/json/add/exception.rb, line 18
def as_json(*)
  {
    JSON.create_id =&gt; self.class.name,
    'm'            =&gt; message,
    'b'            =&gt; backtrace,
  }
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-backtrace"> <span class="method-callseq"> backtrace → array </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns any backtrace associated with the exception. The backtrace is an array of strings, each containing either “filename:lineNo: in `method''' or “filename:lineNo.''</p> <pre class="ruby" data-language="ruby">def a
  raise "boom"
end

def b
  a()
end

begin
  b()
rescue =&gt; detail
  print detail.backtrace.join("\n")
end
</pre> <p><em>produces:</em></p> <pre>prog.rb:2:in `a'
prog.rb:6:in `b'
prog.rb:10</pre> <div class="method-source-code" id="backtrace-source"> <pre class="c" data-language="c">static VALUE
exc_backtrace(VALUE exc)
{
    VALUE obj;

    obj = rb_attr_get(exc, id_bt);

    if (rb_backtrace_p(obj)) {
        obj = rb_backtrace_to_str_ary(obj);
        /* rb_ivar_set(exc, id_bt, obj); */
    }

    return obj;
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-backtrace_locations"> <span class="method-callseq"> backtrace_locations → array </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns any backtrace associated with the exception. This method is similar to <a href="../exception/#method-i-backtrace">#backtrace</a>, but the backtrace is an array of</p> <pre>Thread::Backtrace::Location.</pre> <p>Now, this method is not affected by <a href="../exception/#method-i-set_backtrace">#set_backtrace</a>.</p> <div class="method-source-code" id="backtrace_locations-source"> <pre class="c" data-language="c">static VALUE
exc_backtrace_locations(VALUE exc)
{
    VALUE obj;

    obj = rb_attr_get(exc, id_bt_locations);
    if (!NIL_P(obj)) {
        obj = rb_backtrace_to_location_ary(obj);
    }
    return obj;
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-cause"> <span class="method-callseq"> cause → an_exception or nil </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns the previous exception ($!) at the time this exception was raised. This is useful for wrapping exceptions and retaining the original exception information.</p> <div class="method-source-code" id="cause-source"> <pre class="c" data-language="c">static VALUE
exc_cause(VALUE exc)
{
    return rb_attr_get(exc, id_cause);
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-exception"> <span class="method-callseq"> exception(string) → an_exception or exc </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>With no argument, or if the argument is the same as the receiver, return the receiver. Otherwise, create a new exception object of the same class as the receiver, but with a message equal to <code>string.to_str</code>.</p> <div class="method-source-code" id="exception-source"> <pre class="c" data-language="c">static VALUE
exc_exception(int argc, VALUE *argv, VALUE self)
{
    VALUE exc;

    if (argc == 0) return self;
    if (argc == 1 &amp;&amp; self == argv[0]) return self;
    exc = rb_obj_clone(self);
    exc_initialize(argc, argv, exc);

    return exc;
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-inspect"> <span class="method-callseq"> inspect → string </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Return this exception's class name and message</p> <div class="method-source-code" id="inspect-source"> <pre class="c" data-language="c">static VALUE
exc_inspect(VALUE exc)
{
    VALUE str, klass;

    klass = CLASS_OF(exc);
    exc = rb_obj_as_string(exc);
    if (RSTRING_LEN(exc) == 0) {
        return rb_str_dup(rb_class_name(klass));
    }

    str = rb_str_buf_new2("#&lt;");
    klass = rb_class_name(klass);
    rb_str_buf_append(str, klass);
    rb_str_buf_cat(str, ": ", 2);
    rb_str_buf_append(str, exc);
    rb_str_buf_cat(str, "&gt;", 1);

    return str;
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-message"> <span class="method-callseq"> message → string </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns the result of invoking <code>exception.to_s</code>. Normally this returns the exception's message or name. By supplying a to_str method, exceptions are agreeing to be used where Strings are expected.</p> <div class="method-source-code" id="message-source"> <pre class="c" data-language="c">static VALUE
exc_message(VALUE exc)
{
    return rb_funcallv(exc, idTo_s, 0, 0);
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-set_backtrace"> <span class="method-callseq"> set_backtrace(backtrace) → array </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Sets the backtrace information associated with <code>exc</code>. The <code>backtrace</code> must be an array of String objects or a single String in the format described in <a href="../exception/#method-i-backtrace">#backtrace</a>.</p> <div class="method-source-code" id="set_backtrace-source"> <pre class="c" data-language="c">static VALUE
exc_set_backtrace(VALUE exc, VALUE bt)
{
    return rb_ivar_set(exc, id_bt, rb_check_backtrace(bt));
}</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-to_json"> <span class="method-name">to_json</span><span class="method-args">(*args)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Stores class name (Exception) with message <code>m</code> and backtrace array <code>b</code> as <a href="../json/">JSON</a> string</p> <div class="method-source-code" id="to_json-source"> <pre class="ruby" data-language="ruby"># File ext/json/lib/json/add/exception.rb, line 28
def to_json(*args)
  as_json.to_json(*args)
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-to_s"> <span class="method-callseq"> to_s → string </span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns exception's message (or the name of the exception if no message is set).</p> <div class="method-source-code" id="to_s-source"> <pre class="c" data-language="c">static VALUE
exc_to_s(VALUE exc)
{
    VALUE mesg = rb_attr_get(exc, idMesg);

    if (NIL_P(mesg)) return rb_class_name(CLASS_OF(exc));
    return rb_String(mesg);
}</pre> </div> </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core © 1993–2016 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library © contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
