
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>8 Built-In Objects - Erlang 18 - W3cubDocs</title>
  
  <meta name="description" content=" This section describes the built-in objects of the graphics interface. The following objects exist&#58; ">
  <meta name="keywords" content="built-in, objects, -, erlang, erlang~18">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/erlang~18/lib/gs-1.6/doc/html/gs_chapter8/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/erlang~18.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/erlang~18/" class="_nav-link" title="" style="margin-left:0;">Erlang 18</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _erlang">
				
<h1>8 Built-In Objects</h1> <h2 id="id64652">8.1 Overview</h2> <p>This section describes the built-in objects of the graphics interface. The following objects exist:</p> <dl> <dt><strong><strong>Window</strong></strong></dt> <dd>An ordinary window.</dd> <dt><strong><strong>Button</strong></strong></dt> <dd>A simple press button.</dd> <dt><strong><strong>Checkbutton</strong></strong></dt> <dd>A button with a check-mark indicator.</dd> <dt><strong><strong>Radiobutton</strong></strong></dt> <dd>A button with an indicator that has an only-one-selected-at-a-time property.</dd> <dt><strong><strong>Label</strong></strong></dt> <dd>Shows a text or bitmap.</dd> <dt><strong><strong>Frame</strong></strong></dt> <dd>A plain container object. It is used for logical and visual grouping of objects.</dd> <dt><strong><strong>Entry</strong></strong></dt> <dd>A one-line object for entering text.</dd> <dt><strong><strong>Listbox</strong></strong></dt> <dd>A list of text strings.</dd> <dt><strong><strong>Canvas</strong></strong></dt> <dd>A drawing area which contains light-weight objects such as rectangle, line, etc.</dd> <dt><strong><strong>Menu</strong></strong></dt> <dd>A collection of objects for constructing pull-down and pop-up menus.</dd> <dt><strong><strong>Grid</strong></strong></dt> <dd>An object for showing tables. A kind of multi-column listbox.</dd> <dt><strong><strong>Editor</strong></strong></dt> <dd>A multi-line text editor.</dd> <dt><strong><strong>Scale</strong></strong></dt> <dd>To select a value within a range.</dd> </dl> <p>Some objects can act as container objects. The following table describes these relationships:</p> <table> <tr> <td><strong>Objects</strong></td> <td><strong>Valid Parents</strong></td> </tr> <tr> <td>window</td> <td>window, gs</td> </tr> <tr> <td>buttons, canvas, editor, entry, frame, grid, label, listbox, menubar, scale</td> <td>frame, window</td> </tr> <tr> <td>arc, image, line, oval, polygon, rectangle, text</td> <td>canvas</td> </tr> <tr> <td>menubutton</td> <td>menubar, window, frame</td> </tr> <tr> <td>gridline</td> <td>grid</td> </tr> <tr> <td>menuitem</td> <td>menu</td> </tr> <tr> <td>menu</td> <td>menubutton, menuitem (with {itemtype, cascade}), window, frame (the last two are for pop-up menus)</td> </tr> </table> <em>Table 8.1: Relations Between Objects and Container Objects</em> <h2 id="id64962">8.2 Generic Options</h2> <p>Most objects have a common subset of options and will be referred to as generic options. They apply to most objects.</p> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>beep</td> <td>&lt;unspec&gt;</td> <td>A beep will sound. Applies to all objects.</td> </tr> <tr> <td>{bg, Color}</td> <td>&lt;unspec&gt;</td> <td>Background color. Applies to objects which have a background color.</td> </tr> <tr> <td>{data, Term}</td> <td>[]</td> <td>Always delivered with the event in the data field. Applies to all objects.</td> </tr> <tr> <td>{default,Objecttype,{Key,Value}}</td> <td>&lt;unspec&gt;</td> <td>Applies to all container objects. Specifies the default value for an option for children of type Objecttype.</td> </tr> <tr> <td>{enable, Bool}</td> <td>true</td> <td>Objects can be enabled or disabled. A disabled object cannot be clicked on, and text cannot be entered. Applies to buttons, menuitem, entry, editor, scale.</td> </tr> <tr> <td>{font, Font}</td> <td>&lt;unspec&gt;</td> <td>Applies to all text related objects and the grid.</td> </tr> <tr> <td>{fg, Color}</td> <td>&lt;unspec&gt;</td> <td>Foreground color. Applies to objects which have a foreground color.</td> </tr> <tr> <td>flush</td> <td>&lt;unspec&gt;</td> <td>Ensures that front-end and back-end are synchronized. Applies to all objects.</td> </tr> <tr> <td>{setfocus, Bool}</td> <td>&lt;unspec&gt;</td> <td>Set or remove keyboard focus to this object. Applies to objects which can receive keyboard events.</td> </tr> </table> <em>Table 8.2: Generic Options</em> <p>The following options apply to objects which can have a <strong>frame</strong> as parent. Coordinates are relative to the parent.</p> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{cursor, Cursor}</td> <td>parent</td> <td>The appearance of the mouse cursor.</td> </tr> <tr> <td>{height, Int}</td> <td>&lt;unspec&gt;</td> <td>The height in pixels.</td> </tr> <tr> <td>{pack_x, Column|{StartColumn,EndColumn}}</td> <td>&lt;unspec&gt;</td> <td>Packing position. See The Packer section.</td> </tr> <tr> <td>{pack_y, row|{Startrow,Endrow}}</td> <td>&lt;unspec&gt;</td> <td>Packing position. See The Packer section.</td> </tr> <tr> <td>{pack_xy, {Column,row}}</td> <td>&lt;unspec&gt;</td> <td>Packing position. See The Packer section.</td> </tr> <tr> <td>{width, Int}</td> <td>&lt;unspec&gt;</td> <td>The width in pixels.</td> </tr> <tr> <td>{x, Int}</td> <td>&lt;unspec&gt;</td> <td>The x coordinate within the parent objects frame in pixels. 0 is to the left.</td> </tr> <tr> <td>{y, Int}</td> <td>&lt;unspec&gt;</td> <td>The y coordinate in pixels. 0 is at the top.</td> </tr> </table> <em>Table 8.3: Generic Options (Frame as Parent)</em> <table> <tr> <td><strong>Config-Only</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>lower</td> <td>Lowers this object to the bottom in the visual hierarchy.</td> </tr> <tr> <td>raise</td> <td>Lowers this object in the visual hierarchy.</td> </tr> </table> <em>Table 8.4: Generic Config-Only Options</em> <p>The following table lists generic Read-Only options:</p> <table> <tr> <td><strong>Read-Only</strong></td> <td><strong>Return</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>children</td> <td>[ObjectId1, ..., ObjectIdN]</td> <td>All children</td> </tr> <tr> <td>{choose_font,Font}</td> <td>Font</td> <td>Return the font that is actually used if a particular font is given.</td> </tr> <tr> <td>id</td> <td>ObjectId</td> <td>Return the object id for this object. Useful if the object is a named object.</td> </tr> <tr> <td>{font_wh,{Font,Text}}</td> <td>{Width,Height}</td> <td>Return the size of a text in a specified font. It returns the size of the font that is actually chosen by the back-end.</td> </tr> <tr> <td>type</td> <td>Atom</td> <td>The type of this object.</td> </tr> <tr> <td>parent</td> <td>ObjectId</td> <td>The parent of this object.</td> </tr> </table> <em>Table 8.5: Generic Read-Only Options</em> <h4>Generic Event Options</h4> <p>The table below lists all generic event options: </p> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> </tr> <tr> <td>{buttonpress, Bool}</td> <td>false</td> </tr> <tr> <td>{buttonrelease, Bool}</td> <td>false</td> </tr> <tr> <td>{enter, Bool}</td> <td>false</td> </tr> <tr> <td>{leave, Bool}</td> <td>false</td> </tr> <tr> <td>{keypress, Bool}</td> <td>false</td> </tr> <tr> <td>{motion, Bool}</td> <td>false</td> </tr> </table> <em>Table 8.6: Generic Event Options</em> <h2 id="id66015">8.3 Window</h2> <p>The basic object is the window object. It is the most common container object. All graphical applications use at least one (top-level) window.</p>   <em>Figure 8.1: Empty Window titled "A Window".</em> <p>The following tables show all window specific options:</p> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{bg, Color}</td> <td>&lt;unspec&gt;</td> <td>{R,G,B} or a color name</td> </tr> <tr> <td>{configure,Bool}</td> <td>false</td> <td>Will generate a <code class="code">configure</code>event when the window has been resized or moved. The <code class="code">Args</code>field contains [Width,Height,X,Y|_]</td> </tr> <tr> <td>{destroy,Bool}</td> <td>true</td> <td>Will generate a <code class="code">destroy</code>event when the window is destroyed from the window manager. All GS applications should handle this event.</td> </tr> <tr> <td>{iconname, String}</td> <td>&lt;unspec&gt;</td> <td> </td> </tr> <tr> <td>{iconify, Bool}</td> <td>false</td> <td> </td> </tr> <tr> <td>{map, Bool}</td> <td>false</td> <td>Make it visible on the screen</td> </tr> <tr> <td>{title, String}</td> <td>&lt;unspec&gt;</td> <td>The title of the window. The default is the internal widget name which is platform specific.</td> </tr> </table> <em>Table 8.7: Window Options</em> <table> <tr> <td><strong>Config-Only</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>raise</td> <td>Raise window on top of all other windows.</td> </tr> <tr> <td>lower</td> <td>Lower window to background.</td> </tr> </table> <em>Table 8.8: Window Config-Only Options</em> <p>The following example shows how to create a window and configure it to enable various events.</p> <div class="example"><pre>

-module(ex7).
-copyright('Copyright (c) 1991-97 Ericsson Telecom AB').
-vsn('$Revision: /main/release/2 $ ').

-export([mk_window/0]).

mk_window() -&gt;
    S= gs:start(),
    Win= gs:create(window,S,[{motion,true},{map,true}]),
    gs:config(Win,[{configure,true},{keypress,true}]),
    gs:config(Win,[{buttonpress,true}]),
    gs:config(Win,[{buttonrelease,true}]),
    event_loop(Win).

event_loop(Win) -&gt;      
    receive
        {gs,Win,motion,Data,[X,Y | Rest]} -&gt;
            %% mouse moved to position X Y
            io:format("mouse moved to X:~w  Y:~w~n",[X,Y]);
        {gs,Win,configure,Data,[W,H | Rest]} -&gt;
            %% window was resized by user
            io:format("window resized W:~w  H:~w~n",[W,H]);
        {gs,Win,buttonpress,Data,[1,X,Y | Rest]} -&gt; 
            %% button 1 was pressed at location X Y
            io:format("button 1 pressed X:~w  Y:~w~n",[X,Y]);
        {gs,Win,buttonrelease,Data,[_,X,Y | Rest]} -&gt;
            %% Any button (1-3) was released over X Y
            io:format("Any button released X:~w  Y:~w~n",[X,Y]);
        {gs,Win,keypress,Data,[a | Rest]} -&gt; 
            %% key `a' was pressed in window
            io:format("key a was pressed in window~n");
        {gs,Win,keypress,Data,[_,65,1 | Rest]} -&gt;
            %% Key shift-a
            io:format("shift-a was pressed in window~n");
        {gs,Win,keypress,Data,[c,_,_,1 | Rest]} -&gt;
            %% CTRL_C pressed
            io:format("CTRL_C was pressed in window~n");
        {gs,Win,keypress,Data, ['Return' | Rest]} -&gt;
            %% Return key pressed
            io:format("Return key was pressed in window~n")
        end,
    event_loop(Win).
</pre></div> <h2 id="id67753">8.4 Button</h2>   <em>Figure 8.2: Radio Buttons, Check Buttons, and Ordinary Button</em> <p>Buttons are the simplest and the most commonly used objects. You press them and get a click event. The following tables show the options for all button types.</p> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{align, Align}</td> <td>center</td> <td>Text alignment within the frame.</td> </tr> <tr> <td>{justify, left | center | right}</td> <td>center</td> <td>Justification is only valid when there are several lines of text.</td> </tr> <tr> <td>{label, Label}</td> <td>&lt;unspec&gt;</td> <td>Text or image to show.</td> </tr> <tr> <td>{select, Bool}</td> <td>false</td> <td>Check buttons and radio buttons. true means that the button is selected.</td> </tr> <tr> <td>{underline, Int}</td> <td>&lt;unspec&gt;</td> <td>Underline character N to indicate a keyboard accelerator.</td> </tr> <tr> <td>{group, Atom}</td> <td>&lt;unspec&gt;</td> <td>Radio button: only one per group is selected at one time. Check button: All in the same group are selected automatically.</td> </tr> <tr> <td>{value, Atom}</td> <td>&lt;unspec&gt;</td> <td>Radio buttons only. Groups radio buttons together within a group.</td> </tr> </table> <em>Table 8.9: Options for all Button Types</em> <table> <tr> <td><strong>Config-Only</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>flash</td> <td>Flash button</td> </tr> <tr> <td>invoke</td> <td>Explicit button press.</td> </tr> <tr> <td>toggle</td> <td>Check buttons only. Toggles select value.</td> </tr> </table> <em>Table 8.10: Config-Only Options for all Button types</em> <table> <tr> <td><strong>Buttontype</strong></td> <td><strong>Event</strong></td> </tr> <tr> <td>normal</td> <td>{gs, itemId, click, Data, [Text| _]}</td> </tr> <tr> <td>check</td> <td>{gs, itemId, click, Data, [Text, Group, Bool | _]}</td> </tr> <tr> <td>radio</td> <td>{gs, itemId, click, Data, [Text, Group, Value | _]}</td> </tr> </table> <em>Table 8.11: &gt;Events for all Button types</em> <p>Buttons and check buttons are simple to understand, radio buttons are more difficult. Each radio button has a group and a value option. The group option is used to group together two or more radio buttons. Normally, each radio button within a group has a unique value which means that only one radio button can be selected at a time. If two (or more) radio buttons share the same value and one of them is selected, then both will be selected and all others are de-selected. The following short example shows how to program radio button logic in a situation where two of them share the same value.</p> <div class="example"><pre>

-module(ex8).
-copyright('Copyright (c) 1991-97 Ericsson Telecom AB').
-vsn('$Revision: /main/release/2 $ ').

-export([start/0]).

start() -&gt;
    gs:window(win,gs:start(),{map,true}),
    gs:radiobutton(rb1,win,[{label,{text,"rb1"}},{value,a},{y,0}]),
    gs:radiobutton(rb2,win,[{label,{text,"rb2"}},{value,a},{y,30}]),
    gs:radiobutton(rb3,win,[{label,{text,"rb3"}},{value,b},{y,60}]),
    rb_loop().

rb_loop() -&gt;
    receive
        {gs,Any_Rb,click,Data,[Text, Grp, a | Rest]} -&gt;
            io:format("either rb1 or rb2 is on.~n",[]),
            rb_loop();
        {gs,rb3,click,Data,[Text, Grp, b | Rest]} -&gt;
            io:format("rb3 is selected.~n",[]),
            rb_loop()
    end.
</pre></div>   <em>Figure 8.3: Radio Button Group with Last Button Selected</em> <p>The example shown creates three radio buttons which are members of the same group. The default behavior is that all radio buttons created by the same process are members of the same group. Normally, only one in a group may be selected at the same time, but since we defined the value-option to have the same value for <code class="code">rb1</code> and <code class="code">rb2</code>, they will both be selected/de-selected simultaneously. The normal radio button group behavior is that all radio buttons within the same group have unique default values.</p> <h2 id="id68261">8.5 Label</h2> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{align,Align}</td> <td>center</td> <td>How the text is aligned within the frame.</td> </tr> <tr> <td>{justify,left|right|center}</td> <td>left</td> <td>How to justify several lines of text.</td> </tr> <tr> <td>{label,Label}</td> <td>&lt;unspec&gt;</td> <td>Text or image to show.</td> </tr> <tr> <td>{underline,Int}</td> <td>&lt;unspec&gt;</td> <td>Underline character N to indicate a keyboard accelerator.</td> </tr> </table> <em>Table 8.12: Label Options</em> <p>A label is a simple text field which is used to display text to the user. It is possible to have several lines of text by inserting newline '\ ' characters between each line. The label object does not automatically adjust its size so that text will fit inside. This has to be done manually, or the text may be clipped at the edges.</p> <h2 id="id68432">8.6 Frame</h2> <p>The frame object acts as a container for other objects. Its main use is to logically and visually group objects together. Grouped objects can then be moved, displayed, or hidden in one single operation.</p> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{bw,Int}</td> <td>&lt;unspec&gt;</td> <td>Border width</td> </tr> <tr> <td>{packer_x,PackList}</td> <td>&lt;unspec&gt;</td> <td>Makes the frame pack its children. See the packer section.</td> </tr> <tr> <td>{packer_y,PackList}</td> <td>&lt;unspec&gt;</td> <td>Makes the frame pack its children. See the packer section.</td> </tr> </table> <em>Table 8.13: Frame Options</em> <p>It is possible to have frame objects within frame objects so that large hierarchical structures of objects can be created.</p> <h2 id="id68577">8.7 Entry</h2>   <em>Figure 8.4: Label and Entry Objects for User Input</em> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{justify, left|right|center}</td> <td>left</td> <td>Text justification in entry field.</td> </tr> <tr> <td>{text, String}</td> <td>&lt;unspec&gt;</td> <td>Use this option to initially set some text, and to read the text.</td> </tr> </table> <em>Table 8.14: Entry Options</em> <p>Entrys are used to prompt the user for text input.</p> <table> <tr> <td><strong>Config-Only</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{delete, {From, To}}</td> <td>Deletes the characters within index {From,To}.</td> </tr> <tr> <td>{delete, last}</td> <td>Deletes the last character.</td> </tr> <tr> <td>{delete, Index}</td> <td>Deletes the character at position Index.</td> </tr> <tr> <td>{insert, {Index, String}}</td> <td>Inserts text at the specific character position. Index starts from 0.</td> </tr> <tr> <td>{select, {From, To}}</td> <td>Selects a range.</td> </tr> <tr> <td>{select, clear}</td> <td>De-selects selected text.</td> </tr> </table> <em>Table 8.15: Entry Config-Only Options</em> <p>A common usage of the entry object is to listen for the 'Return' key event and then read the text field. The following example shows a simple dialog which prompts the user for a name and returns the tuple <code class="code">{name,Name}</code> when a name is entered, or <code class="code">cancel</code> if the cancel button is pressed.</p> <div class="example"><pre>

-module(ex9).
-copyright('Copyright (c) 1991-97 Ericsson Telecom AB').
-vsn('$Revision: /main/release/2 $ ').

-export([start/0,init/1]).

start() -&gt;
    spawn(ex9, init, [self()]),
    receive
        {entry_reply, Reply} -&gt; Reply
    end.

init(Pid) -&gt;
    S = gs:start(),
    Win = gs:create(window,S,[{title,"Entry Demo"},
                              {width,150},{height,100}]),
    gs:create(label,Win,[{label,{text,"What's your name?"}},
                         {width,150}]),
    gs:create(entry,entry,Win,[{x,10},{y,30},{width,130},
                               {keypress,true}]),
    gs:create(button,ok,Win,[{width,45},{y,60},{x,10},
                             {label,{text,"Ok"}}]),
    gs:create(button,cancel,Win,[{width,60},{y,60},{x,80},
                                 {label,{text,"Cancel"}}]),
    gs:config(Win,{map,true}),
    loop(Pid).

loop(Pid) -&gt;
    receive
        {gs,entry,keypress,_,['Return'|_]} -&gt;
            Text=gs:read(entry,text),
            Pid ! {entry_reply,{name,Text}};
        {gs,entry,keypress,_,_} -&gt; % all other keypresses
            loop(Pid);
        {gs,ok,click,_,_} -&gt;
            Text=gs:read(entry,text),
            Pid ! {entry_reply,{name,Text}};
        {gs,cancel,click,_,_} -&gt;
            Pid ! {entry_reply,cancel};
        X -&gt;
            io:format("Got X=~w~n",[X]),
            loop(Pid)
    end.
</pre></div> <p>The program draws the dialog and waits for the user to either press the return key or click one of the buttons. It then reads the text option of the entry and returns the string to the client process.</p> <h2 id="id68893">8.8 Listbox</h2> <p>A listbox is a list of labels with optional scroll bars attached. The user selects one or more predefined alternative entries. You can add and remove entries in the listbox. The first element in a listbox has index 0.</p> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{hscroll, Bool | top | bottom}</td> <td>true</td> <td>Horizontal scroll bar.</td> </tr> <tr> <td>{items, [String, String ... String]}</td> <td>&lt;unspec&gt;</td> <td>All items (entries) in the listbox.</td> </tr> <tr> <td>{scrollbg, Color}</td> <td>&lt;unspec&gt;</td> <td>Foreground color of scroll bar.</td> </tr> <tr> <td>{scrollfg, Color}</td> <td>&lt;unspec&gt;</td> <td>Background color of scroll bar.</td> </tr> <tr> <td>{selectmode, single | multiple}</td> <td>single</td> <td>Controls if it is possible to have several items selected at the same time.</td> </tr> <tr> <td>{vscroll, Bool | left | right}</td> <td>true</td> <td>Vertical scroll bar.</td> </tr> </table> <em>Table 8.16: Listbox Options</em> <table> <tr> <td><strong>Config-Only</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{add, {Index, String}}</td> <td>Add an item at specified index.</td> </tr> <tr> <td>{add, String}</td> <td>Add an item last.</td> </tr> <tr> <td>{change, {Index,String}}</td> <td>Change one item.</td> </tr> <tr> <td>clear</td> <td>Delete all items.</td> </tr> <tr> <td>{del, Index | {From, To}}</td> <td>Delete an item at specified index, or all from index From to index To.</td> </tr> <tr> <td>{see, Index}</td> <td>Make the item at specified index visible.</td> </tr> <tr> <td>{selection, Index | {From,To}| clear}</td> <td>Select an item (highlight it). Clear erases the selection.</td> </tr> </table> <em>Table 8.17: Listbox Cinfig-only Options</em> <table> <tr> <td><strong>Read-Only</strong></td> <td><strong>Return</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>selection</td> <td>ListOfStrings</td> <td>Returns current selection. All selected item indices will be returned in a list.</td> </tr> <tr> <td>size</td> <td>Int</td> <td>The number of items (entries) in the listbox.</td> </tr> <tr> <td>{get, Index}</td> <td>String</td> <td>Returns item at specified index.</td> </tr> </table> <em>Table 8.18: Listbox Read-Only Options</em> <table> <tr> <td><strong>Event</strong></td> </tr> <tr> <td>{gs, ListBox, click, Data, [Index, Text,Bool | _]}</td> </tr> <tr> <td>{gs, ListBox, doubleclick, Data, [Index, Text,Bool | _]}</td> </tr> </table> <em>Table 8.19: Listbox Events</em> <p><code class="code">Bool</code> is true if object is selected, false if de-selected.</p> <p>Note that <code class="code">click</code> and <code class="code">doubleclick</code> are two discrete events: if you have subscribed to both, you will receive both a <code class="code">click</code> event and a <code class="code">doubleclick</code> event when double-clicking on one item (since two rapid clickings are regarded as both a <code class="code">click</code> and a <code class="code">doubleclick</code>). The subscription of <code class="code">doubleclick</code> events does <code class="code">not</code> result in the <code class="code">click</code> events being unsubscribed!</p> <p>The following example shows a simple application which prompts the user for a text item. The user has the following options:</p> <ul> <li>browse the items and then double-click the required item</li> <li>type the name into the entry field and then press the Return key</li> <li>select the required item and then click the OK button.</li> </ul>   <em>Figure 8.5: Simple Browser Dialog</em> <div class="example"><pre>

-module(ex10).
-copyright('Copyright (c) 1991-97 Ericsson Telecom AB').
-vsn('$Revision: /main/release/2 $ ').

-export([start/0, init/3]).

start() -&gt;
    start("Pick a fruit:", 
          [apple, banana, lemon, orange, strawberry, 
           mango, kiwi, pear, cherry,pineapple,peach,apricot]).

start(Text,Items) -&gt;
    spawn(ex10,init,[self(),Text,Items]),       
    receive
        {browser,Result} -&gt; Result
    end.

init(Pid,Text,Items) -&gt;
    S=gs:start(),
    Win=gs:window(S,[{width,250},{height,270},
                     {title,"Browser"}]),
    Lbl=gs:label(Win,[{label,{text,Text}},{width,250}]),
    Entry=gs:entry(Win,[{y,35},{width,240},{x,5},
                        {keypress,true},
                        {setfocus,true}]),
    Lb=gs:listbox(Win,[{x,5},{y,65},{width,160},
                       {height,195},{vscroll,right},
                       {click,true},{doubleclick,true}]),
    Ok=gs:button(Win,[{label,{text,"OK"}},
                      {width,40},{x,185},{y,175}]),
    Cancel=gs:button(Win,[{label,{text,"Cancel"}},
                          {x,175},{y,225},{width,65}]),
    gs:config(Lb,[{items,Items}]),
    gs:config(Win,{map,true}),
    browser_loop(Pid,Ok,Cancel,Entry,Lb).

browser_loop(Pid,Ok,Cancel,Entry,Lb) -&gt;
    receive
        {gs,Ok,click,_,_} -&gt;
            Txt=gs:read(Entry,text),
            Pid ! {browser,{ok,Txt}};
        {gs,Cancel,click,_,_} -&gt;
            Pid ! {browser,cancel};
        {gs,Entry,keypress,_,['Return'|_]} -&gt;
            Txt=gs:read(Entry,text),
            Pid ! {browser,{ok,Txt}};
        {gs,Entry,keypress,_,_} -&gt;
            browser_loop(Pid,Ok,Cancel,Entry,Lb);
        {gs,Lb,click,_,[Idx, Txt|_]} -&gt;
            gs:config(Entry,{text,Txt}),
            browser_loop(Pid,Ok,Cancel,Entry,Lb);
        {gs,Lb,doubleclick,_,[Idx, Txt|_]} -&gt;
            Pid ! {browser,{ok,Txt}};
        {gs,_,destroy,_,_} -&gt;
            Pid ! {browser,cancel};
        X -&gt;
            io:format("Got X=~w~n",[X]),
            browser_loop(Pid,Ok,Cancel,Entry,Lb)
    end.
</pre></div> <h2 id="id69577">8.9 Canvas</h2> <p>The canvas object is a simple drawing area. The user can draw graphical objects and move them around the drawing area. The canvas also has optional scroll bars which can be used to scroll the drawing area. The graphical objects that can be created on a canvas object are:</p> <ul> <li>arc</li> <li>image</li> <li>line</li> <li>oval</li> <li>polygon</li> <li>rectangle</li> <li>text.</li> </ul> <p>These objects must have a canvas object as a parent, but they are otherwise similar to all other basic objects. The following tables show the options which apply to canvas objects.</p> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{bg, Color}</td> <td>&lt;unspec&gt;</td> <td>Color of the drawing area.</td> </tr> <tr> <td>{hscroll, Bool | top | bottom}</td> <td>false</td> <td>Horizontal scroll bar.</td> </tr> <tr> <td>{scrollbg, Color}</td> <td>&lt;unspec&gt;</td> <td>Foreground color of scroll bar.</td> </tr> <tr> <td>{scrollfg, Color}</td> <td>&lt;unspec&gt;</td> <td>Background color of scroll bar.</td> </tr> <tr> <td>{scrollregion, {X1,Y1,X2,Y2}}</td> <td>&lt;unspec&gt;</td> <td>The size of the drawing area to be scrolled. </td> </tr> <tr> <td>{vscroll, Bool | left | right}</td> <td>false</td> <td>Vertical scroll bar.</td> </tr> </table> <em>Table 8.20: Canvas Options</em> <table> <tr> <td><strong>Read-Only</strong></td> <td><strong>Return</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{hit, {X,Y}}</td> <td>list of ObjectId</td> <td>Returns the canvas objects at X,Y.</td> </tr> <tr> <td>{hit, [{X1,Y1},{X2,Y2}]}</td> <td>list of ObjectId</td> <td>Returns the canvas objects which are hit by the rectangle.</td> </tr> </table> <em>Table 8.21: Canvas Read-Only Options</em> <p>Canvas objects have the same types of events as other objects. The following Config-Only options also apply to canvas objects:</p> <table> <tr> <td><strong>Config-Only</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>lower</td> <td>Lowers the object.</td> </tr> <tr> <td>{move, {Dx, Dy}}</td> <td>Moves object relative to its current position.</td> </tr> <tr> <td>raise</td> <td>Raises the object above all other objects.</td> </tr> </table> <em>Table 8.22: Canvas Config-Only Options</em> <p>The following sections describe the graphical objects which can be drawn on a canvas object.</p> <h4>The Canvas Arc Object</h4> <p>The canvas arc object is defined within a rectangle and is drawn from a start angle to the extent angle. Origo is in the center of the rectangle.</p>   <em>Figure 8.6: Canvas Arc Object</em> <div class="example"><pre>
gs:create(arc,Canvas,[{coords,[{10,10},{80,80}]},{fill,yellow}]).
      </pre></div> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{bw, Int}</td> <td>1</td> <td>Defines the width.</td> </tr> <tr> <td>{coords, [{X1,Y1},{X2,Y2}]}</td> <td> </td> <td>Defines a rectangle to draw the arc within.</td> </tr> <tr> <td>{extent, Degrees}</td> <td> </td> <td> </td> </tr> <tr> <td>{fg, Color}</td> <td> </td> <td> </td> </tr> <tr> <td>{fill, Color|none}</td> <td>none</td> <td>Defines fill color of arc object.</td> </tr> <tr> <td>{start, Degrees}</td> <td> </td> <td> </td> </tr> <tr> <td>{style, arc}</td> <td> </td> <td>No line segments.</td> </tr> <tr> <td>{style, chord}</td> <td> </td> <td>A single line segment connects the two end points of the perimeter section.</td> </tr> <tr> <td>{style, pieslice}</td> <td>This Style</td> <td>Two lines are drawn between the center of the oval and each end of the perimeter section.</td> </tr> </table> <em>Table 8.23: Canvas Arc Options</em> <h4>The Canvas Image Object</h4> <p>The canvas image object displays images and moves them around in a simple way. The currently supported image formats are bitmap and gif.</p>   <em>Figure 8.7: Canvas Image Object</em> <div class="example"><pre>
gs:create(image,Canvas,[{load_gif,"brick.gif"}]).
      </pre></div> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{anchor, Anchor}</td> <td>nw</td> <td>Anchor reference specified by {X,Y} .</td> </tr> <tr> <td>{bg, Color}</td> <td>&lt;unspec&gt;</td> <td>Background color. Pixel value 0.</td> </tr> <tr> <td>{bitmap, FileName}</td> <td>&lt;unspec&gt;</td> <td>A bitmap file which contains a bmp bitmap.</td> </tr> <tr> <td>{coords, [{X,Y}]}</td> <td>&lt;unspec&gt;</td> <td>Position on the canvas.</td> </tr> <tr> <td>{fg, Color}</td> <td>&lt;unspec&gt;</td> <td>Foreground color. Pixel value 1.</td> </tr> <tr> <td>{load_gif, FileName}</td> <td>&lt;unspec&gt;</td> <td>Loads a gif image.</td> </tr> </table> <em>Table 8.24: Canvas Image Object Options</em> <h4>The Canvas Line Object</h4>   <em>Figure 8.8: Line Object Drawn on a Canvas</em> <div class="example"><pre>
gs:create(line,Canvas,
          [{coords,[{25,25},{50,50},{50,40},{85,75}]},
           {arrow,last},{width,2}]).
      </pre></div> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{arrow, both | none | first | last}</td> <td>none</td> <td>Draws arrows at the end points of the line.</td> </tr> <tr> <td>{coords, [{X1,Y1},{X2,Y2}, ... {Xn,Yn}]}</td> <td>&lt;unspec&gt;</td> <td>A list of coordinates. The line will be drawn between all pairs in the list.</td> </tr> <tr> <td>{fg, Color}</td> <td>&lt;unspec&gt;</td> <td>The color of the line.</td> </tr> <tr> <td>{smooth, Bool}</td> <td>false</td> <td>Smoothing with Bezier splines.</td> </tr> <tr> <td>{splinesteps, Int}</td> <td>&lt;unspec&gt;</td> <td> </td> </tr> <tr> <td>{width, Int}</td> <td>1</td> <td>The width of the line.</td> </tr> </table> <em>Table 8.25: Canvas Line Object Options</em> <h4>The Canvas Oval Object</h4>   <em>Figure 8.9: Oval Object Drawn on a Canvas</em> <div class="example"><pre>
gs:create(oval,Canvas,
          [{coords,[{25,25},{125,75}]},{fill,red},{bw,2}]).
      </pre></div> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{bw, Int}</td> <td>1</td> <td>Width.</td> </tr> <tr> <td>{coords, [{X1,Y1},{X2,Y2}]}</td> <td>&lt;unspec&gt;</td> <td>Bounding rectangle which defines shape of object.</td> </tr> <tr> <td>{fg, Color}</td> <td> </td> <td> </td> </tr> <tr> <td>{fill, Color|none}</td> <td>none</td> <td>Object fill color.</td> </tr> </table> <em>Table 8.26: Canvas Oval Object Options</em> <h4>The Canvas Polygon Object</h4>   <em>Figure 8.10: Canvas Polygon Object</em> <div class="example"><pre>
gs:create(polygon,Canvas,
          [{coords,[{10,10},{50,50},{75,30}]}]).
      </pre></div> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{bw, Int}</td> <td>1</td> <td>Width.</td> </tr> <tr> <td>{coords, [{X1,Y1},{X2,Y2} | {Xn,Yn}]}</td> <td>&lt;unspec&gt;</td> <td>Defines all points in the polygon. There may be any number of points in the polygon.</td> </tr> <tr> <td>{fg, Color}</td> <td>black</td> <td>The color of the polygon outline. </td> </tr> <tr> <td>{fill, Color|none}</td> <td>none</td> <td> </td> </tr> <tr> <td>{smooth, Bool}</td> <td>false</td> <td>Smoothing with Bezier splines.</td> </tr> <tr> <td>{splinesteps, Int}</td> <td>&lt;unspec&gt;</td> <td> </td> </tr> </table> <em>Table 8.27: Canvas Polygon Object Options</em> <h4>The Canvas Rectangle Object</h4>   <em>Figure 8.11: Rectangle Object Created on a Canvas</em> <div class="example"><pre>
gs:create(rectangle,Canvas,
          [{coords,[{30,30},{70,70}]},{fill,cyan},{bw,2}]).
      </pre></div> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{bw, Int}</td> <td>1</td> <td>The width of the border line.</td> </tr> <tr> <td>{coords, [{X1,Y1},{X2,Y2}]}</td> <td>&lt;unspec&gt;</td> <td>Defines rectangle coordinates.</td> </tr> <tr> <td>{fg, Color}</td> <td>&lt;unspec&gt;</td> <td>The color of the border line.</td> </tr> <tr> <td>{fill, Color|none}</td> <td>none</td> <td>Fill color of rectangle.</td> </tr> </table> <em>Table 8.28: Canvas Rectangle Object Options</em> <h4>The Canvas Text Object</h4>   <em>Figure 8.12: Canvas Text Object</em> <div class="example"><pre>
gs:create(text,C,[{coords,[{50,50}]},
                  {font,{times,18}},
                  {fg,red},
                  {text,"Hello World!"}]).
      </pre></div> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{anchor, Anchor}</td> <td>nw</td> <td>Anchor reference specified by {X,Y}.</td> </tr> <tr> <td>{coords, [{X, Y}]}</td> <td>&lt;unspec&gt;</td> <td>Position in the canvas.</td> </tr> <tr> <td>{fg, Color}</td> <td>&lt;unspec&gt;</td> <td>Text color (background color is the canvas color).</td> </tr> <tr> <td>{justify, left | center | right}</td> <td>&lt;unspec&gt;</td> <td>Tex justification. Only valid with several lines of text.</td> </tr> <tr> <td>{text, String}</td> <td>&lt;unspec&gt;</td> <td>The text string to display.</td> </tr> <tr> <td>{width, Int}</td> <td> </td> <td>The width in pixels. The text will be wrapped into several lines to fit inside the width.</td> </tr> </table> <em>Table 8.29: Canvas Text Object Options</em> <h2 id="id71722">8.10 Menu</h2> <p>Menus consist of four object types:</p> <ul> <li>the menu bar</li> <li>the menu button</li> <li>the menu</li> <li>the menu item.</li> </ul> <h4>Menu Bar</h4> <p>The menu bar is a simple object. It is placed at the top of the window and contains menu items. {x,y} or width cannot be controlled since, by definition, the menu bar is placed at the top of the window.</p> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>&lt;only generic options&gt;</td> <td> </td> <td> </td> </tr> </table> <em>Table 8.30: Menu Bar Options</em> <h4>Menu Button</h4> <p>The menu button displays a menu when pressed. The width of the menu button is automatically determined by the size of the text.</p> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{align, Align}</td> <td>center</td> <td>Text alignment within the frame.</td> </tr> <tr> <td>{justify, left | center | right}</td> <td>center</td> <td>Justification is only valid when there are several lines of text.</td> </tr> <tr> <td>{label,{text,Text}}</td> <td>&lt;unspec&gt;</td> <td> </td> </tr> <tr> <td>{side, left | right}</td> <td>&lt;unspec&gt;</td> <td>Placement on the menu bar. The menu button created first will have the left/right position.</td> </tr> <tr> <td>{underline, Int}</td> <td>&lt;unspec&gt;</td> <td>Underline character N to indicate an keyboard accelerator.</td> </tr> </table> <em>Table 8.31: Menu Button Options</em> <h4>Menu</h4> <p>The menu contains menu items, which are displayed vertically. Its width is automatically determined by the width of the menu items it contains.</p> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{selectcolor, Color}</td> <td>&lt;unspec&gt;</td> <td>The indicator color of radio buttons and check buttons.</td> </tr> </table> <em>Table 8.32: Menu Options</em> <table> <tr> <td><strong>Config-Only</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{post_at,{X,Y}}</td> <td>Displays the menu as a pop-up menu at {X,Y} (coordinate system of the parent).</td> </tr> </table> <em>Table 8.33: Menu Config-Only Options</em> <h4>Menu Item</h4> <p>The menu item is an object of its own. It can send events when the user selects it.</p> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{group, Atom}</td> <td>&lt;unspec&gt;</td> <td>For {type, radio|check}.</td> </tr> <tr> <td>{itemtype, type}</td> <td>normal</td> <td>The type of this item. Cannot be reconfigured.</td> </tr> <tr> <td>{label, {text,Text}}</td> <td>&lt;unspec&gt;</td> <td>The text of the item.</td> </tr> <tr> <td>{underline, Int}</td> <td>&lt;unspec&gt;</td> <td>Underline character N to indicate an keyboard accelerator.</td> </tr> <tr> <td>{value, Atom}</td> <td>&lt;unspec&gt;</td> <td> </td> </tr> </table> <em>Table 8.34: Menu Item Options</em> <p><code class="code">type: normal | separator | check | radio | cascade</code></p> <table> <tr> <td><strong>itemtype</strong></td> <td><strong>Event</strong></td> </tr> <tr> <td>normal</td> <td>{gs, itemId, click, Data, [Text, Index | _]}</td> </tr> <tr> <td>check</td> <td>{gs, itemId, click, Data, [Text, Index, Group, Bool| _]}</td> </tr> <tr> <td>radio</td> <td>{gs, itemId, click, Data, [Text, Index, Group, Value| _]}</td> </tr> </table> <em>Table 8.35: Menu Item Events</em> <table> <tr> <td><strong>Read-Only</strong></td> <td><strong>Return</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>index</td> <td>Int</td> <td>Index in the menu. Starts counting from 0.</td> </tr> </table> <em>Table 8.36: Menu Item Read-Only Options</em> <h4>Menu Demo</h4>   <em>Figure 8.13: Simple Menu</em> <p>The following example shows a short demo of the <code class="code">gs</code> menus:</p> <div class="example"><pre>

-module(ex13).
-copyright('Copyright (c) 1991-97 Ericsson Telecom AB').
-vsn('$Revision: /main/release/2 $ ').

-export([start/0,init/0]).

start() -&gt; spawn(ex13, init, []).

init() -&gt;
    I=gs:start(),
    Win=gs:window(I, [{width,200},{height,100},
                      {title,"menu"},{map, true}]),
    Bar = gs:create(menubar, Win, []),
    Fmb = gs:create(menubutton, Bar,
                    [{label,{text,"File"}}]),
    Emb = gs:create(menubutton, Bar,
                    [{label,{text,"Edit"}}]),
    Hmb = gs:create(menubutton, Bar,
                    [{label,{text,"Help"}},{side,right}]),
    Fmnu = gs:create(menu, Fmb, []),
    Emnu = gs:create(menu, Emb, []),
    Hmnu = gs:create(menu, Hmb, []),
    gs:create(menuitem, load, Fmnu,
              [{label,{text, "Load"}}]),
    gs:create(menuitem, save, Fmnu,
              [{label,{text, "Save"}}]),
    Exit = gs:create(menuitem, Fmnu,
                     [{label,{text, "Exit"}}]),
    Color = gs:create(menuitem, Emnu,
                      [{label,{text, "Color"}},
                       {itemtype, cascade}]),
    Cmnu = gs:create(menu, Color, [{disabledfg,gray}]),
    gs:create(menuitem, Cmnu, [{label, {text,"Red"}},
                               {data, {new_color, red}},
                               {itemtype,radio},{group,gr1}]),
    gs:create(menuitem, Cmnu, [{label, {text,"Blue"}},
                               {data, {new_color, blue}},
                               {itemtype,radio},{group,gr1}]),
    gs:create(menuitem,Cmnu, [{label, {text,"Black"}},
                              {data, {new_color, black}},
                              {itemtype,radio},{group,gr1}]),
    Y = gs:create(menuitem, Hmnu, [{label, {text,"You"}},
                                   {itemtype, check}]),
    M = gs:create(menuitem, me, Hmnu, [{label, {text, "Me"}},
                                       {itemtype, check}]),
    gs:create(menuitem, Hmnu, [{itemtype, separator}]),
    gs:create(menuitem, Hmnu, [{label, {text, "Other"}},
                               {itemtype, check},
                               {enable,false}]),
    gs:create(menuitem, doit, Hmnu, [{label, {text, "Doit!"}},
                                     {data, {doit, Y, M}}]),
    loop(Exit, Win).

loop(Exit, Win) -&gt;
    receive
        {gs, save, click, _Data, [Txt, Index | Rest]} -&gt;
            io:format("Save~n");
        {gs, load, click, _Data, [Txt, Index | Rest]} -&gt;
            io:format("Load~n");
        {gs, Exit, click, _Data, [Txt, Index | Rest]} -&gt;
            io:format("Exit~n"),
            exit(normal);
        {gs, _MnuItem, click, {new_color, Color}, Args} -&gt;
            io:format("Change color to ~w. Args:~p~n",
                      [Color, Args]),
            gs:config(Win, [{bg, Color}]);
        {gs, doit, click, {doit, YouId, MeId}, Args} -&gt;
            HelpMe = gs:read(MeId, select),
            HelpYou = gs:read(YouId, select),
            io:format("Doit. HelpMe:~w, HelpYou:~w, Args:~p~n",
                      [HelpMe, HelpYou, Args]);
        Other -&gt; io:format("Other:~p~n",[Other])
    end,
    loop(Exit, Win).
</pre></div> <h2 id="id80868">8.11 Grid</h2> <p>The grid object is similar to the listbox object. The main difference is that the grid is a multi-column object which is used to display tables. If needed, the grid can send click events when a user presses the mouse button in a table cell. Although the grid has a behavior which is similar to the listbox, the programming is somewhat different. The data in a table cell is represented as a pure <code class="code">gs</code> object and can be treated as such. This object is called a grid line. It is located at a row in the parent grid. If a grid line is clicked, it sends an event to its owner.</p> <h4>Grid Line</h4> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{{bg, Column},Color}</td> <td>&lt;unspec&gt;</td> <td>The background color of a cell.</td> </tr> <tr> <td>{bg, {Column,Color}}</td> <td>&lt;unspec&gt;</td> <td>Equivalent to {{bg, Column},Color}.</td> </tr> <tr> <td>{bg, Color}</td> <td>&lt;unspec&gt;</td> <td>The background color of all cells.</td> </tr> <tr> <td>{click, Bool}</td> <td>true</td> <td>Turns click events on/off.</td> </tr> <tr> <td>{doubleclick, Bool}</td> <td>false</td> <td>Turns double-click events on/off.</td> </tr> <tr> <td>{{fg, Column},Color}</td> <td>&lt;unspec&gt;</td> <td>The foreground color of a cell.</td> </tr> <tr> <td>{fg, {Column,Color}}</td> <td>&lt;unspec&gt;</td> <td>Equivalent to {{fg, Column},Color}</td> </tr> <tr> <td>{fg,Color}</td> <td>&lt;unspec&gt;</td> <td>The foreground color of all cells.</td> </tr> <tr> <td>{text, {Column,Text}}</td> <td>&lt;unspec&gt;</td> <td>The text in the cell.</td> </tr> <tr> <td>{{text, Column},Text}</td> <td>&lt;unspec&gt;</td> <td>Equivalent to {text,{Column,Text}}.</td> </tr> <tr> <td>{text,Text}</td> <td>&lt;unspec&gt;</td> <td>The text for all cells.</td> </tr> <tr> <td>{row, {row}}</td> <td>&lt;unspec&gt;</td> <td>The grid row. Must not be occupied by another grid line.</td> </tr> </table> <em>Table 8.37: Grid Line Options</em> <table> <tr> <td><strong>Event</strong></td> </tr> <tr> <td>{gs, GridLineId, click, Data, [Col, row, Text | _]}</td> </tr> <tr> <td>{gs, GridLineId, doubleclick, Data, [Col, row, Text | _]}</td> </tr> </table> <em>Table 8.38: Gride Line Events</em> <h4>Grid</h4> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{font,Font}</td> <td>&lt;unspec&gt;</td> <td>A "global" grid font.</td> </tr> <tr> <td>{hscroll, Bool|top|bottom}</td> <td>true</td> <td>Horizontal scroll bar.</td> </tr> <tr> <td>{vscoll, Bool|left|right}</td> <td>true</td> <td>Vertical scroll bar.</td> </tr> <tr> <td>{rows, {Minrow,Maxrow}}</td> <td>&lt;unspec&gt;</td> <td>The rows which are currently displayed.</td> </tr> <tr> <td>{columnwidths, [WidthCol1,WidthCol2, ..., WidthColN}}</td> <td>&lt;unspec&gt;</td> <td>Defines the number of columns and their widths in coordinates. The size of the columns can be reconfigured, but not the number of columns.</td> </tr> <tr> <td>{fg, Color}</td> <td>&lt;unspec&gt;</td> <td>The color of the grid pattern and the text.</td> </tr> <tr> <td>{bg, Color}</td> <td>&lt;unspec&gt;</td> <td>The background color.</td> </tr> </table> <em>Table 8.39: Grid Options</em> <table> <tr> <td><strong>Read-Only</strong></td> <td><strong>Return</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{obj_at_row, row}</td> <td>Object |undefined</td> <td>The grid line at row.</td> </tr> </table> <em>Table 8.40: Grid Read-Only Options</em> <p>The rows and columns start counting at 1.</p> <h4>Grid Demo</h4>   <em>Figure 8.14: Simple Grid</em> <p>The following simple example shows how to use the grid.</p> <div class="example"><pre>

-module(ex12).
-copyright('Copyright (c) 1991-97 Ericsson Telecom AB').
-vsn('$Revision: /main/release/2 $ ').

-export([start/0,init/0]).

start() -&gt; spawn(ex12, init, []).

init() -&gt;
    R=[{window,[{width,200},{height,200},{title,"grid"},{map, true}],
	{grid, [{x,10},{y,10},{height,180},{width,180},{columnwidths,[80,60]},
		{rows,{1, 20}}],
	 [{gridline,[{text,{1,"NAME"}},{text,{2,"PHONE"}},
		    {font,{screen,bold,12}},{row,1},{click,false}]},
	  {gridline,[{text,{1,"Adam"}},{text,{2,"1234"}},{row,2}]},
	  {gridline,[{text,{1,"Beata"}},{text,{2,"4321"}},{row,3}]},
	  {gridline,[{text,{1,"Thomas"}},{text,{2,"1432"}},{row,4}]},
	  {gridline,[{text,{1,"Bond"}},{text,{2,"007"}},{row,5}]},
	  {gridline,[{text,{1,"King"}},{text,{2,"112"}},{row,6}]},
	  {gridline,[{text,{1,"Eva"}},{text,{2,"4123"}},{row,7}]}]}}],
    gs:create_tree(gs:start(),R),
    loop().

loop() -&gt;
    receive
	{gs,_Win,destroy,_Data,_Args} -&gt; bye;
	{gs,_Gridline,click,_Data,[Col,Row,Text|_]} -&gt;
	    io:format("Click at col:~p row:~p text:~p~n",[Col,Row,Text]),
	    loop();
        Msg -&gt;
            io:format("Got ~p~n",[Msg]),
	    loop()
    end.
</pre></div> <h2 id="id81694">8.12 Editor</h2> <p>The editor object is a simple text editor.</p> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{hscroll, Bool | top | bottom}</td> <td>false</td> <td>Horizontal scroll bar.</td> </tr> <tr> <td>{insertpos,{row,Col}}</td> <td>&lt;unspec&gt;</td> <td>The position of the cursor.</td> </tr> <tr> <td>{insertpos,'end'}</td> <td>&lt;unspec&gt;</td> <td>The position of the cursor.</td> </tr> <tr> <td>{justify, left| right| center}</td> <td>left</td> <td>Text justification.</td> </tr> <tr> <td>{scrollbg, Color}</td> <td>&lt;unspec&gt;</td> <td>Background color of scroll bar.</td> </tr> <tr> <td>{scrollfg, Color}</td> <td>&lt;unspec&gt;</td> <td>Foreground color of scroll bar.</td> </tr> <tr> <td>{selection, {FromIndex,ToIndex}}</td> <td>&lt;unspec&gt;</td> <td>The text range that is currently selected.</td> </tr> <tr> <td>{vscroll, Bool | left | right}</td> <td>false</td> <td>Vertical scroll bar.</td> </tr> <tr> <td>{vscrollpos, row}</td> <td>&lt;unspec&gt;</td> <td>The top most visible row in the editor.</td> </tr> <tr> <td>{wrap, none|char | word}</td> <td>none</td> <td>How to wrap text when the line is full.</td> </tr> </table> <em>Table 8.41: Editor Options</em> <table> <tr> <td><strong>Config-Only</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>clear</td> <td>Clears the editor.</td> </tr> <tr> <td>{del, {FromIndex, ToIndex}}}</td> <td>Deletes text.</td> </tr> <tr> <td>{fg, {{FromIndex,ToIndex},Color}}</td> <td>Sets the foreground color of a range of text.</td> </tr> <tr> <td>{load, FileName}</td> <td>Read FileName into the editor.</td> </tr> <tr> <td>{insert, {Index, Text}}</td> <td>Inserts new text.</td> </tr> <tr> <td>{overwrite, {Index, Text}}</td> <td>Writes new text at index.</td> </tr> <tr> <td>{save, FileName}</td> <td>Writes editor contents to file.</td> </tr> </table> <em>Table 8.42: Editor Config-Only Options</em> <table> <tr> <td><strong>Read-Only</strong></td> <td><strong>Return</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>char_height</td> <td>Int</td> <td>The height of the editor window measured in characters.</td> </tr> <tr> <td>char_width</td> <td>Int</td> <td>The width of the editor window measured in characters.</td> </tr> <tr> <td>{fg,Index}</td> <td>Int</td> <td>The foreground color of the text at Index.</td> </tr> <tr> <td>{get,{FromIndex, ToIndex}}</td> <td>Text</td> <td>The text between the indices.</td> </tr> <tr> <td>size</td> <td>Int</td> <td>The number of rows in the editor.</td> </tr> </table> <em>Table 8.43: Editor Read-Only Options</em> <div class="example"><pre>
Index: 'end'|insert|{row,Col}|{row,lineend}
    </pre></div> <h4>Editor Demo</h4>   <em>Figure 8.15: Simple Editor</em> <div class="example"><pre>

-module(ex14).
-copyright('Copyright (c) 1991-97 Ericsson Telecom AB').
-vsn('$Revision: /main/release/2 $ ').

-export([start/0,init/0]).

start() -&gt; spawn(ex14, init, []).

init() -&gt;
    Y = [{y,0},{height, 30},{width, 90}],
    R=[{window, [{width, 400},{height, 300}, {title,"editor"},{map, true}],
       [{editor,editor,[{x,0},{y, 35},{width,300},{height,250},
			{insert,{'end',"Edit this text!"}},{vscroll,right}]},
	{button, clear, [{label, {text, "Clear"}},{x,0} | Y]},
	{checkbutton,enable,[{label,{text,"Enable"}},{select,false},{x,100}|Y]},
	{button, time, [{label, {text, "Insert Time"}},{x,200} | Y]},
	{button, quit,  [{label, {text, "Quit"}},{x,300} | Y]}]}],
    gs:create_tree(gs:start(),R),
    gs:config(editor,{enable,false}),
    loop().

loop() -&gt;
    receive
        {gs, clear, _, _, _} -&gt;
            io:format("clear editor~n"),
            Enable = gs:read(editor, enable),
            gs:config(editor,{enable, true}),
            gs:config(editor,clear),
            gs:config(editor,{enable, Enable});
        {gs, enable, _, _, [_Txt, _Grp, Enable|_]} -&gt;
            io:format("Enable: ~w~n", [Enable]),
            gs:config(editor,{enable, Enable});
        {gs, time, _, _, _} -&gt;
            TimeStr = io_lib:format("Hr:Min:Sec is now ~w:~w:~w~n",
                                    tuple_to_list(time())),
            io:format("Insert Time: ~s~n", [TimeStr]),
            Enable = gs:read(editor, enable),
            gs:config(editor,{enable, true}),
            gs:config(editor,{insert, {insert, TimeStr}}),
            gs:config(editor,{enable, Enable});
        {gs, quit, _, _, _} -&gt;
            exit(normal);
        Other -&gt;
            io:format("Other:~w~n",[Other])
    end,
    loop().
</pre></div> <h2 id="id82443">8.13 Scale</h2> <p>A scale object is used to select a value within a specified range.</p> <table> <tr> <td><strong>{Option,Value}</strong></td> <td><strong>Default</strong></td> <td><strong>Description</strong></td> </tr> <tr> <td>{orient, vertical | horizontal}</td> <td>horizontal</td> <td>The orientation of the scale.</td> </tr> <tr> <td>{pos, Int}</td> <td>&lt;unspec&gt;</td> <td>The current value of the scale objects within the range.</td> </tr> <tr> <td>{range, {Min, Max}}</td> <td>&lt;unspec&gt;</td> <td>The value range.</td> </tr> <tr> <td>{showvalue, Bool}</td> <td>true</td> <td>Turns showing of scale value on/off.</td> </tr> <tr> <td>{text, String}</td> <td>&lt;unspec&gt;</td> <td>If specified, a label will be attached to the scale.</td> </tr> </table> <em>Table 8.44: Scale Object Options</em> <table> <tr> <td><strong>Event</strong></td> </tr> <tr> <td>{gs, Scale, click, Data, [Value | _]}</td> </tr> </table> <em>Table 8.45: Scale Object Options</em> <p>The following example prompts a user to specify an RGB-value for the background color of a window.</p>   <em>Figure 8.16: Scale Objects for Selecting RGB Values for a Window</em> <div class="example"><pre>

-module(ex11).
-copyright('Copyright (c) 1991-97 Ericsson Telecom AB').
-vsn('$Revision: /main/release/3 $ ').

-export([start/0,init/0]).

start() -&gt;
    spawn(ex11,init,[]).

init() -&gt;
    I= gs:start(),
    W= gs:window(I,[{title,"Color Demo"},
                    {width,300},{height,195}]), 
    B=gs:button(W,[{label,{image,"die_icon"}},{x,271},{y,166},
                   {width,30}]),
    gs:config(B,[{bg,yellow},{fg,hotpink1},{data,quit}]),
    gs:scale(W,[{text,"Red"},{y,0},{range,{0,255}},
                {orient,horizontal},
                {height,65},{data,red},{pos,42}]),
    gs:scale(W,[{text,"Blue"},{y,65},{range,{0,255}},
                {orient,horizontal},
                {height,65},{data,blue},{pos,42}]),
    gs:scale(W,[{text,"Green"},{y,130},{range,{0,255}},
                {orient,horizontal},
                {height,65},{data,green},{pos,42}]),
    gs:config(W,{map,true}),
    loop(W,0,0,0).

loop(W,R,G,B) -&gt;
    gs:config(W,{bg,{R,G,B}}),
    receive
        {gs,_,click,red,[New_R|_]} -&gt;
            loop(W,New_R,G,B);
        {gs,_,click,green,[New_G|_]} -&gt;
            loop(W,R,New_G,B);
        {gs,_,click,blue,[New_B|_]} -&gt;
            loop(W,R,G,New_B);
        {gs,_,click,quit,_} -&gt;
            true;
        {gs,W,destroy,_,_} -&gt;
            true
    end.
</pre></div>
<div class="_attribution">
  <p class="_attribution-p">
     19992016 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
