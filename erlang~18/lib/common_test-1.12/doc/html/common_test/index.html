
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Common_test - Erlang 18 - W3cubDocs</title>
  
  <meta name="description" content=" common_test ">
  <meta name="keywords" content="common, test, -, erlang, erlang~18">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/erlang~18/lib/common_test-1.12/doc/html/common_test/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/erlang~18.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/erlang~18/" class="_nav-link" title="" style="margin-left:0;">Erlang 18</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _erlang">
				
<h1>common_test</h1> <h2>Module</h2> <p class="REFBODY">common_test</p> <h2>Module summary</h2> <p class="REFBODY">A framework for automated testing of any target nodes.</p> <h2>Description</h2> 
<p>The <code class="code">Common Test</code> framework is an environment for implementing and performing automatic and semi-automatic execution of test cases.</p> <p>In brief, <code class="code">Common Test</code> supports:</p> <ul> <li>Automated execution of test suites (sets of test cases)</li> <li>Logging of events during execution</li> <li>HTML presentation of test suite results</li> <li>HTML presentation of test suite code</li> <li>Support functions for test suite authors</li> <li>Step-by-step execution of test cases</li> </ul> <p>The following section describes the mandatory and optional test suite functions that <code class="code">Common Test</code> calls during test execution. For more details, see section <code class="bold_code"><a href="../write_test_chapter/">Writing Test Suites</a></code> in the User's Guide.</p>  <h2 id="id64268">Test Case Callback Functions</h2>  <p>The following functions define the callback interface for a test suite.</p>  <h2>Exports</h2> <h3 id="Module:all-0" class="code">Module:all() -&gt; Tests | {skip,Reason}</h3>  <p>Types:</p>            <pre>Tests = [TestCase | {group,GroupName} | {group,GroupName,Properties} | {group,GroupName,Properties,SubGroups}]
TestCase = atom()
GroupName = atom()
Properties = [parallel | sequence | Shuffle | {RepeatType,N}] | default
SubGroups = [{GroupName,Properties} | {GroupName,Properties,SubGroups}]
Shuffle = shuffle | {shuffle,Seed}
Seed = {integer(),integer(),integer()}
RepeatType = repeat | repeat_until_all_ok | repeat_until_all_fail | repeat_until_any_ok | repeat_until_any_fail
N = integer() | forever
Reason = term()</pre>

<p>MANDATORY</p> <p>Returns the list of all test cases and test case groups in the test suite module to be executed. This list also specifies the order the cases and groups are executed by <code class="code">Common Test</code>. A test case is represented by an atom, the name of the test case function. A test case group is represented by a <code class="code">group</code> tuple, where <code class="code">GroupName</code>, an atom, is the name of the group (defined in <code class="bold_code"><a href="#Module:groups-0"><span class="code">groups/0</span></a></code>). Execution properties for groups can also be specified, both for a top-level group and for any of its subgroups. Group execution properties specified here override properties in the group definition (see <code class="bold_code"><a href="#Module:groups-0"><span class="code">groups/0</span></a></code>). (With value <code class="code">default</code>, the group definition properties are used).</p> <p>If <code class="code">{skip,Reason}</code> is returned, all test cases in the module are skipped and <code class="code">Reason</code> is printed on the HTML result page.</p> <p>For details on groups, see section <code class="bold_code"><a href="../write_test_chapter/#test_case_groups">Test Case Groups</a></code> in the User's Guide.</p>  <h3 id="Module:groups-0" class="code">Module:groups() -&gt; GroupDefs</h3>  <p>Types:</p>            <pre>GroupDefs = [Group]
Group = {GroupName,Properties,GroupsAndTestCases}
GroupName = atom()
Properties = [parallel | sequence | Shuffle | {RepeatType,N}]
GroupsAndTestCases = [Group | {group,GroupName} | TestCase]
TestCase = atom()
Shuffle = shuffle | {shuffle,Seed}
Seed = {integer(),integer(),integer()}
RepeatType = repeat | repeat_until_all_ok | repeat_until_all_fail | repeat_until_any_ok | repeat_until_any_fail
N = integer() | forever</pre>

<p>OPTIONAL</p> <p>Defines test case groups. For details, see section <code class="bold_code"><a href="../write_test_chapter/#test_case_groups">Test Case Groups</a></code> in the User's Guide.</p>  <h3 id="Module:suite-0" class="code">Module:suite() -&gt; [Info]</h3>  <p>Types:</p>                        <pre>Info = {timetrap,Time} | {require,Required} | {require,Name,Required} | {userdata,UserData} | {silent_connections,Conns} | {stylesheet,CSSFile} | {ct_hooks, CTHs}
Time = TimeVal | TimeFunc
TimeVal = MilliSec | {seconds,integer()} | {minutes,integer()} | {hours,integer()}
TimeFunc = {Mod,Func,Args} | Fun
MilliSec = integer()
Mod = atom()
Func = atom()
Args = list()
Fun = fun()
Required = Key | {Key,SubKeys} | {Key,SubKey} | {Key,SubKey,SubKeys}
Key = atom()
SubKeys = SubKey | [SubKey]
SubKey = atom()
Name = atom()
UserData = term()
Conns = [atom()]
CSSFile = string()
CTHs = [CTHModule |
        {CTHModule, CTHInitArgs} |
        {CTHModule, CTHInitArgs, CTHPriority}]
CTHModule = atom()
CTHInitArgs = term()</pre>

<p>OPTIONAL</p> <p>The test suite information function. Returns a list of tagged tuples specifying various properties related to the execution of this test suite (common for all test cases in the suite).</p> <p>Tag <code class="code">timetrap</code> sets the maximum time that each test case is allowed to execute (including <code class="bold_code"><a href="#Module:init_per_testcase-2"><span class="code">init_per_testcase/2</span></a></code> and <code class="bold_code"><a href="#Module:end_per_testcase-2"><span class="code">end_per_testcase/2</span></a></code>). If the timetrap time is exceeded, the test case fails with reason <code class="code">timetrap_timeout</code>. A <code class="code">TimeFunc</code> function can be used to set a new timetrap by returning a <code class="code">TimeVal</code>. It can also be used to trigger a timetrap time-out by, at some point, returning a value other than a <code class="code">TimeVal</code>. For details, see section <code class="bold_code"><a href="../write_test_chapter/#timetraps">Timetrap Time-Outs</a></code> in the User's Guide.</p> <p>Tag <code class="code">require</code> specifies configuration variables required by test cases (or configuration functions) in the suite. If the required configuration variables are not found in any of the configuration files, all test cases are skipped. For details about the <code class="code">require</code> functionality, see funtion <code class="bold_code"><a href="../ct/#require-1"><span class="code">ct:require/1,2</span></a></code>.</p> <p>With <code class="code">userdata</code>, the user can specify any test suite-related information, which can be read by calling <code class="bold_code"><a href="../ct/#userdata-2"><span class="code">ct:userdata/2</span></a></code>.</p> <p>Tag <code class="code">ct_hooks</code> specifies the <code class="bold_code"><a href="../ct_hooks_chapter/">Common Test Hooks</a></code> to be run with this suite.</p> <p>Other tuples than the ones defined are ignored.</p> <p>For details about the test suite information function, see section <code class="bold_code"><a href="../write_test_chapter/#suite">Test Suite Information Function</a></code> in the User's Guide.</p>  <h3 id="Module:init_per_suite-1" class="code">Module:init_per_suite(Config) -&gt; NewConfig | {skip,Reason} | {skip_and_save,Reason,SaveConfig}</h3>  <p>Types:</p>      <pre>Config = NewConfig = SaveConfig = [{Key,Value}]
Key = atom()
Value = term()
Reason = term()</pre>

<p>OPTIONAL</p> <p>This configuration function is called as the first function in the suite. It typically contains initializations that are common for all test cases in the suite, and that must only be done once. Parameter <code class="code">Config</code> is the configuration data that can be modified. Whatever is returned from this function is specified as <code class="code">Config</code> to all configuration functions and test cases in the suite.</p> <p>If <code class="code">{skip,Reason}</code> is returned, all test cases in the suite are skipped and <code class="code">Reason</code> is printed in the overview log for the suite.</p> <p>For information on <code class="code">save_config</code> and <code class="code">skip_and_save</code>, see section <code class="bold_code"><a href="../dependencies_chapter/#save_config">Saving Configuration Data</a></code> in the User's Guide.</p>  <h3 id="Module:end_per_suite-1" class="code">Module:end_per_suite(Config) -&gt; term() | {save_config,SaveConfig}</h3>  <p>Types:</p>     <pre>Config = SaveConfig = [{Key,Value}]
Key = atom()
Value = term()</pre>

<p>OPTIONAL</p> <p>This function is called as the last test case in the suite. It is meant to be used for cleaning up after <code class="bold_code"><a href="#Module:init_per_suite-1"><span class="code">init_per_suite/1</span></a></code>.</p> <p>For information on <code class="code">save_config</code>, see section <code class="bold_code"><a href="../dependencies_chapter/#save_config">Saving Configuration Data</a></code> in the User's Guide.</p>  <h3 id="Module:group-1" class="code">Module:group(GroupName) -&gt; [Info]</h3>  <p>Types:</p>                        <pre>Info = {timetrap,Time} | {require,Required} | {require,Name,Required} | {userdata,UserData} | {silent_connections,Conns} | {stylesheet,CSSFile} | {ct_hooks, CTHs}
Time = TimeVal | TimeFunc
TimeVal = MilliSec | {seconds,integer()} | {minutes,integer()} | {hours,integer()}
TimeFunc = {Mod,Func,Args} | Fun
MilliSec = integer()
Mod = atom()
Func = atom()
Args = list()
Fun = fun()
Required = Key | {Key,SubKeys} | {Key,Subkey} | {Key,Subkey,SubKeys}
Key = atom()
SubKeys = SubKey | [SubKey]
SubKey = atom()
Name = atom()
UserData = term()
Conns = [atom()]
CSSFile = string()
CTHs = [CTHModule |
        {CTHModule, CTHInitArgs} |
        {CTHModule, CTHInitArgs, CTHPriority}]
CTHModule = atom()
CTHInitArgs = term()</pre>

<p>OPTIONAL</p> <p>The test case group information function. It is supposed to return a list of tagged tuples that specify various properties related to the execution of a test case group (that is, its test cases and subgroups). Properties set by <code class="bold_code"><a href="#Module:group-1"><span class="code">group/1</span></a></code> override properties with the same key that have been set previously by <code class="bold_code"><a href="#Module:suite-0"><span class="code">suite/0</span></a></code>.</p> <p>Tag <code class="code">timetrap</code> sets the maximum time that each test case is allowed to execute (including <code class="bold_code"><a href="#Module:init_per_testcase-2"><span class="code">init_per_testcase/2</span></a></code> and <code class="bold_code"><a href="#Module:end_per_testcase-2"><span class="code">end_per_testcase/2</span></a></code>). If the timetrap time is exceeded, the test case fails with reason <code class="code">timetrap_timeout</code>. A <code class="code">TimeFunc</code> function can be used to set a new timetrap by returning a <code class="code">TimeVal</code>. It can also be used to trigger a timetrap time-out by, at some point, returning a value other than a <code class="code">TimeVal</code>. For details, see section <code class="bold_code"><a href="../write_test_chapter/#timetraps">Timetrap Time-Outs</a></code> in the User's Guide.</p> <p>Tag <code class="code">require</code> specifies configuration variables required by test cases (or configuration functions) in the suite. If the required configuration variables are not found in any of the configuration files, all test cases in this group are skipped. For details about the <code class="code">require</code> functionality, see function <code class="bold_code"><a href="../ct/#require-1"><span class="code">ct:require/1,2</span></a></code>.</p> <p>With <code class="code">userdata</code>, the user can specify any test case group related information that can be read by calling <code class="bold_code"><a href="../ct/#userdata-2"><span class="code">ct:userdata/2</span></a></code>.</p> <p>Tag <code class="code">ct_hooks</code> specifies the <code class="bold_code"><a href="../ct_hooks_chapter/">Common Test Hooks</a></code> to be run with this suite.</p> <p>Other tuples than the ones defined are ignored.</p> <p>For details about the test case group information function, see section <code class="bold_code"><a href="../write_test_chapter/#group_info">Group Information Function</a></code> in the User's Guide.</p>  <h3 id="Module:init_per_group-2" class="code">Module:init_per_group(GroupName, Config) -&gt; NewConfig | {skip,Reason}</h3>  <p>Types:</p>       <pre>GroupName = atom()
Config = NewConfig = [{Key,Value}]
Key = atom()
Value = term()
Reason = term()</pre>

<p>OPTIONAL</p> <p>This configuration function is called before execution of a test case group. It typically contains initializations that are common for all test cases and subgroups in the group, and that must only be performed once. <code class="code">GroupName</code> is the name of the group, as specified in the group definition (see <code class="bold_code"><a href="#Module:groups-0"><span class="code">groups/0</span></a></code>). Parameter <code class="code">Config</code> is the configuration data that can be modified. The return value of this function is given as <code class="code">Config</code> to all test cases and subgroups in the group.</p> <p>If <code class="code">{skip,Reason}</code> is returned, all test cases in the group are skipped and <code class="code">Reason</code> is printed in the overview log for the group.</p> <p>For information about test case groups, see section <code class="bold_code"><a href="../write_test_chapter/#test_case_groups">Test Case Groups</a></code> in the User's Guide.</p>  <h3 id="Module:end_per_group-2" class="code">Module:end_per_group(GroupName, Config) -&gt; term() | {return_group_result,Status}</h3>  <p>Types:</p>       <pre>GroupName = atom()
Config = [{Key,Value}]
Key = atom()
Value = term()
Status = ok | skipped | failed</pre>

<p>OPTIONAL</p> <p>This function is called after the execution of a test case group is finished. It is meant to be used for cleaning up after <code class="bold_code"><a href="#Module:init_per_group-2"><span class="code">init_per_group/2</span></a></code>. A status value for a nested subgroup can be returned with <code class="code">{return_group_result,Status}</code>. The status can be retrieved in <code class="bold_code"><a href="#Module:end_per_group-2"><span class="code">end_per_group/2</span></a></code> for the group on the level above. The status is also used by <code class="code">Common Test</code> for deciding if execution of a group is to proceed if property <code class="code">sequence</code> or <code class="code">repeat_until_*</code> is set.</p> <p>For details about test case groups, see section <code class="bold_code"><a href="../write_test_chapter/#test_case_groups">Test Case Groups</a></code> in the User's Guide.</p>  <h3 id="Module:init_per_testcase-2" class="code">Module:init_per_testcase(TestCase, Config) -&gt; NewConfig | {fail,Reason} | {skip,Reason}</h3>  <p>Types:</p>       <pre>TestCase = atom()
Config = NewConfig = [{Key,Value}]
Key = atom()
Value = term()
Reason = term()</pre>

<p>OPTIONAL</p> <p>This function is called before each test case. Argument <code class="code">TestCase</code> is the test case name, and <code class="code">Config</code> (list of key-value tuples) is the configuration data that can be modified. The <code class="code">NewConfig</code> list returned from this function is given as <code class="code">Config</code> to the test case. If <code class="code">{fail,Reason}</code> is returned, the test case is marked as failed without being executed.</p> <p>If <code class="code">{skip,Reason}</code> is returned, the test case is skipped and <code class="code">Reason</code> is printed in the overview log for the suite.</p>  <h3 id="Module:end_per_testcase-2" class="code">Module:end_per_testcase(TestCase, Config) -&gt; term() | {fail,Reason} | {save_config,SaveConfig}</h3>  <p>Types:</p>       <pre>TestCase = atom()
Config = SaveConfig = [{Key,Value}]
Key = atom()
Value = term()
Reason = term()</pre>

<p>OPTIONAL</p> <p>This function is called after each test case, and can be used to clean up after <code class="bold_code"><a href="#Module:init_per_testcase-2"><span class="code">init_per_testcase/2</span></a></code> and the test case. Any return value (besides <code class="code">{fail,Reason}</code> and <code class="code">{save_config,SaveConfig}</code>) is ignored. By returning <code class="code">{fail,Reason}</code>, <code class="code">TestCase</code> is marked as faulty (even though it was successful in the sense that it returned a value instead of terminating).</p> <p>For information on <code class="code">save_config</code>, see section <code class="bold_code"><a href="../dependencies_chapter/#save_config">Saving Configuration Data</a></code> in the User's Guide.</p>  <h3 id="Module:Testcase-0" class="code">Module:Testcase() -&gt; [Info]</h3>  <p>Types:</p>                  <pre>Info = {timetrap,Time} | {require,Required} | {require,Name,Required} | {userdata,UserData} | {silent_connections,Conns}
Time = TimeVal | TimeFunc
TimeVal = MilliSec | {seconds,integer()} | {minutes,integer()} | {hours,integer()}
TimeFunc = {Mod,Func,Args} | Fun
MilliSec = integer()
Mod = atom()
Func = atom()
Args = list()
Fun = fun()
Required = Key | {Key,SubKeys} | {Key,Subkey} | {Key,Subkey,SubKeys}
Key = atom()
SubKeys = SubKey | [SubKey]
SubKey = atom()
Name = atom()
UserData = term()
Conns = [atom()]</pre>

<p>OPTIONAL</p> <p>The test case information function. It is supposed to return a list of tagged tuples that specify various properties related to the execution of this particular test case. Properties set by <code class="bold_code"><a href="#Module:Testcase-0"><span class="code">Testcase/0</span></a></code> override properties set previously for the test case by <code class="bold_code"><a href="#Module:group-1"><span class="code">group/1</span></a></code> or <code class="bold_code"><a href="#Module:suite-0"><span class="code">suite/0</span></a></code>.</p> <p>Tag <code class="code">timetrap</code> sets the maximum time that the test case is allowed to execute. If the timetrap time is exceeded, the test case fails with reason <code class="code">timetrap_timeout</code>. <code class="bold_code"><a href="#Module:init_per_testcase-2"><span class="code">init_per_testcase/2</span></a></code> and <code class="bold_code"><a href="#Module:end_per_testcase-2"><span class="code">end_per_testcase/2</span></a></code> are included in the timetrap time. A <code class="code">TimeFunc</code> function can be used to set a new timetrap by returning a <code class="code">TimeVal</code>. It can also be used to trigger a timetrap time-out by, at some point, returning a value other than a <code class="code">TimeVal</code>. For details, see section <code class="bold_code"><a href="../write_test_chapter/#timetraps">Timetrap Time-Outs</a></code> in the User's Guide.</p> <p>Tag <code class="code">require</code> specifies configuration variables that are required by the test case (or <code class="code">init_per_testcase/2</code> or <code class="code">end_per_testcase/2</code>). If the required configuration variables are not found in any of the configuration files, the test case is skipped. For details about the <code class="code">require</code> functionality, see function <code class="bold_code"><a href="../ct/#require-1"><span class="code">ct:require/1,2</span></a></code>.</p> <p>If <code class="code">timetrap</code> or <code class="code">require</code> is not set, the default values specified by <code class="bold_code"><a href="#Module:suite-0"><span class="code">suite/0</span></a></code> (or <code class="bold_code"><a href="#Module:group-1"><span class="code">group/1</span></a></code>) are used.</p> <p>With <code class="code">userdata</code>, the user can specify any test case-related information that can be read by calling <code class="bold_code"><a href="../ct/#userdata-3"><span class="code">ct:userdata/3</span></a></code>.</p> <p>Other tuples than the ones defined are ignored.</p> <p>For details about the test case information function, see section <code class="bold_code"><a href="../write_test_chapter/#info_function">Test Case Information Function</a></code> in the User's Guide.</p>  <h3 id="Module:Testcase-1" class="code">Module:Testcase(Config) -&gt; term() | {skip,Reason} | {comment,Comment} | {save_config,SaveConfig} | {skip_and_save,Reason,SaveConfig} | exit()</h3>  <p>Types:</p>       <pre>Config = SaveConfig = [{Key,Value}]
Key = atom()
Value = term()
Reason = term()
Comment = string()</pre>

<p>MANDATORY</p> <p>The implementation of a test case. Call the functions to test and check the result. If something fails, ensure the function causes a runtime error or call <code class="bold_code"><a href="../ct/#fail-1"><span class="code">ct:fail/1,2</span></a></code> (which also causes the test case process to terminate).</p> <p>Elements from the <code class="code">Config</code> list can, for example, be read with <code class="code">proplists:get_value/2</code> in <code class="code">STDLIB</code> (or the macro <code class="code">?config</code> defined in <code class="code">ct.hrl</code>).</p> <p>If you decide not to run the test case after all, return <code class="code">{skip,Reason}</code>. <code class="code">Reason</code> is then printed in field <code class="code">Comment</code> on the HTML result page.</p> <p>To print some information in field <code class="code">Comment</code> on the HTML result page, return <code class="code">{comment,Comment}</code>.</p> <p>If the function returns anything else, the test case is considered successful. The return value always gets printed in the test case log file.</p> <p>For details about test case implementation, see section <code class="bold_code"><a href="../write_test_chapter/#test_cases">Test Cases</a></code> in the User's Guide.</p> <p>For information on <code class="code">save_config</code> and <code class="code">skip_and_save</code>, see section <code class="bold_code"><a href="../dependencies_chapter/#save_config">Saving Configuration Data</a></code> in the User's Guide.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 1999–2016 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
