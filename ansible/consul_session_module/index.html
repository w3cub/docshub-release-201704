
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Consul_session - Ansible - W3cubDocs</title>
  
  <meta name="description" content=" New in version 2.0. ">
  <meta name="keywords" content="consul, session, -, manipulate, sessions, ansible">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ansible/consul_session_module/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/ansible.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible/" class="_nav-link" title="" style="margin-left:0;">Ansible</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				
<h1 id="consul-session">consul_session - manipulate consul sessions</h1> <div class="versionadded" id="consul-session-manipulate-consul-sessions"> <p><span class="versionmodified">New in version 2.0.</span></p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements-on-host-that-executes-module" id="id2">Requirements (on host that executes module)</a></li> <li><a class="reference internal" href="#options" id="id3">Options</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#this-is-an-extras-module" id="id5">This is an Extras Module</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <p>allows the addition, modification and deletion of sessions in a consul cluster. These sessions can then be used in conjunction with key value pairs to implement distributed locks. In depth documentation for working with sessions can be found here <a class="reference external" href="http://www.consul.io/docs/internals/sessions.html" target="_blank">http://www.consul.io/docs/internals/sessions.html</a></p>   <h2 id="requirements-on-host-that-executes-module">Requirements (on host that executes module)</h2>  <ul class="simple"> <li>python &gt;= 2.6</li> <li>python-consul</li> <li>requests</li> </ul>    <h2 id="options">Options</h2> <table> <tr> <th class="head">parameter</th> <th class="head">required</th> <th class="head">default</th> <th class="head">choices</th> <th class="head">comments</th> </tr> <tr> <td>behavior<br><div style="font-size: small;"> (added in 2.2)</div>
</td> <td>no</td> <td>release</td> <td></td> <td><div>the optional behavior that can be attached to the session when it is created. This can be set to either ‘release’ or ‘delete’. This controls the behavior when a session is invalidated.</div></td>
</tr> <tr> <td>checks<br>
</td> <td>no</td> <td>None</td> <td></td> <td><div>a list of checks that will be used to verify the session health. If all the checks fail, the session will be invalidated and any locks associated with the session will be release and can be acquired once the associated lock delay has expired.</div></td>
</tr> <tr> <td>datacenter<br>
</td> <td>no</td> <td>None</td> <td></td> <td><div>name of the datacenter in which the session exists or should be created.</div></td>
</tr> <tr> <td>delay<br>
</td> <td>no</td> <td>15</td> <td></td> <td><div>the optional lock delay that can be attached to the session when it is created. Locks for invalidated sessions ar blocked from being acquired until this delay has expired. Durations are in seconds</div></td>
</tr> <tr> <td>host<br>
</td> <td>no</td> <td>localhost</td> <td></td> <td><div>host of the consul agent defaults to localhost</div></td>
</tr> <tr> <td>name<br>
</td> <td>no</td> <td>None</td> <td></td> <td><div>the name that should be associated with the session. This is opaque to Consul and not required.</div></td>
</tr> <tr> <td>node<br>
</td> <td>no</td> <td>None</td> <td></td> <td><div>the name of the node that with which the session will be associated. by default this is the name of the agent.</div></td>
</tr> <tr> <td>port<br>
</td> <td>no</td> <td>8500</td> <td></td> <td><div>the port on which the consul agent is running</div></td>
</tr> <tr> <td>scheme<br><div style="font-size: small;"> (added in 2.1)</div>
</td> <td>no</td> <td>http</td> <td></td> <td><div>the protocol scheme on which the consul agent is running</div></td>
</tr> <tr> <td>state<br>
</td> <td>no</td> <td>present</td> <td><ul>
<li>present</li>
<li>absent</li>
<li>info</li>
<li>node</li>
<li>list</li>
</ul></td> <td><div>whether the session should be present i.e. created if it doesn't exist, or absent, removed if present. If created, the ID for the session is returned in the output. If absent, the name or ID is required to remove the session. Info for a single session, all the sessions for a node or all available sessions can be retrieved by specifying info, node or list for the state; for node or info, the node name or session id is required as parameter.</div></td>
</tr> <tr> <td>validate_certs<br><div style="font-size: small;"> (added in 2.1)</div>
</td> <td>no</td> <td>True</td> <td></td> <td><div>whether to verify the tls certificate of the consul agent</div></td>
</tr> </table>   <h2 id="examples">Examples</h2>  <pre data-language="yaml">- name: register basic session with consul
  consul_session:
    name: session1

- name: register a session with an existing check
  consul_session:
    name: session_with_check
    checks:
      - existing_check_name

- name: register a session with lock_delay
  consul_session:
    name: session_with_delay
    delay: 20s

- name: retrieve info about session by id
  consul_session: id=session_id state=info

- name: retrieve active sessions
  consul_session: state=list
</pre>    <h2 id="this-is-an-extras-module">This is an Extras Module</h2> <p>For more information on what this means please read <a class="reference internal" href="../modules_extra/"><span class="doc">Extras Modules</span></a></p> <p>For help in developing on modules, should you be so inclined, please read <a class="reference internal" href="https://docs.ansible.com/ansible/community.html" target="_blank"><span class="doc">Community Information &amp; Contributing</span></a>, <span class="xref doc">developing_test_pr</span> and <a class="reference internal" href="../developing_modules/"><span class="doc">Developing Modules</span></a>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2016 Michael DeHaan<br>© 2016 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/consul_session_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/consul_session_module.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
