
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>3.1. Object-like Macros - GCC 5 CPP - W3cubDocs</title>
  
  <meta name="description" content="An object-like macro is a simple identifier which will be replaced by a code fragment. It is called object-like because it looks like a data object &hellip;">
  <meta name="keywords" content="object-like, macros, -, gcc, cpp, gcc~5_cpp">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/gcc~5_cpp/object_002dlike-macros/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/gcc~5_cpp.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/gcc~5_cpp/" class="_nav-link" title="" style="margin-left:0;">GCC 5 CPP</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _gnu">
				
<h1 class="section" id="Object_002dlike-Macros">3.1 Object-like Macros</h1> <p> An object-like macro is a simple identifier which will be replaced by a code fragment. It is called object-like because it looks like a data object in code that uses it. They are most commonly used to give symbolic names to numeric constants. </p>
<p>You create macros with the ‘<code>#define</code>’ directive. ‘<code>#define</code>’ is followed by the name of the macro and then the token sequence it should be an abbreviation for, which is variously referred to as the macro's body, expansion or replacement list. For example, </p>
<pre class="smallexample">#define BUFFER_SIZE 1024</pre> <p class="noindent">defines a macro named <code>BUFFER_SIZE</code> as an abbreviation for the token <code>1024</code>. If somewhere after this ‘<code>#define</code>’ directive there comes a C statement of the form </p>
<pre class="smallexample">foo = (char *) malloc (BUFFER_SIZE);</pre> <p class="noindent">then the C preprocessor will recognize and expand the macro <code>BUFFER_SIZE</code>. The C compiler will see the same tokens as it would if you had written </p>
<pre class="smallexample">foo = (char *) malloc (1024);</pre> <p>By convention, macro names are written in uppercase. Programs are easier to read when it is possible to tell at a glance which names are macros. </p>
<p>The macro's body ends at the end of the ‘<code>#define</code>’ line. You may continue the definition onto multiple lines, if necessary, using backslash-newline. When the macro is expanded, however, it will all come out on one line. For example, </p>
<pre class="smallexample">#define NUMBERS 1, \
                2, \
                3
int x[] = { NUMBERS };
     ==&gt; int x[] = { 1, 2, 3 };</pre> <p class="noindent">The most common visible consequence of this is surprising line numbers in error messages. </p>
<p>There is no restriction on what can go in a macro body provided it decomposes into valid preprocessing tokens. Parentheses need not balance, and the body need not resemble valid C code. (If it does not, you may get error messages from the C compiler when you use the macro.) </p>
<p>The C preprocessor scans your program sequentially. Macro definitions take effect at the place you write them. Therefore, the following input to the C preprocessor </p>
<pre class="smallexample">foo = X;
#define X 4
bar = X;</pre> <p class="noindent">produces </p>
<pre class="smallexample">foo = X;
bar = 4;</pre> <p>When the preprocessor expands a macro name, the macro's expansion replaces the macro invocation, then the expansion is examined for more macros to expand. For example, </p>
<pre class="smallexample">#define TABLESIZE BUFSIZE
#define BUFSIZE 1024
TABLESIZE
     ==&gt; BUFSIZE
     ==&gt; 1024</pre> <p class="noindent"><code>TABLESIZE</code> is expanded first to produce <code>BUFSIZE</code>, then that macro is expanded to produce the final result, <code>1024</code>. </p>
<p>Notice that <code>BUFSIZE</code> was not defined when <code>TABLESIZE</code> was defined. The ‘<code>#define</code>’ for <code>TABLESIZE</code> uses exactly the expansion you specify—in this case, <code>BUFSIZE</code>—and does not check to see whether it too contains macro names. Only when you <em>use</em> <code>TABLESIZE</code> is the result of its expansion scanned for more macro names. </p>
<p>This makes a difference if you change the definition of <code>BUFSIZE</code> at some point in the source file. <code>TABLESIZE</code>, defined as shown, will always expand using the definition of <code>BUFSIZE</code> that is currently in effect: </p>
<pre class="smallexample">#define BUFSIZE 1020
#define TABLESIZE BUFSIZE
#undef BUFSIZE
#define BUFSIZE 37</pre> <p class="noindent">Now <code>TABLESIZE</code> expands (in two stages) to <code>37</code>. </p>
<p>If the expansion of a macro contains its own name, either directly or via intermediate macros, it is not expanded again when the expansion is examined for more macros. This prevents infinite recursion. See <a href="../self_002dreferential-macros/#Self_002dReferential-Macros">Self-Referential Macros</a>, for the precise details. </p>
<div class="_attribution">
  <p class="_attribution-p">
    © Free Software Foundation<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://gcc.gnu.org/onlinedocs/gcc-5.4.0/cpp/Object_002dlike-Macros.html" class="_attribution-link" target="_blank">https://gcc.gnu.org/onlinedocs/gcc-5.4.0/cpp/Object_002dlike-Macros.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
