
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Delegator - Ruby 2.2 - W3cubDocs</title>
  
  <meta name="description" content="This library provides three different ways to delegate method calls to an object. The easiest to use is SimpleDelegator. Pass an object to the &hellip;">
  <meta name="keywords" content="class, delegator, -, ruby, ruby~2.2">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ruby~2.2/delegator/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-50364fff564ce3b6327021805f3f00e2957b441cf27f576a7dd4ff63bbc47047.css">
  <script type="text/javascript" src="/assets/application-db64bfd54ceb42be11af7995804cf4902548419ceb79d509b0b7d62c22d98e6f.js"></script>
  <script src="/json/ruby~2.2.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ruby~2.2/" class="_nav-link" title="" style="margin-left:0;">Ruby 2.2</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _rdoc">
				
<h1 id="class-Delegator" class="class"> class Delegator </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="../basicobject/">BasicObject</a></dd>
</dl> <section class="description"> <p>This library provides three different ways to delegate method calls to an object. The easiest to use is <a href="../simpledelegator/">SimpleDelegator</a>. Pass an object to the constructor and all methods supported by the object will be delegated. This object can be changed later.</p> <p>Going a step further, the top level DelegateClass method allows you to easily setup delegation through class inheritance. This is considerably more flexible and thus probably the most common use for this library.</p> <p>Finally, if you need full control over the delegation scheme, you can inherit from the abstract class <a href="../delegator/">Delegator</a> and customize as needed. (If you find yourself needing this control, have a look at <a href="../forwardable/">Forwardable</a> which is also in the standard library. It may suit your needs better.)</p> <p>SimpleDelegator's implementation serves as a nice example if the use of Delegator:</p> <pre class="ruby">class SimpleDelegator &lt; Delegator
  def initialize(obj)
    super                  # pass obj to Delegator constructor, required
    @delegate_sd_obj = obj # store obj for future use
  end

  def __getobj__
    @delegate_sd_obj # return object we are delegating to, required
  end

  def __setobj__(obj)
    @delegate_sd_obj = obj # change delegation object,
                           # a feature we're providing
  end
end
</pre> <h2 id="class-Delegator-label-Notes">Notes</h2> <p>Be advised, <span>RDoc</span> will not detect delegated methods.</p> </section> <section id="5Buntitled-5D" class="documentation-section"> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-c-new"> <span class="method-name">new</span><span class="method-args">(obj)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Pass in the <em>obj</em> to delegate method calls to. All methods supported by <em>obj</em> will be delegated to.</p> <div class="method-source-code" id="new-source"> <pre class="ruby"># File lib/delegate.rb, line 75
def initialize(obj)
  __setobj__(obj)
end</pre> </div> </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-i-21"> <span class="method-name">!</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Delegates ! to the _<em>getobj</em>_</p> <div class="method-source-code" id="21-source"> <pre class="ruby"># File lib/delegate.rb, line 158
def !
  !__getobj__
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-21-3D"> <span class="method-name">!=</span><span class="method-args">(obj)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns true if two objects are not considered of equal value.</p> <div class="method-source-code" id="21-3D-source"> <pre class="ruby"># File lib/delegate.rb, line 150
def !=(obj)
  return false if obj.equal?(self)
  __getobj__ != obj
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-3D-3D"> <span class="method-name">==</span><span class="method-args">(obj)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns true if two objects are considered of equal value.</p> <div class="method-source-code" id="3D-3D-source"> <pre class="ruby"># File lib/delegate.rb, line 142
def ==(obj)
  return true if obj.equal?(self)
  self.__getobj__ == obj
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-__getobj__"> <span class="method-name">__getobj__</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>This method must be overridden by subclasses and should return the object method calls are being delegated to.</p> <div class="method-source-code" id="__getobj__-source"> <pre class="ruby"># File lib/delegate.rb, line 166
def __getobj__
  __raise__ ::NotImplementedError, "need to define `__getobj__'"
end</pre> </div> </div> </div> <div class="method-detail method-alias"> <div class="method-heading" id="method-i-__raise__"> <span class="method-name">__raise__</span><span class="method-args">()</span> </div>  <div class="aliases"> Alias for: <a href="../delegator/#method-i-raise">raise</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-__setobj__"> <span class="method-name">__setobj__</span><span class="method-args">(obj)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>This method must be overridden by subclasses and change the object delegate to <em>obj</em>.</p> <div class="method-source-code" id="__setobj__-source"> <pre class="ruby"># File lib/delegate.rb, line 174
def __setobj__(obj)
  __raise__ ::NotImplementedError, "need to define `__setobj__'"
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-freeze"> <span class="method-name">freeze</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Freeze both the object returned by _<em>getobj</em>_ and self.</p> <div class="method-source-code" id="freeze-source"> <pre class="c"># File lib/delegate.rb, line 236
  </pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-marshal_dump"> <span class="method-name">marshal_dump</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Serialization support for the object returned by _<em>getobj</em>_.</p> <div class="method-source-code" id="marshal_dump-source"> <pre class="ruby"># File lib/delegate.rb, line 181
def marshal_dump
  ivars = instance_variables.reject {|var| /\A@delegate_/ =~ var}
  [
    :__v2__,
    ivars, ivars.map{|var| instance_variable_get(var)},
    __getobj__
  ]
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-marshal_load"> <span class="method-name">marshal_load</span><span class="method-args">(data)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Reinitializes delegation from a serialized object.</p> <div class="method-source-code" id="marshal_load-source"> <pre class="ruby"># File lib/delegate.rb, line 193
def marshal_load(data)
  version, vars, values, obj = data
  if version == :__v2__
    vars.each_with_index{|var, i| instance_variable_set(var, values[i])}
    __setobj__(obj)
  else
    __setobj__(data)
  end
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-method_missing"> <span class="method-name">method_missing</span><span class="method-args">(m, *args, &amp;block)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Handles the magic of delegation through _<em>getobj</em>_.</p> <div class="method-calls-super"> Calls superclass method <a href="../basicobject/#method-i-method_missing">BasicObject#method_missing</a> </div> <div class="method-source-code" id="method_missing-source"> <pre class="ruby"># File lib/delegate.rb, line 82
def method_missing(m, *args, &amp;block)
  r = true
  target = self.__getobj__ {r = false}
  begin
    if r &amp;&amp; target.respond_to?(m)
      target.__send__(m, *args, &amp;block)
    elsif ::Kernel.respond_to?(m, true)
      ::Kernel.instance_method(m).bind(self).(*args, &amp;block)
    else
      super(m, *args, &amp;block)
    end
  ensure
    $@.delete_if {|t| %r"\A#{Regexp.quote(__FILE__)}:(?:#{[__LINE__-7, __LINE__-5, __LINE__-3].join('|')}):"o =~ t} if $@
  end
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-methods"> <span class="method-name">methods</span><span class="method-args">(all=true)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns the methods available to this delegate object as the union of this object's and _<em>getobj</em>_ methods.</p> <div class="method-calls-super"> Calls superclass method </div> <div class="method-source-code" id="methods-source"> <pre class="ruby"># File lib/delegate.rb, line 117
def methods(all=true)
  __getobj__.methods(all) | super
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-protected_methods"> <span class="method-name">protected_methods</span><span class="method-args">(all=true)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns the methods available to this delegate object as the union of this object's and _<em>getobj</em>_ protected methods.</p> <div class="method-calls-super"> Calls superclass method </div> <div class="method-source-code" id="protected_methods-source"> <pre class="ruby"># File lib/delegate.rb, line 133
def protected_methods(all=true)
  __getobj__.protected_methods(all) | super
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-public_methods"> <span class="method-name">public_methods</span><span class="method-args">(all=true)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Returns the methods available to this delegate object as the union of this object's and _<em>getobj</em>_ public methods.</p> <div class="method-calls-super"> Calls superclass method </div> <div class="method-source-code" id="public_methods-source"> <pre class="ruby"># File lib/delegate.rb, line 125
def public_methods(all=true)
  __getobj__.public_methods(all) | super
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-raise"> <span class="method-name">raise</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Use __raise__ if your <a href="../delegator/">Delegator</a> does not have a object to delegate the raise method call.</p> <div class="method-source-code" id="raise-source"> <pre class="c"># File lib/delegate.rb, line 71
  </pre> </div> </div> <div class="aliases"> Also aliased as: <a href="../delegator/#method-i-__raise__">__raise__</a> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-respond_to_missing-3F"> <span class="method-name">respond_to_missing?</span><span class="method-args">(m, include_private)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Checks for a method provided by this the delegate object by forwarding the call through _<em>getobj</em>_.</p> <div class="method-source-code" id="respond_to_missing-3F-source"> <pre class="ruby"># File lib/delegate.rb, line 102
def respond_to_missing?(m, include_private)
  r = true
  target = self.__getobj__ {r = false}
  r &amp;&amp;= target.respond_to?(m, include_private)
  if r &amp;&amp; include_private &amp;&amp; !target.respond_to?(m, false)
    warn "#{caller(3)[0]}: delegator does not forward private method \##{m}"
    return false
  end
  r
end</pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-taint"> <span class="method-name">taint</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Taint both the object returned by _<em>getobj</em>_ and self.</p> <div class="method-source-code" id="taint-source"> <pre class="c"># File lib/delegate.rb, line 226
  </pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-trust"> <span class="method-name">trust</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Trust both the object returned by _<em>getobj</em>_ and self.</p> <div class="method-source-code" id="trust-source"> <pre class="c"># File lib/delegate.rb, line 216
  </pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-untaint"> <span class="method-name">untaint</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Untaint both the object returned by _<em>getobj</em>_ and self.</p> <div class="method-source-code" id="untaint-source"> <pre class="c"># File lib/delegate.rb, line 231
  </pre> </div> </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-untrust"> <span class="method-name">untrust</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description"> <p>Untrust both the object returned by _<em>getobj</em>_ and self.</p> <div class="method-source-code" id="untrust-source"> <pre class="c"># File lib/delegate.rb, line 221
  </pre> </div> </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    Ruby Core © 1993–2016 Yukihiro Matsumoto<br>Licensed under the Ruby License.<br>Ruby Standard Library © contributors<br>Licensed under their own licenses.<br>
    
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
</body>
</html>
